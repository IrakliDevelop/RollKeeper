{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/inventory/ItemCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { InventoryItem, MagicItemRarity } from '@/types/character';\r\nimport { Edit2, Trash2, Plus, Minus, Package } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { formatCurrencyFromCopper } from '@/utils/currency';\r\n\r\ninterface ItemCardProps {\r\n  item: InventoryItem;\r\n  onEdit?: (item: InventoryItem) => void;\r\n  onDelete?: () => void;\r\n  onQuantityChange?: (quantity: number) => void;\r\n  compact?: boolean;\r\n}\r\n\r\nconst getRarityVariant = (\r\n  rarity?: MagicItemRarity\r\n): 'secondary' | 'success' | 'info' | 'primary' | 'warning' | 'danger' => {\r\n  if (!rarity) return 'secondary';\r\n\r\n  switch (rarity) {\r\n    case 'common':\r\n      return 'secondary';\r\n    case 'uncommon':\r\n      return 'success';\r\n    case 'rare':\r\n      return 'info';\r\n    case 'very rare':\r\n      return 'primary';\r\n    case 'legendary':\r\n      return 'warning';\r\n    case 'artifact':\r\n      return 'danger';\r\n    default:\r\n      return 'secondary';\r\n  }\r\n};\r\n\r\nexport function ItemCard({\r\n  item,\r\n  onEdit,\r\n  onDelete,\r\n  onQuantityChange,\r\n  compact = false,\r\n}: ItemCardProps) {\r\n  const totalWeight = item.weight ? item.weight * item.quantity : undefined;\r\n  const totalValue = item.value ? item.value * item.quantity : undefined;\r\n\r\n  return (\r\n    <div\r\n      className={`group rounded-lg border-2 border-gray-200 bg-white transition-all hover:shadow-md hover:border-gray-300 ${\r\n        compact ? 'p-2' : 'p-4'\r\n      }`}\r\n    >\r\n      <div\r\n        className={`flex items-start justify-between gap-3 ${compact ? 'mb-1' : 'mb-3'}`}\r\n      >\r\n        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n          <Package className={`shrink-0 text-blue-600 ${compact ? 'h-3 w-3' : 'h-4 w-4'}`} />\r\n          <h5\r\n            className={`font-bold text-gray-800 truncate ${compact ? 'text-xs' : 'text-sm'}`}\r\n          >\r\n            {item.name}\r\n          </h5>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex items-center gap-1\">\r\n            {onEdit && (\r\n              <Button\r\n                onClick={() => onEdit(item)}\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                title=\"Edit item\"\r\n                className=\"h-6 w-6 p-0 text-blue-600 hover:bg-blue-50 hover:text-blue-800\"\r\n              >\r\n                <Edit2 size={14} />\r\n              </Button>\r\n            )}\r\n            {onDelete && (\r\n              <Button\r\n                onClick={onDelete}\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                title=\"Delete item\"\r\n                className=\"h-6 w-6 p-0 text-red-600 hover:bg-red-50 hover:text-red-800\"\r\n              >\r\n                <Trash2 size={14} />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Rarity and Type Badges */}\r\n      {(item.rarity || item.type) && !compact && (\r\n        <div className=\"mb-3 flex flex-wrap gap-2\">\r\n          {item.rarity && (\r\n            <Badge variant={getRarityVariant(item.rarity)} size=\"sm\">\r\n              {item.rarity.charAt(0).toUpperCase() + item.rarity.slice(1)}\r\n            </Badge>\r\n          )}\r\n          {item.type && (\r\n            <Badge variant=\"info\" size=\"sm\">\r\n              {item.type.charAt(0).toUpperCase() + item.type.slice(1)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Item Details */}\r\n      <div className={`grid grid-cols-[auto_1fr] gap-x-3 gap-y-2 text-gray-600 ${compact ? 'text-xs' : 'text-sm'}`}>\r\n        <span className=\"text-gray-500\">Category:</span>\r\n        <span className=\"font-medium text-gray-800 capitalize\">\r\n          {item.category}\r\n        </span>\r\n\r\n        <span className=\"text-gray-500\">Quantity:</span>\r\n        {onQuantityChange ? (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              onClick={() => onQuantityChange(Math.max(1, item.quantity - 1))}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              disabled={item.quantity <= 1}\r\n              className=\"h-6 w-6 p-0 text-red-600 hover:bg-red-50 hover:text-red-800 disabled:opacity-30\"\r\n            >\r\n              <Minus size={12} />\r\n            </Button>\r\n            <span className=\"min-w-[2rem] text-center font-bold text-gray-800\">\r\n              {item.quantity}\r\n            </span>\r\n            <Button\r\n              onClick={() => onQuantityChange(item.quantity + 1)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              className=\"h-6 w-6 p-0 text-green-600 hover:bg-green-50 hover:text-green-800\"\r\n            >\r\n              <Plus size={12} />\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <span className=\"font-bold text-gray-800\">{item.quantity}</span>\r\n        )}\r\n\r\n        {totalWeight !== undefined && !compact && (\r\n          <>\r\n            <span className=\"text-gray-500\">Weight:</span>\r\n            <span className=\"font-medium text-gray-800\">{totalWeight} lbs</span>\r\n          </>\r\n        )}\r\n\r\n        {totalValue !== undefined && !compact && (\r\n          <>\r\n            <span className=\"text-gray-500\">Value:</span>\r\n            <span className=\"font-medium text-gray-800\">\r\n              {formatCurrencyFromCopper(totalValue)}\r\n            </span>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tags */}\r\n      {item.tags.length > 0 && !compact && (\r\n        <div className=\"mt-3 flex flex-wrap gap-1\">\r\n          {item.tags.slice(0, 3).map((tag, index) => (\r\n            <Badge key={index} variant=\"secondary\" size=\"sm\">\r\n              {tag}\r\n            </Badge>\r\n          ))}\r\n          {item.tags.length > 3 && (\r\n            <Badge variant=\"secondary\" size=\"sm\">\r\n              +{item.tags.length - 3}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Description */}\r\n      {item.description && !compact && (\r\n        <p className=\"mt-3 line-clamp-2 text-xs text-gray-700 border-t-2 border-gray-100 pt-3\">\r\n          {item.description}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;AAiBA,MAAM,mBAAmB,CACvB;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEO,SAAS,SAAS,EACvB,IAAI,EACJ,MAAM,EACN,QAAQ,EACR,gBAAgB,EAChB,UAAU,KAAK,EACD;IACd,MAAM,cAAc,KAAK,MAAM,GAAG,KAAK,MAAM,GAAG,KAAK,QAAQ,GAAG;IAChE,MAAM,aAAa,KAAK,KAAK,GAAG,KAAK,KAAK,GAAG,KAAK,QAAQ,GAAG;IAE7D,qBACE,8OAAC;QACC,WAAW,CAAC,wGAAwG,EAClH,UAAU,QAAQ,OAClB;;0BAEF,8OAAC;gBACC,WAAW,CAAC,uCAAuC,EAAE,UAAU,SAAS,QAAQ;;kCAEhF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,mNAAO;gCAAC,WAAW,CAAC,uBAAuB,EAAE,UAAU,YAAY,WAAW;;;;;;0CAC/E,8OAAC;gCACC,WAAW,CAAC,iCAAiC,EAAE,UAAU,YAAY,WAAW;0CAE/E,KAAK,IAAI;;;;;;;;;;;;oBAKb,CAAC,UAAU,QAAQ,mBAClB,8OAAC;wBAAI,WAAU;;4BACZ,wBACC,8OAAC,oLAAM;gCACL,SAAS,IAAM,OAAO;gCACtB,SAAQ;gCACR,MAAK;gCACL,OAAM;gCACN,WAAU;0CAEV,cAAA,8OAAC,2MAAK;oCAAC,MAAM;;;;;;;;;;;4BAGhB,0BACC,8OAAC,oLAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,MAAK;gCACL,OAAM;gCACN,WAAU;0CAEV,cAAA,8OAAC,oNAAM;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;YAQvB,CAAC,KAAK,MAAM,IAAI,KAAK,IAAI,KAAK,CAAC,yBAC9B,8OAAC;gBAAI,WAAU;;oBACZ,KAAK,MAAM,kBACV,8OAAC,mLAAK;wBAAC,SAAS,iBAAiB,KAAK,MAAM;wBAAG,MAAK;kCACjD,KAAK,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,MAAM,CAAC,KAAK,CAAC;;;;;;oBAG5D,KAAK,IAAI,kBACR,8OAAC,mLAAK;wBAAC,SAAQ;wBAAO,MAAK;kCACxB,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;;;;;;;;;;;;0BAO7D,8OAAC;gBAAI,WAAW,CAAC,wDAAwD,EAAE,UAAU,YAAY,WAAW;;kCAC1G,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAChC,8OAAC;wBAAK,WAAU;kCACb,KAAK,QAAQ;;;;;;kCAGhB,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;oBAC/B,iCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oLAAM;gCACL,SAAS,IAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,KAAK,QAAQ,GAAG;gCAC5D,SAAQ;gCACR,MAAK;gCACL,UAAU,KAAK,QAAQ,IAAI;gCAC3B,WAAU;0CAEV,cAAA,8OAAC,6MAAK;oCAAC,MAAM;;;;;;;;;;;0CAEf,8OAAC;gCAAK,WAAU;0CACb,KAAK,QAAQ;;;;;;0CAEhB,8OAAC,oLAAM;gCACL,SAAS,IAAM,iBAAiB,KAAK,QAAQ,GAAG;gCAChD,SAAQ;gCACR,MAAK;gCACL,WAAU;0CAEV,cAAA,8OAAC,0MAAI;oCAAC,MAAM;;;;;;;;;;;;;;;;6CAIhB,8OAAC;wBAAK,WAAU;kCAA2B,KAAK,QAAQ;;;;;;oBAGzD,gBAAgB,aAAa,CAAC,yBAC7B;;0CACE,8OAAC;gCAAK,WAAU;0CAAgB;;;;;;0CAChC,8OAAC;gCAAK,WAAU;;oCAA6B;oCAAY;;;;;;;;;oBAI5D,eAAe,aAAa,CAAC,yBAC5B;;0CACE,8OAAC;gCAAK,WAAU;0CAAgB;;;;;;0CAChC,8OAAC;gCAAK,WAAU;0CACb,IAAA,mKAAwB,EAAC;;;;;;;;;;;;;;YAOjC,KAAK,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,yBACxB,8OAAC;gBAAI,WAAU;;oBACZ,KAAK,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,KAAK,sBAC/B,8OAAC,mLAAK;4BAAa,SAAQ;4BAAY,MAAK;sCACzC;2BADS;;;;;oBAIb,KAAK,IAAI,CAAC,MAAM,GAAG,mBAClB,8OAAC,mLAAK;wBAAC,SAAQ;wBAAY,MAAK;;4BAAK;4BACjC,KAAK,IAAI,CAAC,MAAM,GAAG;;;;;;;;;;;;;YAO5B,KAAK,WAAW,IAAI,CAAC,yBACpB,8OAAC;gBAAE,WAAU;0BACV,KAAK,WAAW;;;;;;;;;;;;AAK3B","debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/inventory/ItemForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  MagicItemRarity,\r\n  MagicItemCategory,\r\n} from '@/types/character';\r\nimport { X } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/feedback/Modal';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { Textarea } from '@/components/ui/forms/textarea';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\n\r\nconst ITEM_CATEGORIES = [\r\n  'weapon',\r\n  'armor',\r\n  'tool',\r\n  'consumable',\r\n  'treasure',\r\n  'misc',\r\n];\r\n\r\nconst ITEM_RARITIES: MagicItemRarity[] = [\r\n  'common',\r\n  'uncommon',\r\n  'rare',\r\n  'very rare',\r\n  'legendary',\r\n  'artifact',\r\n];\r\n\r\nconst ITEM_TYPES: MagicItemCategory[] = [\r\n  'wondrous',\r\n  'armor',\r\n  'shield',\r\n  'ring',\r\n  'staff',\r\n  'wand',\r\n  'rod',\r\n  'scroll',\r\n  'potion',\r\n  'artifact',\r\n  'other',\r\n];\r\n\r\nexport interface InventoryFormData {\r\n  name: string;\r\n  category: string;\r\n  location: string;\r\n  rarity?: MagicItemRarity;\r\n  type?: MagicItemCategory;\r\n  quantity: number;\r\n  weight?: number;\r\n  value?: number;\r\n  description: string;\r\n  tags: string[];\r\n}\r\n\r\ninterface ItemFormProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (data: InventoryFormData) => void;\r\n  initialData?: InventoryFormData;\r\n  availableLocations: string[];\r\n  isEditing: boolean;\r\n}\r\n\r\nexport const initialInventoryFormData: InventoryFormData = {\r\n  name: '',\r\n  category: 'misc',\r\n  location: 'Backpack',\r\n  rarity: undefined,\r\n  type: undefined,\r\n  quantity: 1,\r\n  weight: undefined,\r\n  value: undefined,\r\n  description: '',\r\n  tags: [],\r\n};\r\n\r\nexport function ItemForm({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  initialData = initialInventoryFormData,\r\n  availableLocations,\r\n  isEditing,\r\n}: ItemFormProps) {\r\n  const [formData, setFormData] = useState<InventoryFormData>(initialData);\r\n  const [tagInput, setTagInput] = useState('');\r\n  const [customLocation, setCustomLocation] = useState('');\r\n  const [showCustomLocation, setShowCustomLocation] = useState(false);\r\n\r\n  // Reset form when initialData changes\r\n  React.useEffect(() => {\r\n    if (isOpen) {\r\n      setFormData(initialData);\r\n      setTagInput('');\r\n      setCustomLocation('');\r\n      setShowCustomLocation(false);\r\n    }\r\n  }, [isOpen, initialData]);\r\n\r\n  const addTag = () => {\r\n    if (tagInput.trim() && !formData.tags.includes(tagInput.trim())) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        tags: [...prev.tags, tagInput.trim()],\r\n      }));\r\n      setTagInput('');\r\n    }\r\n  };\r\n\r\n  const removeTag = (index: number) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      tags: prev.tags.filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // If custom location is shown and has value, use it\r\n    const finalData = {\r\n      ...formData,\r\n      location: showCustomLocation && customLocation.trim() \r\n        ? customLocation.trim() \r\n        : formData.location,\r\n    };\r\n    \r\n    onSubmit(finalData);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={isEditing ? 'Edit Item' : 'Add Item'}\r\n      size=\"lg\"\r\n      closeOnBackdropClick={true}\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Section: Basic Information */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n            Basic Information\r\n          </h4>\r\n\r\n          <Input\r\n            label=\"Name\"\r\n            value={formData.name}\r\n            onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n            placeholder=\"e.g., Rope (50 feet), Healing Potion\"\r\n            required\r\n          />\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                Category\r\n              </label>\r\n              <SelectField\r\n                value={formData.category}\r\n                onValueChange={value =>\r\n                  setFormData({ ...formData, category: value })\r\n                }\r\n              >\r\n                {ITEM_CATEGORIES.map(category => (\r\n                  <SelectItem key={category} value={category}>\r\n                    {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectField>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Quantity\"\r\n              type=\"number\"\r\n              value={formData.quantity.toString()}\r\n              onChange={e =>\r\n                setFormData({\r\n                  ...formData,\r\n                  quantity: parseInt(e.target.value) || 1,\r\n                })\r\n              }\r\n              min={1}\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section: Item Classification */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n            Item Classification\r\n          </h4>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                Rarity\r\n              </label>\r\n              <SelectField\r\n                value={formData.rarity || 'none'}\r\n                onValueChange={value =>\r\n                  setFormData({\r\n                    ...formData,\r\n                    rarity: value === 'none' ? undefined : (value as MagicItemRarity),\r\n                  })\r\n                }\r\n              >\r\n                <SelectItem value=\"none\">None/Standard</SelectItem>\r\n                {ITEM_RARITIES.map(rarity => (\r\n                  <SelectItem key={rarity} value={rarity}>\r\n                    {rarity.charAt(0).toUpperCase() + rarity.slice(1)}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectField>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                Type\r\n              </label>\r\n              <SelectField\r\n                value={formData.type || 'none'}\r\n                onValueChange={value =>\r\n                  setFormData({\r\n                    ...formData,\r\n                    type: value === 'none' ? undefined : (value as MagicItemCategory),\r\n                  })\r\n                }\r\n              >\r\n                <SelectItem value=\"none\">Standard Item</SelectItem>\r\n                {ITEM_TYPES.map(type => (\r\n                  <SelectItem key={type} value={type}>\r\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectField>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section: Location */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n            Location\r\n          </h4>\r\n\r\n          <div className=\"space-y-3\">\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                Where is this item stored?\r\n              </label>\r\n              <SelectField\r\n                value={showCustomLocation ? 'custom' : formData.location}\r\n                onValueChange={value => {\r\n                  if (value === 'custom') {\r\n                    setShowCustomLocation(true);\r\n                  } else {\r\n                    setShowCustomLocation(false);\r\n                    setFormData({ ...formData, location: value });\r\n                  }\r\n                }}\r\n              >\r\n                {availableLocations.map(location => (\r\n                  <SelectItem key={location} value={location}>\r\n                    {location}\r\n                  </SelectItem>\r\n                ))}\r\n                <SelectItem value=\"custom\">Custom Location...</SelectItem>\r\n              </SelectField>\r\n            </div>\r\n\r\n            {showCustomLocation && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <Input\r\n                  value={customLocation}\r\n                  onChange={e => setCustomLocation(e.target.value)}\r\n                  placeholder=\"Enter custom location...\"\r\n                  className=\"flex-1\"\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowCustomLocation(false);\r\n                    setCustomLocation('');\r\n                  }}\r\n                  variant=\"outline\"\r\n                  size=\"md\"\r\n                >\r\n                  <X size={16} />\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section: Item Details */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n            Item Details\r\n          </h4>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Input\r\n              label=\"Weight (lbs)\"\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              value={formData.weight?.toString() || ''}\r\n              onChange={e =>\r\n                setFormData({\r\n                  ...formData,\r\n                  weight: e.target.value ? parseFloat(e.target.value) : undefined,\r\n                })\r\n              }\r\n              placeholder=\"Per item\"\r\n              min={0}\r\n            />\r\n\r\n            <Input\r\n              label=\"Value (cp)\"\r\n              type=\"number\"\r\n              value={formData.value?.toString() || ''}\r\n              onChange={e =>\r\n                setFormData({\r\n                  ...formData,\r\n                  value: e.target.value ? parseInt(e.target.value) : undefined,\r\n                })\r\n              }\r\n              placeholder=\"Per item\"\r\n              min={0}\r\n            />\r\n          </div>\r\n\r\n          <Textarea\r\n            label=\"Description\"\r\n            value={formData.description}\r\n            onChange={e =>\r\n              setFormData({ ...formData, description: e.target.value })\r\n            }\r\n            rows={3}\r\n            placeholder=\"Item description, properties, or notes...\"\r\n          />\r\n        </div>\r\n\r\n        {/* Section: Tags */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n            Tags\r\n          </h4>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Input\r\n              value={tagInput}\r\n              onChange={e => setTagInput(e.target.value)}\r\n              placeholder=\"Add tag...\"\r\n              className=\"flex-1\"\r\n              onKeyPress={e => e.key === 'Enter' && (e.preventDefault(), addTag())}\r\n            />\r\n            <Button\r\n              type=\"button\"\r\n              onClick={addTag}\r\n              variant=\"primary\"\r\n              size=\"md\"\r\n              className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n\r\n          {formData.tags.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {formData.tags.map((tag, index) => (\r\n                <Badge\r\n                  key={index}\r\n                  variant=\"primary\"\r\n                  size=\"md\"\r\n                  className=\"group\"\r\n                >\r\n                  {tag}\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => removeTag(index)}\r\n                    className=\"ml-1 text-purple-600 hover:text-purple-800\"\r\n                  >\r\n                    √ó\r\n                  </button>\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Form Actions */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t-2 border-gray-200\">\r\n          <Button type=\"button\" onClick={onClose} variant=\"outline\" size=\"md\">\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"primary\"\r\n            size=\"md\"\r\n            disabled={!formData.name.trim()}\r\n            className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n          >\r\n            {isEditing ? 'Update' : 'Add'} Item\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 980, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/inventory/index.ts"],"sourcesContent":["export { ItemCard } from './ItemCard';\r\nexport { ItemForm, initialInventoryFormData, type InventoryFormData } from './ItemForm';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/SpellCastModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { AlertTriangle, Sparkles } from 'lucide-react';\r\nimport { Spell, SpellSlots, ConcentrationState } from '@/types/character';\r\nimport { Modal } from '@/components/ui/feedback/Modal';\r\n\r\ninterface SpellCastModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  spell: Spell;\r\n  spellSlots: SpellSlots;\r\n  concentration: ConcentrationState;\r\n  onCastSpell: (spellLevel: number) => void;\r\n}\r\n\r\nexport function SpellCastModal({\r\n  isOpen,\r\n  onClose,\r\n  spell,\r\n  spellSlots,\r\n  concentration,\r\n  onCastSpell,\r\n}: SpellCastModalProps) {\r\n  const [selectedLevel, setSelectedLevel] = useState<number | null>(null);\r\n\r\n  // Get available spell levels (spell's base level and higher)\r\n  const availableLevels = [];\r\n  for (let level = Math.max(1, spell.level); level <= 9; level++) {\r\n    const slot = spellSlots[level as keyof SpellSlots];\r\n    if (slot.max > 0 && slot.used < slot.max) {\r\n      availableLevels.push(level);\r\n    }\r\n  }\r\n\r\n  // Set default selected level when modal opens\r\n  React.useEffect(() => {\r\n    if (isOpen && spell.level === 0) {\r\n      setSelectedLevel(0); // Cantrips\r\n    } else if (isOpen && availableLevels.length > 0) {\r\n      setSelectedLevel(spell.level); // Default to base level\r\n    } else {\r\n      setSelectedLevel(null);\r\n    }\r\n  }, [isOpen, spell.level, availableLevels.length]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Check if this is a concentration spell and if already concentrating\r\n  const isConcentrationSpell = spell.concentration;\r\n  const alreadyConcentrating = concentration.isConcentrating;\r\n  const concentrationWarning = isConcentrationSpell && alreadyConcentrating;\r\n\r\n  const handleCast = () => {\r\n    if (selectedLevel !== null) {\r\n      onCastSpell(selectedLevel);\r\n      onClose();\r\n      setSelectedLevel(null);\r\n    }\r\n  };\r\n\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setSelectedLevel(null);\r\n  };\r\n\r\n  const canCast =\r\n    selectedLevel !== null &&\r\n    (spell.level === 0 || // Cantrips can always be cast\r\n      availableLevels.includes(selectedLevel)); // Or if we have the required slot\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={handleClose}\r\n      title=\"Cast Spell\"\r\n      size=\"md\"\r\n      closeOnBackdropClick={true}\r\n    >\r\n      <div className=\"space-y-4\">\r\n        {/* Spell Info */}\r\n        <div className=\"text-center\">\r\n          <div className=\"mb-2 flex items-center justify-center gap-2\">\r\n            <Sparkles className=\"text-purple-600\" size={20} />\r\n          </div>\r\n          <h3 className=\"mb-1 text-xl font-bold text-purple-900\">\r\n            {spell.name}\r\n          </h3>\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-purple-600\">\r\n            <span>{spell.school}</span>\r\n            <span>‚Ä¢</span>\r\n            <span>\r\n              {spell.level === 0 ? 'Cantrip' : `Level ${spell.level}`}\r\n            </span>\r\n            {spell.concentration && (\r\n              <>\r\n                <span>‚Ä¢</span>\r\n                <span className=\"font-medium text-orange-600\">\r\n                  Concentration\r\n                </span>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Concentration Warning */}\r\n        {concentrationWarning && (\r\n          <div className=\"flex items-start gap-3 rounded-lg border border-amber-200 bg-amber-50 p-3\">\r\n            <AlertTriangle\r\n              className=\"mt-0.5 flex-shrink-0 text-amber-600\"\r\n              size={16}\r\n            />\r\n            <div className=\"text-sm\">\r\n              <p className=\"mb-1 font-medium text-amber-800\">\r\n                Concentration Warning\r\n              </p>\r\n              <p className=\"text-amber-700\">\r\n                You are currently concentrating on{' '}\r\n                <span className=\"font-medium\">{concentration.spellName}</span>\r\n                . Casting this spell will end your concentration on the\r\n                previous spell.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cantrip Cast */}\r\n        {spell.level === 0 ? (\r\n          <div className=\"text-center\">\r\n            <p className=\"mb-4 text-sm text-gray-600\">\r\n              Cantrips don&apos;t use spell slots.\r\n            </p>\r\n            <div className=\"mb-4 rounded-lg border-2 border-purple-300 bg-purple-50 p-3\">\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <div className=\"h-3 w-3 rounded-full bg-purple-500\"></div>\r\n                <span className=\"font-medium text-purple-900\">\r\n                  Cantrip Selected\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* No Available Slots */}\r\n            {availableLevels.length === 0 ? (\r\n                <div className=\"py-4 text-center\">\r\n                  <p className=\"mb-2 text-gray-600\">\r\n                    No available spell slots to cast this spell.\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    You need at least a level {spell.level} spell slot.\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Level Selection */}\r\n                  <div>\r\n                    <h4 className=\"mb-3 font-medium text-gray-900\">\r\n                      Choose spell slot level:\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {availableLevels.map(level => {\r\n                        const slot = spellSlots[level as keyof SpellSlots];\r\n                        const available = slot.max - slot.used;\r\n                        const isMinLevel = level === spell.level;\r\n                        const isSelected = selectedLevel === level;\r\n\r\n                        return (\r\n                          <button\r\n                            key={level}\r\n                            onClick={() => setSelectedLevel(level)}\r\n                            className={`flex w-full items-center justify-between rounded-lg border-2 p-3 transition-all duration-200 ${\r\n                              isSelected\r\n                                ? 'border-purple-500 bg-purple-100 shadow-md'\r\n                                : isMinLevel\r\n                                  ? 'border-purple-300 bg-purple-50 hover:border-purple-400 hover:bg-purple-100'\r\n                                  : 'border-slate-300 bg-slate-50 hover:border-slate-400 hover:bg-slate-100'\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div\r\n                                className={`h-3 w-3 rounded-full ${\r\n                                  isSelected\r\n                                    ? 'bg-purple-600'\r\n                                    : isMinLevel\r\n                                      ? 'bg-purple-400'\r\n                                      : 'bg-slate-400'\r\n                                }`}\r\n                              ></div>\r\n                              <span\r\n                                className={`font-medium ${\r\n                                  isSelected\r\n                                    ? 'text-purple-900'\r\n                                    : isMinLevel\r\n                                      ? 'text-purple-800'\r\n                                      : 'text-slate-700'\r\n                                }`}\r\n                              >\r\n                                Level {level}\r\n                                {isMinLevel && (\r\n                                  <span\r\n                                    className={\r\n                                      isSelected\r\n                                        ? 'text-purple-700'\r\n                                        : 'text-purple-600'\r\n                                    }\r\n                                  >\r\n                                    {' '}\r\n                                    (Base Level)\r\n                                  </span>\r\n                                )}\r\n                              </span>\r\n                            </div>\r\n                            <span\r\n                              className={`text-sm ${\r\n                                isSelected\r\n                                  ? 'text-purple-700'\r\n                                  : isMinLevel\r\n                                    ? 'text-purple-600'\r\n                                    : 'text-slate-600'\r\n                              }`}\r\n                            >\r\n                              {available}/{slot.max} available\r\n                            </span>\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Higher Level Effects */}\r\n                  {spell.higherLevel &&\r\n                    selectedLevel &&\r\n                    selectedLevel > spell.level && (\r\n                      <div className=\"rounded-lg border border-blue-200 bg-blue-50 p-3\">\r\n                        <h5 className=\"mb-2 font-medium text-blue-900\">\r\n                          At Higher Levels\r\n                        </h5>\r\n                        <p className=\"text-sm text-blue-800\">\r\n                          {spell.higherLevel}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between gap-3 border-t border-gray-200 p-4\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 text-gray-600 transition-colors hover:text-gray-800\"\r\n          >\r\n            Cancel\r\n          </button>\r\n\r\n          {canCast && (\r\n            <button\r\n              onClick={handleCast}\r\n              className=\"rounded-lg bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-2 font-medium text-white shadow-md transition-all duration-200 hover:from-purple-700 hover:to-violet-700 hover:shadow-lg\"\r\n            >\r\n              Cast {spell.name}\r\n              {selectedLevel !== null && selectedLevel > 0 && (\r\n                <span className=\"ml-1 text-purple-200\">\r\n                  (Level {selectedLevel})\r\n                </span>\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1445, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/SpellDetailsModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Spell } from '@/types/character';\r\nimport { Clock, Target, Zap, Sparkles, Star, Wand2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms';\r\nimport { Badge } from '@/components/ui/layout';\r\nimport { Modal } from '@/components/ui/feedback/Modal';\r\n\r\ninterface SpellDetailsModalProps {\r\n  spell: Spell;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  isFavorite?: boolean;\r\n  onToggleFavorite?: () => void;\r\n  onCast?: () => void;\r\n}\r\n\r\nexport default function SpellDetailsModal({\r\n  spell,\r\n  isOpen,\r\n  onClose,\r\n  isFavorite = false,\r\n  onToggleFavorite,\r\n  onCast,\r\n}: SpellDetailsModalProps) {\r\n  const isCantrip = spell.level === 0;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      size=\"lg\"\r\n      closeOnBackdropClick={true}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"-m-6 mb-6 border-b-2 border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50 p-6\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"flex-1\">\r\n            {/* Spell Name */}\r\n            <h1 className=\"mb-3 text-3xl font-bold text-gray-900\">\r\n              {spell.name}\r\n            </h1>\r\n\r\n            {/* Badges */}\r\n            <div className=\"mb-3 flex flex-wrap items-center gap-2\">\r\n              <Badge\r\n                variant={isCantrip ? 'warning' : 'primary'}\r\n                size=\"sm\"\r\n                className={\r\n                  isCantrip\r\n                    ? 'bg-yellow-100 text-yellow-800'\r\n                    : 'bg-purple-100 text-purple-800'\r\n                }\r\n              >\r\n                {isCantrip ? 'Cantrip' : `Level ${spell.level}`}\r\n              </Badge>\r\n              <Badge variant=\"secondary\" size=\"sm\">\r\n                {spell.school}\r\n              </Badge>\r\n              {spell.ritual && (\r\n                <Badge variant=\"warning\" size=\"sm\">\r\n                  üïØÔ∏è Ritual\r\n                </Badge>\r\n              )}\r\n              {spell.concentration && (\r\n                <Badge variant=\"warning\" size=\"sm\">\r\n                  üß† Concentration\r\n                </Badge>\r\n              )}\r\n              {spell.isPrepared && (\r\n                <Badge variant=\"success\" size=\"sm\">\r\n                  ‚úì Prepared\r\n                </Badge>\r\n              )}\r\n              {spell.isAlwaysPrepared && (\r\n                <Badge variant=\"success\" size=\"sm\">\r\n                  ‚≠ê Always Prepared\r\n                </Badge>\r\n              )}\r\n            </div>\r\n\r\n            {/* Favorite Button */}\r\n            {onToggleFavorite && (\r\n              <Button\r\n                onClick={onToggleFavorite}\r\n                variant={isFavorite ? 'warning' : 'ghost'}\r\n                size=\"sm\"\r\n                leftIcon={\r\n                  <Star size={16} fill={isFavorite ? 'currentColor' : 'none'} />\r\n                }\r\n                className={\r\n                  isFavorite\r\n                    ? 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'\r\n                    : ''\r\n                }\r\n              >\r\n                {isFavorite ? 'Favorited' : 'Add to Favorites'}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"space-y-4\">\r\n        {/* Quick Stats */}\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n            <div className=\"mb-2 flex items-center gap-2\">\r\n              <Clock className=\"h-5 w-5 text-purple-600\" />\r\n              <span className=\"text-sm font-medium text-gray-600\">\r\n                Casting Time\r\n              </span>\r\n            </div>\r\n            <p className=\"font-semibold text-gray-900\">{spell.castingTime}</p>\r\n          </div>\r\n\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n            <div className=\"mb-2 flex items-center gap-2\">\r\n              <Target className=\"h-5 w-5 text-purple-600\" />\r\n              <span className=\"text-sm font-medium text-gray-600\">Range</span>\r\n            </div>\r\n            <p className=\"font-semibold text-gray-900\">{spell.range}</p>\r\n          </div>\r\n\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n            <div className=\"mb-2 flex items-center gap-2\">\r\n              <Zap className=\"h-5 w-5 text-purple-600\" />\r\n              <span className=\"text-sm font-medium text-gray-600\">\r\n                Duration\r\n              </span>\r\n            </div>\r\n            <p className=\"font-semibold text-gray-900\">{spell.duration}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Components */}\r\n        <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n          <h3 className=\"mb-3 flex items-center gap-2 text-lg font-bold text-gray-900\">\r\n            <Sparkles className=\"h-5 w-5 text-purple-600\" />\r\n            Components\r\n          </h3>\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"flex gap-2\">\r\n              {spell.components.verbal && (\r\n                <Badge variant=\"info\" size=\"sm\">\r\n                  V\r\n                </Badge>\r\n              )}\r\n              {spell.components.somatic && (\r\n                <Badge variant=\"success\" size=\"sm\">\r\n                  S\r\n                </Badge>\r\n              )}\r\n              {spell.components.material && (\r\n                <Badge variant=\"primary\" size=\"sm\">\r\n                  M\r\n                </Badge>\r\n              )}\r\n            </div>\r\n            {spell.components.materialDescription && (\r\n              <p className=\"text-sm text-gray-600 italic\">\r\n                ({spell.components.materialDescription})\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Combat Info */}\r\n        {(spell.actionType || spell.damage) && (\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n            <h3 className=\"mb-3 text-lg font-bold text-gray-900\">\r\n              Combat Details\r\n            </h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {spell.actionType === 'attack' && (\r\n                <Badge variant=\"secondary\" size=\"sm\">\r\n                  Spell Attack\r\n                </Badge>\r\n              )}\r\n              {spell.actionType === 'save' && spell.savingThrow && (\r\n                <Badge variant=\"info\" size=\"sm\">\r\n                  {spell.savingThrow} Save\r\n                </Badge>\r\n              )}\r\n              {spell.damage && (\r\n                <Badge variant=\"danger\" size=\"sm\">\r\n                  {spell.damage} {spell.damageType || 'damage'}\r\n                </Badge>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Description */}\r\n        <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n          <h3 className=\"mb-3 text-lg font-bold text-gray-900\">Description</h3>\r\n          <div className=\"prose prose-gray max-w-none\">\r\n            <div\r\n              className=\"leading-relaxed text-gray-700\"\r\n              dangerouslySetInnerHTML={{ __html: spell.description }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Higher Level */}\r\n        {spell.higherLevel && (\r\n          <div className=\"rounded-lg border-2 border-amber-200 bg-amber-50 p-4\">\r\n            <h3 className=\"mb-3 text-lg font-bold text-amber-900\">\r\n              At Higher Levels\r\n            </h3>\r\n            <div\r\n              className=\"leading-relaxed text-amber-800\"\r\n              dangerouslySetInnerHTML={{ __html: spell.higherLevel }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Source */}\r\n        {spell.source && (\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-gray-50 p-4\">\r\n            <h3 className=\"mb-2 text-sm font-bold text-gray-900\">Source</h3>\r\n            <p className=\"text-gray-700\">{spell.source}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"-m-6 mt-6 border-t-2 border-gray-200 bg-gray-50 p-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {onCast ? (\r\n            <Button\r\n              onClick={() => {\r\n                onCast();\r\n                onClose();\r\n              }}\r\n              variant=\"primary\"\r\n              size=\"md\"\r\n              leftIcon={<Wand2 size={16} />}\r\n              className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n            >\r\n              Cast Spell\r\n            </Button>\r\n          ) : (\r\n            <div />\r\n          )}\r\n          <Button onClick={onClose} variant=\"outline\" size=\"md\">\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2021, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/ConditionDetailsModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Book, Calendar, FileText, AlertTriangle, Shield } from 'lucide-react';\r\nimport { ActiveCondition, ActiveDisease } from '@/types/character';\r\nimport { SPELL_SOURCE_BOOKS } from '@/utils/constants';\r\nimport { createSafeHtml } from '@/utils/textFormatting';\r\nimport { Modal } from '@/components/ui/feedback';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Textarea } from '@/components/ui/forms/textarea';\r\nimport { Input } from '@/components/ui/forms/input';\r\n\r\ninterface ConditionDetailsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  condition?: ActiveCondition;\r\n  disease?: ActiveDisease;\r\n  onUpdateNotes?: (notes: string) => void;\r\n  onUpdateOnsetTime?: (onsetTime: string) => void;\r\n}\r\n\r\nexport default function ConditionDetailsModal({\r\n  isOpen,\r\n  onClose,\r\n  condition,\r\n  disease,\r\n  onUpdateNotes,\r\n  onUpdateOnsetTime,\r\n}: ConditionDetailsModalProps) {\r\n  if (!isOpen || (!condition && !disease)) return null;\r\n\r\n  const item = condition || disease;\r\n  const isCondition = !!condition;\r\n  const fullSourceName = SPELL_SOURCE_BOOKS[item!.source] || item!.source;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={item!.name}\r\n      size=\"lg\"\r\n      showCloseButton={true}\r\n      closeOnBackdropClick={true}\r\n    >\r\n      {/* Enhanced Header with Icon and Metadata */}\r\n      <div\r\n        className={`-m-6 mb-6 border-b-2 p-6 ${\r\n          isCondition\r\n            ? 'border-red-200 bg-gradient-to-r from-red-50 to-orange-50'\r\n            : 'border-purple-200 bg-gradient-to-r from-purple-50 to-violet-50'\r\n        }`}\r\n      >\r\n        <div className=\"mb-4 flex items-center gap-3\">\r\n          <div\r\n            className={`flex h-12 w-12 items-center justify-center rounded-lg ${\r\n              isCondition ? 'bg-red-100' : 'bg-purple-100'\r\n            }`}\r\n          >\r\n            {isCondition ? (\r\n              <AlertTriangle className=\"h-6 w-6 text-red-600\" />\r\n            ) : (\r\n              <Shield className=\"h-6 w-6 text-purple-600\" />\r\n            )}\r\n          </div>\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <Badge\r\n              variant={isCondition ? 'danger' : 'primary'}\r\n              size=\"md\"\r\n              className=\"uppercase tracking-wide\"\r\n            >\r\n              {isCondition ? 'Condition' : 'Disease'}\r\n            </Badge>\r\n            {condition?.stackable && condition.count > 1 && (\r\n              <Badge variant=\"warning\" size=\"md\">\r\n                Level {condition.count}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-700\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Book className=\"h-4 w-4 text-gray-500\" />\r\n            <span className=\"font-semibold\">{fullSourceName}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Calendar className=\"h-4 w-4 text-gray-500\" />\r\n            <span>\r\n              Applied: {new Date(item!.appliedAt).toLocaleDateString()}\r\n            </span>\r\n          </div>\r\n          {disease?.onsetTime && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-4 w-4 text-gray-500\" />\r\n              <span>\r\n                Onset: {new Date(disease.onsetTime).toLocaleDateString()}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* Description */}\r\n        <div>\r\n          <h3 className=\"mb-3 text-sm font-bold uppercase tracking-wide text-gray-800 border-b-2 border-gray-200 pb-2\">\r\n            Description\r\n          </h3>\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4\">\r\n            <div\r\n              className=\"whitespace-pre-wrap text-sm leading-relaxed text-gray-800\"\r\n              dangerouslySetInnerHTML={createSafeHtml(item!.description)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Disease-specific fields */}\r\n        {disease && (\r\n          <div>\r\n            <h3 className=\"mb-3 text-sm font-bold uppercase tracking-wide text-gray-800 border-b-2 border-gray-200 pb-2\">\r\n              Onset Time\r\n            </h3>\r\n            <Input\r\n              type=\"datetime-local\"\r\n              value={disease.onsetTime || ''}\r\n              onChange={e => onUpdateOnsetTime?.(e.target.value)}\r\n              helperText=\"When did the symptoms first appear?\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes Section */}\r\n        <div>\r\n          <h3 className=\"mb-3 text-sm font-bold uppercase tracking-wide text-gray-800 border-b-2 border-gray-200 pb-2\">\r\n            Personal Notes\r\n          </h3>\r\n          <Textarea\r\n            placeholder={`Add your notes about this ${isCondition ? 'condition' : 'disease'}...`}\r\n            value={item!.notes || ''}\r\n            onChange={e => onUpdateNotes?.(e.target.value)}\r\n            rows={4}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAVA;;;;;;;;;AAqBe,SAAS,sBAAsB,EAC5C,MAAM,EACN,OAAO,EACP,SAAS,EACT,OAAO,EACP,aAAa,EACb,iBAAiB,EACU;IAC3B,IAAI,CAAC,UAAW,CAAC,aAAa,CAAC,SAAU,OAAO;IAEhD,MAAM,OAAO,aAAa;IAC1B,MAAM,cAAc,CAAC,CAAC;IACtB,MAAM,iBAAiB,8JAAkB,CAAC,KAAM,MAAM,CAAC,IAAI,KAAM,MAAM;IAEvE,qBACE,8OAAC,qKAAK;QACJ,QAAQ;QACR,SAAS;QACT,OAAO,KAAM,IAAI;QACjB,MAAK;QACL,iBAAiB;QACjB,sBAAsB;;0BAGtB,8OAAC;gBACC,WAAW,CAAC,yBAAyB,EACnC,cACI,6DACA,kEACJ;;kCAEF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,WAAW,CAAC,sDAAsD,EAChE,cAAc,eAAe,iBAC7B;0CAED,4BACC,8OAAC,yOAAa;oCAAC,WAAU;;;;;yDAEzB,8OAAC,gNAAM;oCAAC,WAAU;;;;;;;;;;;0CAGtB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,mLAAK;wCACJ,SAAS,cAAc,WAAW;wCAClC,MAAK;wCACL,WAAU;kDAET,cAAc,cAAc;;;;;;oCAE9B,WAAW,aAAa,UAAU,KAAK,GAAG,mBACzC,8OAAC,mLAAK;wCAAC,SAAQ;wCAAU,MAAK;;4CAAK;4CAC1B,UAAU,KAAK;;;;;;;;;;;;;;;;;;;kCAM9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;wCAAK,WAAU;kDAAiB;;;;;;;;;;;;0CAEnC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;;4CAAK;4CACM,IAAI,KAAK,KAAM,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;4BAGzD,SAAS,2BACR,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0NAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;;4CAAK;4CACI,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;0BAOhE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAA+F;;;;;;0CAG7G,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,WAAU;oCACV,yBAAyB,IAAA,+JAAc,EAAC,KAAM,WAAW;;;;;;;;;;;;;;;;;oBAM9D,yBACC,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAA+F;;;;;;0CAG7G,8OAAC,kKAAK;gCACJ,MAAK;gCACL,OAAO,QAAQ,SAAS,IAAI;gCAC5B,UAAU,CAAA,IAAK,oBAAoB,EAAE,MAAM,CAAC,KAAK;gCACjD,YAAW;;;;;;;;;;;;kCAMjB,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAA+F;;;;;;0CAG7G,8OAAC,wKAAQ;gCACP,aAAa,CAAC,0BAA0B,EAAE,cAAc,cAAc,UAAU,GAAG,CAAC;gCACpF,OAAO,KAAM,KAAK,IAAI;gCACtB,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;gCAC7C,MAAM;;;;;;;;;;;;;;;;;;;;;;;;AAMlB","debugId":null}},
    {"offset": {"line": 2317, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/conditions/ConditionCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { ActiveCondition } from '@/types/character';\r\nimport { AlertTriangle, Eye, Minus, Plus, X, Calendar, FileText } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { SPELL_SOURCE_BOOKS } from '@/utils/constants';\r\n\r\ninterface ConditionCardProps {\r\n  condition: ActiveCondition;\r\n  onView: (condition: ActiveCondition) => void;\r\n  onRemove: (id: string) => void;\r\n  onUpdateCount: (id: string, count: number) => void;\r\n}\r\n\r\nexport function ConditionCard({\r\n  condition,\r\n  onView,\r\n  onRemove,\r\n  onUpdateCount,\r\n}: ConditionCardProps) {\r\n  const fullSourceName =\r\n    SPELL_SOURCE_BOOKS[condition.source] || condition.source;\r\n\r\n  return (\r\n    <div className=\"group rounded-lg border-2 border-red-200 bg-white p-4 transition-all hover:shadow-md hover:border-red-300\">\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          {/* Header */}\r\n          <div className=\"mb-2 flex items-center gap-2 flex-wrap\">\r\n            <AlertTriangle className=\"h-4 w-4 shrink-0 text-red-600\" />\r\n            <h4 className=\"font-bold text-gray-800 truncate\">\r\n              {condition.name}\r\n            </h4>\r\n            {condition.stackable && condition.count > 1 && (\r\n              <Badge variant=\"danger\" size=\"sm\">\r\n                Level {condition.count}\r\n              </Badge>\r\n            )}\r\n            {condition.notes && (\r\n              <Badge variant=\"info\" size=\"sm\" leftIcon={<FileText size={12} />}>\r\n                Notes\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Metadata */}\r\n          <div className=\"space-y-1 text-sm\">\r\n            <div className=\"flex items-center gap-2 text-gray-600\">\r\n              <span className=\"font-medium text-gray-700\">{fullSourceName}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 text-gray-500\">\r\n              <Calendar className=\"h-3 w-3\" />\r\n              <span className=\"text-xs\">\r\n                Applied: {new Date(condition.appliedAt).toLocaleDateString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex items-start gap-1\">\r\n          {/* Stackable controls */}\r\n          {condition.stackable && (\r\n            <div className=\"flex items-center gap-1 rounded-lg border-2 border-gray-200 bg-gray-50 p-1\">\r\n              <Button\r\n                onClick={() =>\r\n                  onUpdateCount(condition.id, Math.max(1, condition.count - 1))\r\n                }\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                disabled={condition.count <= 1}\r\n                title=\"Decrease level\"\r\n                className=\"h-6 w-6 p-0 text-red-600 hover:bg-red-100 hover:text-red-800 disabled:opacity-30\"\r\n              >\r\n                <Minus className=\"h-3 w-3\" />\r\n              </Button>\r\n              <span className=\"min-w-[1.5rem] text-center text-sm font-bold text-gray-800\">\r\n                {condition.count}\r\n              </span>\r\n              <Button\r\n                onClick={() =>\r\n                  onUpdateCount(condition.id, Math.min(6, condition.count + 1))\r\n                }\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                disabled={condition.count >= 6}\r\n                title=\"Increase level\"\r\n                className=\"h-6 w-6 p-0 text-red-600 hover:bg-red-100 hover:text-red-800 disabled:opacity-30\"\r\n              >\r\n                <Plus className=\"h-3 w-3\" />\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* View details */}\r\n          <Button\r\n            onClick={() => onView(condition)}\r\n            variant=\"ghost\"\r\n            size=\"xs\"\r\n            title=\"View details\"\r\n            className=\"h-8 w-8 p-0 text-blue-600 hover:bg-blue-50 hover:text-blue-800\"\r\n          >\r\n            <Eye className=\"h-4 w-4\" />\r\n          </Button>\r\n\r\n          {/* Remove */}\r\n          <Button\r\n            onClick={() => onRemove(condition.id)}\r\n            variant=\"ghost\"\r\n            size=\"xs\"\r\n            title=\"Remove condition\"\r\n            className=\"h-8 w-8 p-0 text-red-600 hover:bg-red-100 hover:text-red-800\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;AAgBO,SAAS,cAAc,EAC5B,SAAS,EACT,MAAM,EACN,QAAQ,EACR,aAAa,EACM;IACnB,MAAM,iBACJ,8JAAkB,CAAC,UAAU,MAAM,CAAC,IAAI,UAAU,MAAM;IAE1D,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,yOAAa;oCAAC,WAAU;;;;;;8CACzB,8OAAC;oCAAG,WAAU;8CACX,UAAU,IAAI;;;;;;gCAEhB,UAAU,SAAS,IAAI,UAAU,KAAK,GAAG,mBACxC,8OAAC,mLAAK;oCAAC,SAAQ;oCAAS,MAAK;;wCAAK;wCACzB,UAAU,KAAK;;;;;;;gCAGzB,UAAU,KAAK,kBACd,8OAAC,mLAAK;oCAAC,SAAQ;oCAAO,MAAK;oCAAK,wBAAU,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;8CAAQ;;;;;;;;;;;;sCAOtE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;8CAE/C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sNAAQ;4CAAC,WAAU;;;;;;sDACpB,8OAAC;4CAAK,WAAU;;gDAAU;gDACd,IAAI,KAAK,UAAU,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;8BAOlE,8OAAC;oBAAI,WAAU;;wBAEZ,UAAU,SAAS,kBAClB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oLAAM;oCACL,SAAS,IACP,cAAc,UAAU,EAAE,EAAE,KAAK,GAAG,CAAC,GAAG,UAAU,KAAK,GAAG;oCAE5D,SAAQ;oCACR,MAAK;oCACL,UAAU,UAAU,KAAK,IAAI;oCAC7B,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;8CAEnB,8OAAC;oCAAK,WAAU;8CACb,UAAU,KAAK;;;;;;8CAElB,8OAAC,oLAAM;oCACL,SAAS,IACP,cAAc,UAAU,EAAE,EAAE,KAAK,GAAG,CAAC,GAAG,UAAU,KAAK,GAAG;oCAE5D,SAAQ;oCACR,MAAK;oCACL,UAAU,UAAU,KAAK,IAAI;oCAC7B,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,0MAAI;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAMtB,8OAAC,oLAAM;4BACL,SAAS,IAAM,OAAO;4BACtB,SAAQ;4BACR,MAAK;4BACL,OAAM;4BACN,WAAU;sCAEV,cAAA,8OAAC,uMAAG;gCAAC,WAAU;;;;;;;;;;;sCAIjB,8OAAC,oLAAM;4BACL,SAAS,IAAM,SAAS,UAAU,EAAE;4BACpC,SAAQ;4BACR,MAAK;4BACL,OAAM;4BACN,WAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzB","debugId":null}},
    {"offset": {"line": 2573, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/conditions/DiseaseCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { ActiveDisease } from '@/types/character';\r\nimport { Shield, Eye, X, Calendar, FileText } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { SPELL_SOURCE_BOOKS } from '@/utils/constants';\r\n\r\ninterface DiseaseCardProps {\r\n  disease: ActiveDisease;\r\n  onView: (disease: ActiveDisease) => void;\r\n  onRemove: (id: string) => void;\r\n}\r\n\r\nexport function DiseaseCard({ disease, onView, onRemove }: DiseaseCardProps) {\r\n  const fullSourceName = SPELL_SOURCE_BOOKS[disease.source] || disease.source;\r\n\r\n  return (\r\n    <div className=\"group rounded-lg border-2 border-purple-200 bg-white p-4 transition-all hover:shadow-md hover:border-purple-300\">\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          {/* Header */}\r\n          <div className=\"mb-2 flex items-center gap-2 flex-wrap\">\r\n            <Shield className=\"h-4 w-4 shrink-0 text-purple-600\" />\r\n            <h4 className=\"font-bold text-gray-800 truncate\">{disease.name}</h4>\r\n            {disease.notes && (\r\n              <Badge variant=\"info\" size=\"sm\" leftIcon={<FileText size={12} />}>\r\n                Notes\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Metadata */}\r\n          <div className=\"space-y-1 text-sm\">\r\n            <div className=\"flex items-center gap-2 text-gray-600\">\r\n              <span className=\"font-medium text-gray-700\">{fullSourceName}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 text-gray-500\">\r\n              <Calendar className=\"h-3 w-3\" />\r\n              <span className=\"text-xs\">\r\n                Applied: {new Date(disease.appliedAt).toLocaleDateString()}\r\n              </span>\r\n            </div>\r\n            {disease.onsetTime && (\r\n              <div className=\"flex items-center gap-1.5 text-gray-500\">\r\n                <Calendar className=\"h-3 w-3\" />\r\n                <span className=\"text-xs\">\r\n                  Onset: {new Date(disease.onsetTime).toLocaleDateString()}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex items-start gap-1\">\r\n          {/* View details */}\r\n          <Button\r\n            onClick={() => onView(disease)}\r\n            variant=\"ghost\"\r\n            size=\"xs\"\r\n            title=\"View details\"\r\n            className=\"h-8 w-8 p-0 text-blue-600 hover:bg-blue-50 hover:text-blue-800\"\r\n          >\r\n            <Eye className=\"h-4 w-4\" />\r\n          </Button>\r\n\r\n          {/* Remove */}\r\n          <Button\r\n            onClick={() => onRemove(disease.id)}\r\n            variant=\"ghost\"\r\n            size=\"xs\"\r\n            title=\"Remove disease\"\r\n            className=\"h-8 w-8 p-0 text-purple-600 hover:bg-purple-100 hover:text-purple-800\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;AAeO,SAAS,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAoB;IACzE,MAAM,iBAAiB,8JAAkB,CAAC,QAAQ,MAAM,CAAC,IAAI,QAAQ,MAAM;IAE3E,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gNAAM;oCAAC,WAAU;;;;;;8CAClB,8OAAC;oCAAG,WAAU;8CAAoC,QAAQ,IAAI;;;;;;gCAC7D,QAAQ,KAAK,kBACZ,8OAAC,mLAAK;oCAAC,SAAQ;oCAAO,MAAK;oCAAK,wBAAU,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;8CAAQ;;;;;;;;;;;;sCAOtE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;8CAE/C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sNAAQ;4CAAC,WAAU;;;;;;sDACpB,8OAAC;4CAAK,WAAU;;gDAAU;gDACd,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;gCAG3D,QAAQ,SAAS,kBAChB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sNAAQ;4CAAC,WAAU;;;;;;sDACpB,8OAAC;4CAAK,WAAU;;gDAAU;gDAChB,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;8BAQhE,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC,oLAAM;4BACL,SAAS,IAAM,OAAO;4BACtB,SAAQ;4BACR,MAAK;4BACL,OAAM;4BACN,WAAU;sCAEV,cAAA,8OAAC,uMAAG;gCAAC,WAAU;;;;;;;;;;;sCAIjB,8OAAC,oLAAM;4BACL,SAAS,IAAM,SAAS,QAAQ,EAAE;4BAClC,SAAQ;4BACR,MAAK;4BACL,OAAM;4BACN,WAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzB","debugId":null}},
    {"offset": {"line": 2787, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/conditions/index.ts"],"sourcesContent":["export { ConditionCard } from './ConditionCard';\r\nexport { DiseaseCard } from './DiseaseCard';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 2796, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/ConditionsDiseasesManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Plus,\r\n  Minus,\r\n  AlertTriangle,\r\n  Shield,\r\n  Search,\r\n  Trash2,\r\n  Activity,\r\n} from 'lucide-react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport {\r\n  loadAllConditions,\r\n  loadAllDiseases,\r\n  getExhaustionByVariant,\r\n} from '@/utils/conditionsDiseasesLoader';\r\nimport {\r\n  ProcessedCondition,\r\n  ProcessedDisease,\r\n  ActiveCondition,\r\n  ActiveDisease,\r\n  ExhaustionVariant,\r\n} from '@/types/character';\r\nimport { SPELL_SOURCE_BOOKS } from '@/utils/constants';\r\nimport ConditionDetailsModal from './ConditionDetailsModal';\r\nimport { ConditionCard, DiseaseCard } from './conditions';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\n\r\ntype TabType = 'conditions' | 'diseases';\r\n\r\nexport default function ConditionsDiseasesManager() {\r\n  const {\r\n    character,\r\n    addCondition,\r\n    updateCondition,\r\n    removeCondition,\r\n    addDisease,\r\n    updateDisease,\r\n    removeDisease,\r\n    setExhaustionVariant,\r\n    clearAllConditions,\r\n    clearAllDiseases,\r\n  } = useCharacterStore();\r\n\r\n  const [availableConditions, setAvailableConditions] = useState<\r\n    ProcessedCondition[]\r\n  >([]);\r\n  const [availableDiseases, setAvailableDiseases] = useState<\r\n    ProcessedDisease[]\r\n  >([]);\r\n  const [activeTab, setActiveTab] = useState<TabType>('conditions');\r\n  const [conditionSearch, setConditionSearch] = useState('');\r\n  const [diseaseSearch, setDiseaseSearch] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedCondition, setSelectedCondition] =\r\n    useState<ActiveCondition | null>(null);\r\n  const [selectedDisease, setSelectedDisease] = useState<ActiveDisease | null>(\r\n    null\r\n  );\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [showAddPanel, setShowAddPanel] = useState(false);\r\n\r\n  // Load conditions and diseases data\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const [conditions, diseases] = await Promise.all([\r\n          loadAllConditions(),\r\n          loadAllDiseases(),\r\n        ]);\r\n        setAvailableConditions(conditions);\r\n        setAvailableDiseases(diseases);\r\n      } catch (error) {\r\n        console.error('Failed to load conditions/diseases:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  const { activeConditions, activeDiseases, exhaustionVariant } =\r\n    character.conditionsAndDiseases || {\r\n      activeConditions: [],\r\n      activeDiseases: [],\r\n      exhaustionVariant: '2024' as const,\r\n    };\r\n\r\n  // Filter conditions and diseases based on search\r\n  const filteredConditions = availableConditions.filter(\r\n    condition =>\r\n      condition.name.toLowerCase().includes(conditionSearch.toLowerCase()) ||\r\n      condition.description\r\n        .toLowerCase()\r\n        .includes(conditionSearch.toLowerCase())\r\n  );\r\n\r\n  const filteredDiseases = availableDiseases.filter(\r\n    disease =>\r\n      disease.name.toLowerCase().includes(diseaseSearch.toLowerCase()) ||\r\n      disease.description.toLowerCase().includes(diseaseSearch.toLowerCase())\r\n  );\r\n\r\n  // Get exhaustion level for current variant\r\n  const exhaustionCondition = activeConditions.find(\r\n    c => c.name.toLowerCase() === 'exhaustion'\r\n  );\r\n  const exhaustionLevel = exhaustionCondition?.count || 0;\r\n\r\n  // Modal management\r\n  const openConditionModal = (condition: ActiveCondition) => {\r\n    setSelectedCondition(condition);\r\n    setSelectedDisease(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const openDiseaseModal = (disease: ActiveDisease) => {\r\n    setSelectedDisease(disease);\r\n    setSelectedCondition(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedCondition(null);\r\n    setSelectedDisease(null);\r\n  };\r\n\r\n  const handleUpdateConditionNotes = (notes: string) => {\r\n    if (selectedCondition) {\r\n      updateCondition(selectedCondition.id, { notes });\r\n      setSelectedCondition({ ...selectedCondition, notes });\r\n    }\r\n  };\r\n\r\n  const handleUpdateDiseaseNotes = (notes: string) => {\r\n    if (selectedDisease) {\r\n      updateDisease(selectedDisease.id, { notes });\r\n      setSelectedDisease({ ...selectedDisease, notes });\r\n    }\r\n  };\r\n\r\n  const handleUpdateDiseaseOnsetTime = (onsetTime: string) => {\r\n    if (selectedDisease) {\r\n      updateDisease(selectedDisease.id, { onsetTime });\r\n      setSelectedDisease({ ...selectedDisease, onsetTime });\r\n    }\r\n  };\r\n\r\n  const handleAddCondition = (condition: ProcessedCondition) => {\r\n    // For exhaustion, check if we already have it and update count instead\r\n    if (condition.isExhaustion) {\r\n      const existing = activeConditions.find(\r\n        c => c.name.toLowerCase() === 'exhaustion'\r\n      );\r\n      if (existing) {\r\n        updateCondition(existing.id, {\r\n          count: Math.min(existing.count + 1, 6),\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    addCondition(\r\n      condition.name,\r\n      condition.source,\r\n      condition.description,\r\n      condition.stackable ? 1 : 1\r\n    );\r\n    setShowAddPanel(false);\r\n    setConditionSearch('');\r\n  };\r\n\r\n  const handleExhaustionChange = (delta: number) => {\r\n    const existing = activeConditions.find(\r\n      c => c.name.toLowerCase() === 'exhaustion'\r\n    );\r\n\r\n    if (!existing && delta > 0) {\r\n      // Add exhaustion if it doesn't exist\r\n      getExhaustionByVariant(exhaustionVariant).then(exhaustionData => {\r\n        if (exhaustionData) {\r\n          addCondition(\r\n            exhaustionData.name,\r\n            exhaustionData.source,\r\n            exhaustionData.description,\r\n            1\r\n          );\r\n        }\r\n      });\r\n    } else if (existing) {\r\n      const newCount = Math.max(0, Math.min(6, existing.count + delta));\r\n      if (newCount === 0) {\r\n        removeCondition(existing.id);\r\n      } else {\r\n        updateCondition(existing.id, { count: newCount });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAddDisease = (disease: ProcessedDisease) => {\r\n    addDisease(disease.name, disease.source, disease.description);\r\n    setShowAddPanel(false);\r\n    setDiseaseSearch('');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"rounded-lg border-2 border-gray-200 bg-white p-6 shadow-sm\">\r\n        <div className=\"flex flex-col items-center justify-center py-12\">\r\n          <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600 font-medium\">\r\n            Loading conditions and diseases...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-lg border-2 border-gray-200 bg-white shadow-sm\">\r\n      {/* Header */}\r\n      <div className=\"border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"flex items-center gap-2 text-xl font-bold text-gray-800\">\r\n            <Activity className=\"h-6 w-6 text-red-600\" />\r\n            Conditions & Diseases\r\n          </h3>\r\n          <div className=\"flex items-center gap-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              Exhaustion Rules:\r\n            </label>\r\n            <SelectField\r\n              value={exhaustionVariant}\r\n              onValueChange={value =>\r\n                setExhaustionVariant(value as ExhaustionVariant)\r\n              }\r\n            >\r\n              <SelectItem value=\"2014\">2014 PHB</SelectItem>\r\n              <SelectItem value=\"2024\">2024 PHB</SelectItem>\r\n            </SelectField>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Exhaustion Quick Controls */}\r\n        <div className=\"rounded-lg border-2 border-red-200 bg-gradient-to-r from-red-50 to-orange-50 p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n              <div>\r\n                <h4 className=\"font-bold text-red-800\">Exhaustion Level</h4>\r\n                <p className=\"text-xs text-red-700\">\r\n                  Using {exhaustionVariant === '2014' ? '2014' : '2024'} rules\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                onClick={() => handleExhaustionChange(-1)}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                disabled={exhaustionLevel === 0}\r\n                className=\"text-red-600 hover:bg-red-100 hover:text-red-800 disabled:opacity-30\"\r\n              >\r\n                <Minus className=\"h-4 w-4\" />\r\n              </Button>\r\n              <div className=\"min-w-[4rem] text-center\">\r\n                <div className=\"text-2xl font-bold text-gray-800\">\r\n                  {exhaustionLevel}\r\n                </div>\r\n                <div className=\"text-xs text-gray-600\">/ 6</div>\r\n              </div>\r\n              <Button\r\n                onClick={() => handleExhaustionChange(1)}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                disabled={exhaustionLevel >= 6}\r\n                className=\"text-red-600 hover:bg-red-100 hover:text-red-800 disabled:opacity-30\"\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          {exhaustionLevel > 0 && (\r\n            <Badge\r\n              variant={exhaustionLevel >= 6 ? 'danger' : 'warning'}\r\n              size=\"md\"\r\n              className=\"mt-3\"\r\n            >\r\n              {exhaustionLevel === 6\r\n                ? '‚ò†Ô∏è Death!'\r\n                : `Level ${exhaustionLevel} Effects Active`}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b-2 border-gray-200 bg-gray-50 px-6\">\r\n        <div className=\"flex gap-1\">\r\n          <button\r\n            onClick={() => {\r\n              setActiveTab('conditions');\r\n              setShowAddPanel(false);\r\n            }}\r\n            className={`flex items-center gap-2 px-6 py-3 font-semibold transition-all ${\r\n              activeTab === 'conditions'\r\n                ? 'border-b-4 border-red-600 text-red-700 bg-white'\r\n                : 'text-gray-600 hover:text-red-600 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            <AlertTriangle className=\"h-4 w-4\" />\r\n            Conditions\r\n            <Badge variant={activeTab === 'conditions' ? 'danger' : 'secondary'} size=\"sm\">\r\n              {activeConditions.length}\r\n            </Badge>\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              setActiveTab('diseases');\r\n              setShowAddPanel(false);\r\n            }}\r\n            className={`flex items-center gap-2 px-6 py-3 font-semibold transition-all ${\r\n              activeTab === 'diseases'\r\n                ? 'border-b-4 border-purple-600 text-purple-700 bg-white'\r\n                : 'text-gray-600 hover:text-purple-600 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            <Shield className=\"h-4 w-4\" />\r\n            Diseases\r\n            <Badge variant={activeTab === 'diseases' ? 'primary' : 'secondary'} size=\"sm\">\r\n              {activeDiseases.length}\r\n            </Badge>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"p-6\">\r\n        {activeTab === 'conditions' ? (\r\n          <div className=\"space-y-4\">\r\n            {/* Active Conditions Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"text-lg font-bold text-gray-800\">\r\n                Active Conditions\r\n              </h4>\r\n              <div className=\"flex gap-2\">\r\n                {activeConditions.length > 0 && (\r\n                  <Button\r\n                    onClick={clearAllConditions}\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    leftIcon={<Trash2 className=\"h-4 w-4\" />}\r\n                    className=\"text-red-600 hover:bg-red-50 hover:text-red-800\"\r\n                  >\r\n                    Clear All\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={() => setShowAddPanel(!showAddPanel)}\r\n                  variant={showAddPanel ? 'outline' : 'primary'}\r\n                  size=\"sm\"\r\n                  leftIcon={<Plus className=\"h-4 w-4\" />}\r\n                  className={\r\n                    showAddPanel\r\n                      ? ''\r\n                      : 'bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700'\r\n                  }\r\n                >\r\n                  {showAddPanel ? 'Cancel' : 'Add Condition'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Add Condition Panel */}\r\n            {showAddPanel && (\r\n              <div className=\"rounded-lg border-2 border-red-200 bg-gradient-to-r from-red-50 to-orange-50 p-4\">\r\n                <h5 className=\"mb-3 font-bold text-red-800\">\r\n                  Add New Condition\r\n                </h5>\r\n                <Input\r\n                  leftIcon={<Search className=\"h-4 w-4\" />}\r\n                  placeholder=\"Search conditions by name or description...\"\r\n                  value={conditionSearch}\r\n                  onChange={e => setConditionSearch(e.target.value)}\r\n                  className=\"mb-3\"\r\n                />\r\n                <div className=\"max-h-64 space-y-2 overflow-y-auto\">\r\n                  {filteredConditions.map(condition => {\r\n                    const fullSourceName =\r\n                      SPELL_SOURCE_BOOKS[condition.source] || condition.source;\r\n                    return (\r\n                      <button\r\n                        key={condition.id}\r\n                        onClick={() => handleAddCondition(condition)}\r\n                        className=\"w-full rounded-lg border-2 border-white bg-white p-3 text-left transition-all hover:border-red-200 hover:shadow-md\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between gap-2\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"font-semibold text-gray-800\">\r\n                              {condition.name}\r\n                            </div>\r\n                            <div className=\"mt-1 flex items-center gap-2 text-xs text-gray-600\">\r\n                              <span>{fullSourceName}</span>\r\n                              {condition.variant && (\r\n                                <Badge variant=\"info\" size=\"sm\">\r\n                                  {condition.variant === '2014'\r\n                                    ? '2014 PHB'\r\n                                    : '2024 PHB'}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <Plus className=\"h-5 w-5 text-red-600\" />\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                  {filteredConditions.length === 0 && conditionSearch && (\r\n                    <p className=\"py-8 text-center text-gray-500\">\r\n                      No conditions found matching &quot;{conditionSearch}&quot;\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Active Conditions List */}\r\n            <div className=\"space-y-3\">\r\n              {activeConditions.map(condition => (\r\n                <ConditionCard\r\n                  key={condition.id}\r\n                  condition={condition}\r\n                  onView={openConditionModal}\r\n                  onRemove={removeCondition}\r\n                  onUpdateCount={(id, count) =>\r\n                    updateCondition(id, { count })\r\n                  }\r\n                />\r\n              ))}\r\n              {activeConditions.length === 0 && (\r\n                <div className=\"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 text-center\">\r\n                  <AlertTriangle className=\"mx-auto mb-3 h-12 w-12 text-gray-300\" />\r\n                  <p className=\"text-gray-600 font-medium\">\r\n                    No active conditions\r\n                  </p>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">\r\n                    Click &quot;Add Condition&quot; to get started\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Active Diseases Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"text-lg font-bold text-gray-800\">\r\n                Active Diseases\r\n              </h4>\r\n              <div className=\"flex gap-2\">\r\n                {activeDiseases.length > 0 && (\r\n                  <Button\r\n                    onClick={clearAllDiseases}\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    leftIcon={<Trash2 className=\"h-4 w-4\" />}\r\n                    className=\"text-purple-600 hover:bg-purple-50 hover:text-purple-800\"\r\n                  >\r\n                    Clear All\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={() => setShowAddPanel(!showAddPanel)}\r\n                  variant={showAddPanel ? 'outline' : 'primary'}\r\n                  size=\"sm\"\r\n                  leftIcon={<Plus className=\"h-4 w-4\" />}\r\n                  className={\r\n                    showAddPanel\r\n                      ? ''\r\n                      : 'bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700'\r\n                  }\r\n                >\r\n                  {showAddPanel ? 'Cancel' : 'Add Disease'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Add Disease Panel */}\r\n            {showAddPanel && (\r\n              <div className=\"rounded-lg border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-violet-50 p-4\">\r\n                <h5 className=\"mb-3 font-bold text-purple-800\">\r\n                  Add New Disease\r\n                </h5>\r\n                <Input\r\n                  leftIcon={<Search className=\"h-4 w-4\" />}\r\n                  placeholder=\"Search diseases by name or description...\"\r\n                  value={diseaseSearch}\r\n                  onChange={e => setDiseaseSearch(e.target.value)}\r\n                  className=\"mb-3\"\r\n                />\r\n                <div className=\"max-h-64 space-y-2 overflow-y-auto\">\r\n                  {filteredDiseases.map(disease => {\r\n                    const fullSourceName =\r\n                      SPELL_SOURCE_BOOKS[disease.source] || disease.source;\r\n                    return (\r\n                      <button\r\n                        key={disease.id}\r\n                        onClick={() => handleAddDisease(disease)}\r\n                        className=\"w-full rounded-lg border-2 border-white bg-white p-3 text-left transition-all hover:border-purple-200 hover:shadow-md\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between gap-2\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"font-semibold text-gray-800\">\r\n                              {disease.name}\r\n                            </div>\r\n                            <div className=\"mt-1 text-xs text-gray-600\">\r\n                              {fullSourceName}\r\n                              {disease.type && (\r\n                                <span className=\"font-medium text-purple-700\">\r\n                                  {' '}\r\n                                  ‚Ä¢ {disease.type}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <Plus className=\"h-5 w-5 text-purple-600\" />\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                  {filteredDiseases.length === 0 && diseaseSearch && (\r\n                    <p className=\"py-8 text-center text-gray-500\">\r\n                      No diseases found matching &quot;{diseaseSearch}&quot;\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Active Diseases List */}\r\n            <div className=\"space-y-3\">\r\n              {activeDiseases.map(disease => (\r\n                <DiseaseCard\r\n                  key={disease.id}\r\n                  disease={disease}\r\n                  onView={openDiseaseModal}\r\n                  onRemove={removeDisease}\r\n                />\r\n              ))}\r\n              {activeDiseases.length === 0 && (\r\n                <div className=\"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 text-center\">\r\n                  <Shield className=\"mx-auto mb-3 h-12 w-12 text-gray-300\" />\r\n                  <p className=\"text-gray-600 font-medium\">No active diseases</p>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">\r\n                    Click &quot;Add Disease&quot; to get started\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Details Modal */}\r\n      <ConditionDetailsModal\r\n        isOpen={isModalOpen}\r\n        onClose={closeModal}\r\n        condition={selectedCondition || undefined}\r\n        disease={selectedDisease || undefined}\r\n        onUpdateNotes={\r\n          selectedCondition\r\n            ? handleUpdateConditionNotes\r\n            : handleUpdateDiseaseNotes\r\n        }\r\n        onUpdateOnsetTime={handleUpdateDiseaseOnsetTime}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3815, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/CurrencyManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { CurrencyManager as SharedCurrencyManager } from '@/components/shared/character';\r\n\r\nexport default function CurrencyManager() {\r\n  const { character, addCurrency, subtractCurrency } = useCharacterStore();\r\n\r\n  // Use the shared CurrencyManager component with full functionality\r\n  return (\r\n    <SharedCurrencyManager\r\n      currency={character.currency}\r\n      onAddCurrency={addCurrency}\r\n      onSubtractCurrency={subtractCurrency}\r\n      readonly={false}\r\n      compact={false}\r\n      hideControls={false}\r\n      hideConversionInfo={false}\r\n      showOnlyTotal={false}\r\n      hideIndividualCurrencies={false}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAJA;;;;AAMe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,gBAAgB,EAAE,GAAG,IAAA,kKAAiB;IAEtE,mEAAmE;IACnE,qBACE,8OAAC,8LAAqB;QACpB,UAAU,UAAU,QAAQ;QAC5B,eAAe;QACf,oBAAoB;QACpB,UAAU;QACV,SAAS;QACT,cAAc;QACd,oBAAoB;QACpB,eAAe;QACf,0BAA0B;;;;;;AAGhC","debugId":null}},
    {"offset": {"line": 3850, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/DiceButton.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useSimpleDiceRoll } from '@/hooks/useSimpleDiceRoll';\r\nimport { RollSummary } from '@/types/dice';\r\n\r\nexport interface DiceButtonProps {\r\n  notation: string;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  onRollComplete?: (summary: RollSummary) => void;\r\n  onError?: (error: string) => void;\r\n  showDiceIcon?: boolean;\r\n  variant?: 'primary' | 'secondary' | 'success' | 'warning' | 'danger';\r\n}\r\n\r\nconst variantStyles = {\r\n  primary: 'bg-blue-500 hover:bg-blue-600 text-white',\r\n  secondary: 'bg-gray-500 hover:bg-gray-600 text-white',\r\n  success: 'bg-green-500 hover:bg-green-600 text-white',\r\n  warning: 'bg-yellow-500 hover:bg-yellow-600 text-white',\r\n  danger: 'bg-red-500 hover:bg-red-600 text-white',\r\n};\r\n\r\n/**\r\n * A simple button that rolls dice when clicked\r\n * Perfect for integrating dice rolls into existing UI elements\r\n */\r\nexport function DiceButton({\r\n  notation,\r\n  children,\r\n  className = '',\r\n  disabled = false,\r\n  onRollComplete,\r\n  onError,\r\n  showDiceIcon = true,\r\n  variant = 'primary',\r\n}: DiceButtonProps) {\r\n  const { isReady, isRolling, roll } = useSimpleDiceRoll({\r\n    onRollComplete,\r\n    onError,\r\n  });\r\n\r\n  const handleClick = async () => {\r\n    if (isReady && !isRolling && !disabled) {\r\n      await roll(notation);\r\n    }\r\n  };\r\n\r\n  const baseStyles =\r\n    'px-3 py-2 rounded transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed';\r\n  const variantStyle = variantStyles[variant];\r\n  const loadingStyle = isRolling ? 'opacity-75 cursor-wait' : '';\r\n\r\n  return (\r\n    <button\r\n      onClick={handleClick}\r\n      disabled={!isReady || isRolling || disabled}\r\n      className={`${baseStyles} ${variantStyle} ${loadingStyle} ${className}`}\r\n      title={\r\n        !isReady\r\n          ? 'Dice system initializing...'\r\n          : isRolling\r\n            ? 'Rolling dice...'\r\n            : `Roll ${notation}`\r\n      }\r\n    >\r\n      {showDiceIcon && <span className=\"mr-1\">{isRolling ? '‚è≥' : 'üé≤'}</span>}\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAcA,MAAM,gBAAgB;IACpB,SAAS;IACT,WAAW;IACX,SAAS;IACT,SAAS;IACT,QAAQ;AACV;AAMO,SAAS,WAAW,EACzB,QAAQ,EACR,QAAQ,EACR,YAAY,EAAE,EACd,WAAW,KAAK,EAChB,cAAc,EACd,OAAO,EACP,eAAe,IAAI,EACnB,UAAU,SAAS,EACH;IAChB,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,IAAA,qKAAiB,EAAC;QACrD;QACA;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,WAAW,CAAC,aAAa,CAAC,UAAU;YACtC,MAAM,KAAK;QACb;IACF;IAEA,MAAM,aACJ;IACF,MAAM,eAAe,aAAa,CAAC,QAAQ;IAC3C,MAAM,eAAe,YAAY,2BAA2B;IAE5D,qBACE,8OAAC;QACC,SAAS;QACT,UAAU,CAAC,WAAW,aAAa;QACnC,WAAW,GAAG,WAAW,CAAC,EAAE,aAAa,CAAC,EAAE,aAAa,CAAC,EAAE,WAAW;QACvE,OACE,CAAC,UACG,gCACA,YACE,oBACA,CAAC,KAAK,EAAE,UAAU;;YAGzB,8BAAgB,8OAAC;gBAAK,WAAU;0BAAQ,YAAY,MAAM;;;;;;YAC1D;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 3904, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/DiceResultDisplay.tsx"],"sourcesContent":["import React from 'react';\r\nimport { RollSummary } from '@/types/dice';\r\nimport {\r\n  formatDiceResults,\r\n  getRollResultColor,\r\n  hasCriticalSuccess,\r\n  hasCriticalFailure,\r\n} from '@/utils/diceUtils';\r\n\r\ninterface DiceResultDisplayProps {\r\n  rollHistory: RollSummary[];\r\n  onClearHistory: () => void;\r\n  maxResults?: number;\r\n}\r\n\r\nexport function DiceResultDisplay({\r\n  rollHistory,\r\n  onClearHistory,\r\n  maxResults = 10,\r\n}: DiceResultDisplayProps) {\r\n  const recentRolls = rollHistory.slice(-maxResults).reverse();\r\n\r\n  if (recentRolls.length === 0) {\r\n    return (\r\n      <div className=\"rounded-lg border bg-white p-4 shadow\">\r\n        <h3 className=\"mb-2 text-lg font-bold text-gray-900\">\r\n          Dice Roll Results\r\n        </h3>\r\n        <p className=\"text-sm text-gray-500 italic\">\r\n          No rolls yet. Start rolling some dice!\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-lg border bg-white p-4 shadow\">\r\n      <div className=\"mb-4 flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-bold text-gray-900\">Dice Roll Results</h3>\r\n        <button\r\n          onClick={onClearHistory}\r\n          className=\"rounded bg-gray-500 px-3 py-1 text-sm text-white transition-colors hover:bg-gray-600\"\r\n        >\r\n          Clear History\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"max-h-96 space-y-3 overflow-y-auto\">\r\n        {recentRolls.map(roll => (\r\n          <DiceResultItem key={roll.rollId} summary={roll} />\r\n        ))}\r\n      </div>\r\n\r\n      {rollHistory.length > maxResults && (\r\n        <p className=\"mt-2 text-center text-xs text-gray-500\">\r\n          Showing last {maxResults} of {rollHistory.length} rolls\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface DiceResultItemProps {\r\n  summary: RollSummary;\r\n}\r\n\r\nfunction DiceResultItem({ summary }: DiceResultItemProps) {\r\n  const resultColor = getRollResultColor(summary);\r\n  const isCritSuccess = hasCriticalSuccess(summary.diceResults);\r\n  const isCritFailure = hasCriticalFailure(summary.diceResults);\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg border-l-4 p-3 ${\r\n        isCritSuccess\r\n          ? 'border-green-500 bg-green-50'\r\n          : isCritFailure\r\n            ? 'border-red-500 bg-red-50'\r\n            : 'border-gray-300 bg-gray-50'\r\n      }`}\r\n    >\r\n      {/* Main result */}\r\n      <div className={`font-mono text-sm ${resultColor}`}>\r\n        {formatDiceResults(summary)}\r\n      </div>\r\n\r\n      {/* Individual dice breakdown */}\r\n      <div className=\"mt-2 flex flex-wrap gap-1\">\r\n        {summary.diceResults.map((die, index) => (\r\n          <span\r\n            key={index}\r\n            className={`inline-flex items-center rounded px-2 py-1 text-xs font-semibold ${\r\n              die.value === die.sides\r\n                ? 'bg-green-200 text-green-800'\r\n                : die.value === 1\r\n                  ? 'bg-red-200 text-red-800'\r\n                  : 'bg-gray-200 text-gray-700'\r\n            }`}\r\n            title={`${die.dieType}: rolled ${die.value}`}\r\n          >\r\n            {die.dieType}: {die.value}\r\n            {die.value === die.sides && ' üéâ'}\r\n            {die.value === 1 && ' üí•'}\r\n          </span>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Timestamp */}\r\n      <div className=\"mt-1 text-xs text-gray-500\">\r\n        {summary.rollTime.toLocaleTimeString()}\r\n      </div>\r\n\r\n      {/* Critical indicators */}\r\n      {isCritSuccess && (\r\n        <div className=\"mt-1 text-xs font-semibold text-green-600\">\r\n          üéâ Critical Success!\r\n        </div>\r\n      )}\r\n      {isCritFailure && (\r\n        <div className=\"mt-1 text-xs font-semibold text-red-600\">\r\n          üí• Critical Failure!\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAaO,SAAS,kBAAkB,EAChC,WAAW,EACX,cAAc,EACd,aAAa,EAAE,EACQ;IACvB,MAAM,cAAc,YAAY,KAAK,CAAC,CAAC,YAAY,OAAO;IAE1D,IAAI,YAAY,MAAM,KAAK,GAAG;QAC5B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAuC;;;;;;8BAGrD,8OAAC;oBAAE,WAAU;8BAA+B;;;;;;;;;;;;IAKlD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAA,qBACf,8OAAC;wBAAiC,SAAS;uBAAtB,KAAK,MAAM;;;;;;;;;;YAInC,YAAY,MAAM,GAAG,4BACpB,8OAAC;gBAAE,WAAU;;oBAAyC;oBACtC;oBAAW;oBAAK,YAAY,MAAM;oBAAC;;;;;;;;;;;;;AAK3D;AAMA,SAAS,eAAe,EAAE,OAAO,EAAuB;IACtD,MAAM,cAAc,IAAA,8JAAkB,EAAC;IACvC,MAAM,gBAAgB,IAAA,8JAAkB,EAAC,QAAQ,WAAW;IAC5D,MAAM,gBAAgB,IAAA,8JAAkB,EAAC,QAAQ,WAAW;IAE5D,qBACE,8OAAC;QACC,WAAW,CAAC,0BAA0B,EACpC,gBACI,iCACA,gBACE,6BACA,8BACN;;0BAGF,8OAAC;gBAAI,WAAW,CAAC,kBAAkB,EAAE,aAAa;0BAC/C,IAAA,6JAAiB,EAAC;;;;;;0BAIrB,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,WAAW,CAAC,GAAG,CAAC,CAAC,KAAK,sBAC7B,8OAAC;wBAEC,WAAW,CAAC,iEAAiE,EAC3E,IAAI,KAAK,KAAK,IAAI,KAAK,GACnB,gCACA,IAAI,KAAK,KAAK,IACZ,4BACA,6BACN;wBACF,OAAO,GAAG,IAAI,OAAO,CAAC,SAAS,EAAE,IAAI,KAAK,EAAE;;4BAE3C,IAAI,OAAO;4BAAC;4BAAG,IAAI,KAAK;4BACxB,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;4BAC3B,IAAI,KAAK,KAAK,KAAK;;uBAZf;;;;;;;;;;0BAkBX,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,QAAQ,CAAC,kBAAkB;;;;;;YAIrC,+BACC,8OAAC;gBAAI,WAAU;0BAA4C;;;;;;YAI5D,+BACC,8OAAC;gBAAI,WAAU;0BAA0C;;;;;;;;;;;;AAMjE","debugId":null}},
    {"offset": {"line": 4077, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/DiceRoller.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useDiceRoller, UseDiceRollerOptions } from '@/hooks/useDiceRoller';\r\nimport { DiceResultDisplay } from './DiceResultDisplay';\r\nimport { RollSummary } from '@/types/dice';\r\n\r\nexport interface DiceRollerProps\r\n  extends Omit<UseDiceRollerOptions, 'containerId'> {\r\n  containerId?: string;\r\n  showControls?: boolean;\r\n  showHistory?: boolean;\r\n  showQuickButtons?: boolean;\r\n  showCustomInput?: boolean;\r\n  showAutoClearControl?: boolean;\r\n  maxHistoryResults?: number;\r\n  quickButtons?: Array<{\r\n    label: string;\r\n    notation: string;\r\n    color?: string;\r\n  }>;\r\n  className?: string;\r\n  onRollResult?: (summary: RollSummary) => void;\r\n}\r\n\r\nexport function DiceRoller({\r\n  containerId = 'dice-roller-container',\r\n  showControls = true,\r\n  showHistory = true,\r\n  showQuickButtons = true,\r\n  showCustomInput = true,\r\n  showAutoClearControl = true,\r\n  maxHistoryResults = 10,\r\n  quickButtons = [\r\n    { label: '1d20', notation: '1d20', color: 'bg-blue-500 hover:bg-blue-600' },\r\n    { label: '2d6', notation: '2d6', color: 'bg-green-500 hover:bg-green-600' },\r\n    {\r\n      label: '1d12',\r\n      notation: '1d12',\r\n      color: 'bg-purple-500 hover:bg-purple-600',\r\n    },\r\n    { label: '4d6', notation: '4d6', color: 'bg-red-500 hover:bg-red-600' },\r\n  ],\r\n  className = '',\r\n  onRollResult,\r\n  ...diceOptions\r\n}: DiceRollerProps) {\r\n  const [customNotation, setCustomNotation] = useState('');\r\n  const [logs, setLogs] = useState<string[]>([]);\r\n\r\n  const addLog = (message: string) => {\r\n    setLogs(prev => [\r\n      ...prev.slice(-9),\r\n      `${new Date().toLocaleTimeString()}: ${message}`,\r\n    ]);\r\n  };\r\n\r\n  const handleRollComplete = (summary: RollSummary) => {\r\n    if (onRollResult) {\r\n      onRollResult(summary);\r\n    }\r\n  };\r\n\r\n  const {\r\n    isInitialized,\r\n    isRolling,\r\n    rollHistory,\r\n    roll,\r\n    clearDice,\r\n    clearHistory,\r\n    setAutoClearDelay,\r\n    autoClearDelay,\r\n  } = useDiceRoller({\r\n    containerId,\r\n    onRollComplete: handleRollComplete,\r\n    onError: addLog,\r\n    onLog: addLog,\r\n    ...diceOptions,\r\n  });\r\n\r\n  const handleCustomRoll = () => {\r\n    if (customNotation.trim()) {\r\n      roll(customNotation.trim());\r\n      setCustomNotation('');\r\n    }\r\n  };\r\n\r\n  const clearLogs = () => {\r\n    setLogs([]);\r\n  };\r\n\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      {/* Dice Container */}\r\n      <div\r\n        id={containerId}\r\n        className=\"pointer-events-none fixed inset-0\"\r\n        style={{\r\n          width: '100vw',\r\n          height: '100vh',\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 9999,\r\n          position: 'fixed',\r\n        }}\r\n      />\r\n      <style jsx global>{`\r\n        #${containerId} {\r\n          position: fixed;\r\n          inset: 0;\r\n          width: 100vw;\r\n          height: 100vh;\r\n        }\r\n        #${containerId} canvas,\r\n        #${containerId} > div,\r\n        #${containerId} > canvas {\r\n          position: absolute !important;\r\n          top: 0 !important;\r\n          left: 0 !important;\r\n          width: 100% !important;\r\n          height: 100% !important;\r\n          max-width: 100% !important;\r\n          max-height: 100% !important;\r\n          display: block !important;\r\n        }\r\n      `}</style>\r\n\r\n      {/* Status */}\r\n      {showControls && (\r\n        <div className=\"rounded-lg border bg-white p-4 shadow\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h3 className=\"text-lg font-bold text-gray-900\">Dice Roller</h3>\r\n            <div\r\n              className={`flex items-center gap-2 ${isInitialized ? 'text-green-600' : 'text-yellow-600'}`}\r\n            >\r\n              <div\r\n                className={`h-3 w-3 rounded-full ${isInitialized ? 'bg-green-500' : 'bg-yellow-500'}`}\r\n              ></div>\r\n              <span className=\"text-sm\">\r\n                {isRolling\r\n                  ? 'Rolling...'\r\n                  : isInitialized\r\n                    ? 'Ready'\r\n                    : 'Initializing...'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Clear Controls */}\r\n          <div className=\"mb-4 flex gap-2\">\r\n            <button\r\n              onClick={clearDice}\r\n              disabled={!isInitialized}\r\n              className=\"rounded bg-red-500 px-4 py-2 text-white transition-colors hover:bg-red-600 disabled:bg-gray-300\"\r\n            >\r\n              üßπ Clear Dice\r\n            </button>\r\n            {showHistory && (\r\n              <button\r\n                onClick={clearHistory}\r\n                disabled={rollHistory.length === 0}\r\n                className=\"rounded bg-gray-500 px-4 py-2 text-white transition-colors hover:bg-gray-600 disabled:bg-gray-300\"\r\n              >\r\n                Clear History\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Auto-clear control */}\r\n          {showAutoClearControl && (\r\n            <div className=\"mb-4 flex items-center gap-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">\r\n                Auto-clear:\r\n              </label>\r\n              <select\r\n                value={autoClearDelay}\r\n                onChange={e => setAutoClearDelay(Number(e.target.value))}\r\n                className=\"rounded border border-gray-300 px-2 py-1 text-sm\"\r\n              >\r\n                <option value={0}>Disabled</option>\r\n                <option value={2000}>2 seconds</option>\r\n                <option value={3000}>3 seconds</option>\r\n                <option value={5000}>5 seconds</option>\r\n                <option value={10000}>10 seconds</option>\r\n              </select>\r\n            </div>\r\n          )}\r\n\r\n          {/* Quick Buttons */}\r\n          {showQuickButtons && (\r\n            <div>\r\n              <h4 className=\"mb-2 text-sm font-medium text-gray-700\">\r\n                Quick Rolls\r\n              </h4>\r\n              <div className=\"mb-4 grid grid-cols-2 gap-2 sm:grid-cols-4\">\r\n                {quickButtons.map((button, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => roll(button.notation)}\r\n                    disabled={!isInitialized || isRolling}\r\n                    className={`rounded px-3 py-2 text-white transition-colors disabled:bg-gray-300 ${\r\n                      button.color || 'bg-blue-500 hover:bg-blue-600'\r\n                    }`}\r\n                  >\r\n                    {button.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Custom Input */}\r\n          {showCustomInput && (\r\n            <div>\r\n              <h4 className=\"mb-2 text-sm font-medium text-gray-700\">\r\n                Custom Roll\r\n              </h4>\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={customNotation}\r\n                  onChange={e => setCustomNotation(e.target.value)}\r\n                  placeholder=\"e.g., 3d8+2\"\r\n                  className=\"flex-1 rounded border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none\"\r\n                  onKeyDown={e => {\r\n                    if (e.key === 'Enter') {\r\n                      handleCustomRoll();\r\n                    }\r\n                  }}\r\n                  disabled={!isInitialized || isRolling}\r\n                />\r\n                <button\r\n                  onClick={handleCustomRoll}\r\n                  disabled={\r\n                    !isInitialized || isRolling || !customNotation.trim()\r\n                  }\r\n                  className=\"rounded bg-orange-500 px-4 py-2 text-white transition-colors hover:bg-orange-600 disabled:bg-gray-300\"\r\n                >\r\n                  Roll\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Display */}\r\n      {showHistory && (\r\n        <DiceResultDisplay\r\n          rollHistory={rollHistory}\r\n          onClearHistory={clearHistory}\r\n          maxResults={maxHistoryResults}\r\n        />\r\n      )}\r\n\r\n      {/* Debug Logs (minimal) */}\r\n      {logs.length > 0 && (\r\n        <details className=\"rounded bg-gray-50 p-2\">\r\n          <summary className=\"cursor-pointer text-sm font-medium text-gray-700\">\r\n            Debug Logs ({logs.length})\r\n          </summary>\r\n          <div className=\"mt-2 max-h-32 space-y-1 overflow-y-auto\">\r\n            {logs.map((log, index) => (\r\n              <div key={index} className=\"font-mono text-xs text-gray-600\">\r\n                {log}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <button\r\n            onClick={clearLogs}\r\n            className=\"mt-2 rounded bg-gray-500 px-2 py-1 text-xs text-white hover:bg-gray-600\"\r\n          >\r\n            Clear Logs\r\n          </button>\r\n        </details>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4805, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/equipment/WeaponCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Weapon } from '@/types/character';\r\nimport { Edit2, Trash2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\n\r\ninterface WeaponCardProps {\r\n  weapon: Weapon;\r\n  onEdit: (weapon: Weapon) => void;\r\n  onDelete: (id: string) => void;\r\n  onToggleEquip: (id: string, equipped: boolean) => void;\r\n}\r\n\r\nexport function WeaponCard({\r\n  weapon,\r\n  onEdit,\r\n  onDelete,\r\n  onToggleEquip,\r\n}: WeaponCardProps) {\r\n  return (\r\n    <div\r\n      className={`rounded-lg border-2 p-4 transition-all hover:shadow-md ${\r\n        weapon.isEquipped\r\n          ? 'border-blue-300 bg-white'\r\n          : 'border-gray-200 bg-white hover:border-gray-300'\r\n      }`}\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"mb-2 flex items-center gap-2 flex-wrap\">\r\n            <h4 className=\"font-bold text-gray-800\">{weapon.name}</h4>\r\n            {weapon.enhancementBonus > 0 && (\r\n              <Badge variant=\"warning\" size=\"sm\">\r\n                +{weapon.enhancementBonus}\r\n              </Badge>\r\n            )}\r\n            {weapon.requiresAttunement && (\r\n              <Badge\r\n                variant={weapon.isAttuned ? 'primary' : 'secondary'}\r\n                size=\"sm\"\r\n              >\r\n                {weapon.isAttuned ? 'Attuned' : 'Requires Attunement'}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-2 text-sm text-gray-600\">\r\n            {(() => {\r\n              if (Array.isArray(weapon.damage)) {\r\n                // New format: array of damage entries\r\n                return weapon.damage.length > 0\r\n                  ? weapon.damage.map((dmg, idx) => (\r\n                      <span key={idx}>\r\n                        <span className=\"font-semibold text-gray-800\">\r\n                          {dmg.dice}\r\n                        </span>{' '}\r\n                        {dmg.type}\r\n                        {dmg.label &&\r\n                          dmg.label !== 'Weapon Damage' &&\r\n                          ` (${dmg.label})`}\r\n                        {idx < weapon.damage.length - 1 && ', '}\r\n                      </span>\r\n                    ))\r\n                  : 'No damage defined';\r\n              } else {\r\n                // Old format: single damage object\r\n                const legacyDamage = weapon.damage as {\r\n                  dice: string;\r\n                  type: string;\r\n                  versatiledice?: string;\r\n                };\r\n                return legacyDamage && legacyDamage.dice && legacyDamage.type\r\n                  ? `${legacyDamage.dice} ${legacyDamage.type}`\r\n                  : 'No damage defined';\r\n              }\r\n            })()}{' '}\r\n            ‚Ä¢ <span className=\"capitalize\">{weapon.category}</span>\r\n          </div>\r\n\r\n          {weapon.description && (\r\n            <p className=\"text-sm text-gray-700 mt-2\">{weapon.description}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"ml-4 flex flex-col gap-2\">\r\n          <div className=\"flex gap-1\">\r\n            <Button\r\n              onClick={() => onEdit(weapon)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Edit weapon\"\r\n              className=\"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n            >\r\n              <Edit2 size={16} />\r\n            </Button>\r\n            <Button\r\n              onClick={() => onDelete(weapon.id)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Delete weapon\"\r\n              className=\"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n            >\r\n              <Trash2 size={16} />\r\n            </Button>\r\n          </div>\r\n          <Button\r\n            onClick={() => onToggleEquip(weapon.id, !weapon.isEquipped)}\r\n            variant={weapon.isEquipped ? 'success' : 'outline'}\r\n            size=\"sm\"\r\n            className={\r\n              weapon.isEquipped ? '' : 'hover:bg-blue-50 hover:border-blue-300'\r\n            }\r\n          >\r\n            {weapon.isEquipped ? 'Equipped' : 'Equip'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AACA;AANA;;;;;AAeO,SAAS,WAAW,EACzB,MAAM,EACN,MAAM,EACN,QAAQ,EACR,aAAa,EACG;IAChB,qBACE,8OAAC;QACC,WAAW,CAAC,uDAAuD,EACjE,OAAO,UAAU,GACb,6BACA,kDACJ;kBAEF,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA2B,OAAO,IAAI;;;;;;gCACnD,OAAO,gBAAgB,GAAG,mBACzB,8OAAC,mLAAK;oCAAC,SAAQ;oCAAU,MAAK;;wCAAK;wCAC/B,OAAO,gBAAgB;;;;;;;gCAG5B,OAAO,kBAAkB,kBACxB,8OAAC,mLAAK;oCACJ,SAAS,OAAO,SAAS,GAAG,YAAY;oCACxC,MAAK;8CAEJ,OAAO,SAAS,GAAG,YAAY;;;;;;;;;;;;sCAKtC,8OAAC;4BAAI,WAAU;;gCACZ,CAAC;oCACA,IAAI,MAAM,OAAO,CAAC,OAAO,MAAM,GAAG;wCAChC,sCAAsC;wCACtC,OAAO,OAAO,MAAM,CAAC,MAAM,GAAG,IAC1B,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,oBACtB,8OAAC;;kEACC,8OAAC;wDAAK,WAAU;kEACb,IAAI,IAAI;;;;;;oDACH;oDACP,IAAI,IAAI;oDACR,IAAI,KAAK,IACR,IAAI,KAAK,KAAK,mBACd,CAAC,EAAE,EAAE,IAAI,KAAK,CAAC,CAAC,CAAC;oDAClB,MAAM,OAAO,MAAM,CAAC,MAAM,GAAG,KAAK;;+CAR1B;;;;wDAWb;oCACN,OAAO;wCACL,mCAAmC;wCACnC,MAAM,eAAe,OAAO,MAAM;wCAKlC,OAAO,gBAAgB,aAAa,IAAI,IAAI,aAAa,IAAI,GACzD,GAAG,aAAa,IAAI,CAAC,CAAC,EAAE,aAAa,IAAI,EAAE,GAC3C;oCACN;gCACF,CAAC;gCAAK;gCAAI;8CACR,8OAAC;oCAAK,WAAU;8CAAc,OAAO,QAAQ;;;;;;;;;;;;wBAGhD,OAAO,WAAW,kBACjB,8OAAC;4BAAE,WAAU;sCAA8B,OAAO,WAAW;;;;;;;;;;;;8BAIjE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oLAAM;oCACL,SAAS,IAAM,OAAO;oCACtB,SAAQ;oCACR,MAAK;oCACL,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,2MAAK;wCAAC,MAAM;;;;;;;;;;;8CAEf,8OAAC,oLAAM;oCACL,SAAS,IAAM,SAAS,OAAO,EAAE;oCACjC,SAAQ;oCACR,MAAK;oCACL,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,oNAAM;wCAAC,MAAM;;;;;;;;;;;;;;;;;sCAGlB,8OAAC,oLAAM;4BACL,SAAS,IAAM,cAAc,OAAO,EAAE,EAAE,CAAC,OAAO,UAAU;4BAC1D,SAAS,OAAO,UAAU,GAAG,YAAY;4BACzC,MAAK;4BACL,WACE,OAAO,UAAU,GAAG,KAAK;sCAG1B,OAAO,UAAU,GAAG,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAM9C","debugId":null}},
    {"offset": {"line": 5009, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/equipment/MagicItemCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { MagicItem, MagicItemRarity } from '@/types/character';\r\nimport { Edit2, Trash2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\n\r\ninterface MagicItemCardProps {\r\n  item: MagicItem;\r\n  onEdit: (item: MagicItem) => void;\r\n  onDelete: (id: string) => void;\r\n  onToggleAttunement: (item: MagicItem, shouldAttune: boolean) => void;\r\n}\r\n\r\nconst getRarityVariant = (\r\n  rarity: MagicItemRarity\r\n): 'secondary' | 'success' | 'info' | 'primary' | 'warning' | 'danger' => {\r\n  switch (rarity) {\r\n    case 'common':\r\n      return 'secondary';\r\n    case 'uncommon':\r\n      return 'success';\r\n    case 'rare':\r\n      return 'info';\r\n    case 'very rare':\r\n      return 'primary';\r\n    case 'legendary':\r\n      return 'warning';\r\n    case 'artifact':\r\n      return 'danger';\r\n    default:\r\n      return 'secondary';\r\n  }\r\n};\r\n\r\nexport function MagicItemCard({\r\n  item,\r\n  onEdit,\r\n  onDelete,\r\n  onToggleAttunement,\r\n}: MagicItemCardProps) {\r\n  return (\r\n    <div\r\n      className={`rounded-lg border-2 p-4 transition-all hover:shadow-md ${\r\n        item.isEquipped\r\n          ? 'border-purple-300 bg-white'\r\n          : 'border-gray-200 bg-white hover:border-gray-300'\r\n      }`}\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"mb-2 flex items-center gap-2 flex-wrap\">\r\n            <h4 className=\"font-bold text-gray-800\">{item.name}</h4>\r\n            <Badge variant={getRarityVariant(item.rarity)} size=\"sm\">\r\n              {item.rarity}\r\n            </Badge>\r\n            {item.requiresAttunement && (\r\n              <Badge\r\n                variant={item.isAttuned ? 'primary' : 'secondary'}\r\n                size=\"sm\"\r\n              >\r\n                {item.isAttuned ? 'Attuned' : 'Requires Attunement'}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-2 text-sm text-gray-600 capitalize\">\r\n            {item.category}\r\n          </div>\r\n\r\n          <p className=\"mb-2 text-sm text-gray-700\">{item.description}</p>\r\n\r\n          {item.charges && (\r\n            <Badge variant=\"info\" size=\"sm\">\r\n              Charges: {item.charges.current}/{item.charges.max}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"ml-4 flex flex-col gap-2\">\r\n          <div className=\"flex gap-1\">\r\n            <Button\r\n              onClick={() => onEdit(item)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Edit item\"\r\n              className=\"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n            >\r\n              <Edit2 size={16} />\r\n            </Button>\r\n            <Button\r\n              onClick={() => onDelete(item.id)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Delete item\"\r\n              className=\"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n            >\r\n              <Trash2 size={16} />\r\n            </Button>\r\n          </div>\r\n          {item.requiresAttunement && (\r\n            <Button\r\n              onClick={() => onToggleAttunement(item, !item.isAttuned)}\r\n              variant={item.isAttuned ? 'primary' : 'outline'}\r\n              size=\"sm\"\r\n              className={\r\n                item.isAttuned\r\n                  ? 'bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700'\r\n                  : 'hover:bg-purple-50 hover:border-purple-300'\r\n              }\r\n            >\r\n              {item.isAttuned ? 'Unattune' : 'Attune'}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AACA;AANA;;;;;AAeA,MAAM,mBAAmB,CACvB;IAEA,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEO,SAAS,cAAc,EAC5B,IAAI,EACJ,MAAM,EACN,QAAQ,EACR,kBAAkB,EACC;IACnB,qBACE,8OAAC;QACC,WAAW,CAAC,uDAAuD,EACjE,KAAK,UAAU,GACX,+BACA,kDACJ;kBAEF,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA2B,KAAK,IAAI;;;;;;8CAClD,8OAAC,mLAAK;oCAAC,SAAS,iBAAiB,KAAK,MAAM;oCAAG,MAAK;8CACjD,KAAK,MAAM;;;;;;gCAEb,KAAK,kBAAkB,kBACtB,8OAAC,mLAAK;oCACJ,SAAS,KAAK,SAAS,GAAG,YAAY;oCACtC,MAAK;8CAEJ,KAAK,SAAS,GAAG,YAAY;;;;;;;;;;;;sCAKpC,8OAAC;4BAAI,WAAU;sCACZ,KAAK,QAAQ;;;;;;sCAGhB,8OAAC;4BAAE,WAAU;sCAA8B,KAAK,WAAW;;;;;;wBAE1D,KAAK,OAAO,kBACX,8OAAC,mLAAK;4BAAC,SAAQ;4BAAO,MAAK;;gCAAK;gCACpB,KAAK,OAAO,CAAC,OAAO;gCAAC;gCAAE,KAAK,OAAO,CAAC,GAAG;;;;;;;;;;;;;8BAKvD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oLAAM;oCACL,SAAS,IAAM,OAAO;oCACtB,SAAQ;oCACR,MAAK;oCACL,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,2MAAK;wCAAC,MAAM;;;;;;;;;;;8CAEf,8OAAC,oLAAM;oCACL,SAAS,IAAM,SAAS,KAAK,EAAE;oCAC/B,SAAQ;oCACR,MAAK;oCACL,OAAM;oCACN,WAAU;8CAEV,cAAA,8OAAC,oNAAM;wCAAC,MAAM;;;;;;;;;;;;;;;;;wBAGjB,KAAK,kBAAkB,kBACtB,8OAAC,oLAAM;4BACL,SAAS,IAAM,mBAAmB,MAAM,CAAC,KAAK,SAAS;4BACvD,SAAS,KAAK,SAAS,GAAG,YAAY;4BACtC,MAAK;4BACL,WACE,KAAK,SAAS,GACV,6FACA;sCAGL,KAAK,SAAS,GAAG,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAO7C","debugId":null}},
    {"offset": {"line": 5202, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/equipment/WeaponForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport {\r\n  WeaponCategory,\r\n  WeaponType,\r\n  DamageType,\r\n  WeaponDamage,\r\n} from '@/types/character';\r\nimport { Plus, Trash2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { Textarea } from '@/components/ui/forms/textarea';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\nimport { Checkbox } from '@/components/ui/forms/checkbox';\r\n\r\ninterface WeaponFormData {\r\n  name: string;\r\n  category: WeaponCategory;\r\n  weaponType: WeaponType[];\r\n  damage: WeaponDamage[];\r\n  enhancementBonus: number;\r\n  attackBonus?: number;\r\n  damageBonus?: number;\r\n  properties: string[];\r\n  description?: string;\r\n  range?: {\r\n    normal?: number;\r\n    long?: number;\r\n  };\r\n  isEquipped: boolean;\r\n  manualProficiency?: boolean;\r\n  requiresAttunement?: boolean;\r\n  isAttuned?: boolean;\r\n}\r\n\r\ninterface WeaponFormProps {\r\n  formData: WeaponFormData;\r\n  setFormData: React.Dispatch<React.SetStateAction<WeaponFormData>>;\r\n  onSubmit: () => void;\r\n  onCancel: () => void;\r\n  isEditing: boolean;\r\n}\r\n\r\nconst WEAPON_CATEGORIES: WeaponCategory[] = [\r\n  'simple',\r\n  'martial',\r\n  'magic',\r\n  'artifact',\r\n];\r\n\r\nconst WEAPON_TYPES: WeaponType[] = [\r\n  'melee',\r\n  'ranged',\r\n  'finesse',\r\n  'versatile',\r\n  'light',\r\n  'heavy',\r\n  'reach',\r\n  'thrown',\r\n  'ammunition',\r\n  'loading',\r\n  'special',\r\n];\r\n\r\nconst DAMAGE_TYPES: DamageType[] = [\r\n  'acid',\r\n  'bludgeoning',\r\n  'cold',\r\n  'fire',\r\n  'force',\r\n  'lightning',\r\n  'necrotic',\r\n  'piercing',\r\n  'poison',\r\n  'psychic',\r\n  'radiant',\r\n  'slashing',\r\n  'thunder',\r\n];\r\n\r\nexport function WeaponForm({\r\n  formData,\r\n  setFormData,\r\n  onSubmit,\r\n  onCancel,\r\n  isEditing,\r\n}: WeaponFormProps) {\r\n  const toggleWeaponType = (type: WeaponType) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      weaponType: prev.weaponType.includes(type)\r\n        ? prev.weaponType.filter(t => t !== type)\r\n        : [...prev.weaponType, type],\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* Section: Basic Information */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Basic Information\r\n        </h4>\r\n\r\n        <Input\r\n          label=\"Name\"\r\n          value={formData.name}\r\n          onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n          placeholder=\"e.g., Longsword, +1 Dagger\"\r\n          required\r\n        />\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n              Category\r\n            </label>\r\n            <SelectField\r\n              value={formData.category}\r\n              onValueChange={value =>\r\n                setFormData({\r\n                  ...formData,\r\n                  category: value as WeaponCategory,\r\n                })\r\n              }\r\n            >\r\n              {WEAPON_CATEGORIES.map(category => (\r\n                <SelectItem key={category} value={category}>\r\n                  {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectField>\r\n          </div>\r\n\r\n          <Input\r\n            label=\"Enhancement Bonus\"\r\n            type=\"number\"\r\n            value={formData.enhancementBonus.toString()}\r\n            onChange={e =>\r\n              setFormData({\r\n                ...formData,\r\n                enhancementBonus: parseInt(e.target.value) || 0,\r\n              })\r\n            }\r\n            min={0}\r\n            max={3}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Section: Damage */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between border-b-2 border-gray-200 pb-2\">\r\n          <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide\">\r\n            Damage Entries\r\n          </h4>\r\n          <Button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              const newDamage: WeaponDamage = {\r\n                dice: '1d6',\r\n                type: 'fire',\r\n                label: 'Additional Damage',\r\n              };\r\n              setFormData({\r\n                ...formData,\r\n                damage: [...formData.damage, newDamage],\r\n              });\r\n            }}\r\n            variant=\"primary\"\r\n            size=\"sm\"\r\n            leftIcon={<Plus size={14} />}\r\n            className=\"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700\"\r\n          >\r\n            Add Damage Type\r\n          </Button>\r\n        </div>\r\n\r\n        {formData.damage.map((damage, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"rounded-lg border-2 border-gray-200 bg-white p-4\"\r\n          >\r\n            <div className=\"mb-3 flex items-center justify-between\">\r\n              <h5 className=\"text-sm font-semibold text-gray-700\">\r\n                {damage.label || `Damage ${index + 1}`}\r\n              </h5>\r\n              {formData.damage.length > 1 && (\r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    const newDamage = formData.damage.filter(\r\n                      (_, i) => i !== index\r\n                    );\r\n                    setFormData({\r\n                      ...formData,\r\n                      damage: newDamage,\r\n                    });\r\n                  }}\r\n                  variant=\"ghost\"\r\n                  size=\"xs\"\r\n                  className=\"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                >\r\n                  <Trash2 size={16} />\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-4 gap-3\">\r\n              <Input\r\n                label=\"Label\"\r\n                value={damage.label || ''}\r\n                onChange={e => {\r\n                  const newDamage = [...formData.damage];\r\n                  newDamage[index] = {\r\n                    ...damage,\r\n                    label: e.target.value,\r\n                  };\r\n                  setFormData({\r\n                    ...formData,\r\n                    damage: newDamage,\r\n                  });\r\n                }}\r\n                placeholder=\"e.g., Fire Damage\"\r\n                className=\"text-sm\"\r\n              />\r\n\r\n              <Input\r\n                label=\"Dice\"\r\n                value={damage.dice}\r\n                onChange={e => {\r\n                  const newDamage = [...formData.damage];\r\n                  newDamage[index] = {\r\n                    ...damage,\r\n                    dice: e.target.value,\r\n                  };\r\n                  setFormData({\r\n                    ...formData,\r\n                    damage: newDamage,\r\n                  });\r\n                }}\r\n                placeholder=\"1d8\"\r\n                className=\"text-sm\"\r\n              />\r\n\r\n              <div>\r\n                <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n                  Type\r\n                </label>\r\n                <SelectField\r\n                  value={damage.type}\r\n                  onValueChange={value => {\r\n                    const newDamage = [...formData.damage];\r\n                    newDamage[index] = {\r\n                      ...damage,\r\n                      type: value as DamageType,\r\n                    };\r\n                    setFormData({\r\n                      ...formData,\r\n                      damage: newDamage,\r\n                    });\r\n                  }}\r\n                >\r\n                  {DAMAGE_TYPES.map(type => (\r\n                    <SelectItem key={type} value={type}>\r\n                      {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectField>\r\n              </div>\r\n\r\n              <Input\r\n                label=\"Versatile\"\r\n                value={damage.versatiledice || ''}\r\n                onChange={e => {\r\n                  const newDamage = [...formData.damage];\r\n                  newDamage[index] = {\r\n                    ...damage,\r\n                    versatiledice: e.target.value || undefined,\r\n                  };\r\n                  setFormData({\r\n                    ...formData,\r\n                    damage: newDamage,\r\n                  });\r\n                }}\r\n                placeholder=\"1d10\"\r\n                className=\"text-sm\"\r\n              />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Section: Weapon Types */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Weapon Types\r\n        </h4>\r\n\r\n        <div className=\"grid grid-cols-3 gap-3\">\r\n          {WEAPON_TYPES.map(type => (\r\n            <label key={type} className=\"flex items-center gap-2 cursor-pointer\">\r\n              <Checkbox\r\n                checked={formData.weaponType.includes(type)}\r\n                onCheckedChange={() => toggleWeaponType(type)}\r\n              />\r\n              <span className=\"text-sm font-medium text-gray-800 capitalize\">\r\n                {type}\r\n              </span>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Section: Description */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Description\r\n        </h4>\r\n\r\n        <Textarea\r\n          label=\"Special Properties\"\r\n          value={formData.description || ''}\r\n          onChange={e =>\r\n            setFormData({\r\n              ...formData,\r\n              description: e.target.value,\r\n            })\r\n          }\r\n          rows={3}\r\n          placeholder=\"Special properties, abilities, or description...\"\r\n        />\r\n      </div>\r\n\r\n      {/* Section: Properties */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Properties\r\n        </h4>\r\n\r\n        <div className=\"flex flex-wrap gap-4\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <Checkbox\r\n              checked={formData.isEquipped}\r\n              onCheckedChange={checked =>\r\n                setFormData({\r\n                  ...formData,\r\n                  isEquipped: checked as boolean,\r\n                })\r\n              }\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-800\">\r\n              Currently Equipped\r\n            </span>\r\n          </label>\r\n\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <Checkbox\r\n              checked={formData.requiresAttunement || false}\r\n              onCheckedChange={checked =>\r\n                setFormData({\r\n                  ...formData,\r\n                  requiresAttunement: checked as boolean,\r\n                  isAttuned: checked ? formData.isAttuned : false,\r\n                })\r\n              }\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-800\">\r\n              Requires Attunement\r\n            </span>\r\n          </label>\r\n\r\n          {formData.requiresAttunement && (\r\n            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n              <Checkbox\r\n                checked={formData.isAttuned || false}\r\n                onCheckedChange={checked =>\r\n                  setFormData({\r\n                    ...formData,\r\n                    isAttuned: checked as boolean,\r\n                  })\r\n                }\r\n              />\r\n              <span className=\"text-sm font-medium text-gray-800\">\r\n                Currently Attuned\r\n              </span>\r\n            </label>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form Actions */}\r\n      <div className=\"flex justify-end gap-3 pt-4 border-t-2 border-gray-200\">\r\n        <Button type=\"button\" onClick={onCancel} variant=\"outline\" size=\"md\">\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          disabled={!formData.name.trim()}\r\n          className=\"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700\"\r\n        >\r\n          {isEditing ? 'Update' : 'Add'} Weapon\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5831, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/equipment/MagicItemForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { MagicItemCategory, MagicItemRarity } from '@/types/character';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { Textarea } from '@/components/ui/forms/textarea';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\nimport { Checkbox } from '@/components/ui/forms/checkbox';\r\n\r\ninterface MagicItemFormData {\r\n  name: string;\r\n  category: MagicItemCategory;\r\n  rarity: MagicItemRarity;\r\n  description: string;\r\n  properties: string[];\r\n  requiresAttunement: boolean;\r\n  isAttuned: boolean;\r\n  isEquipped?: boolean;\r\n  charges?: {\r\n    current: number;\r\n    max: number;\r\n    rechargeRule?: string;\r\n  };\r\n}\r\n\r\ninterface MagicItemFormProps {\r\n  formData: MagicItemFormData;\r\n  setFormData: React.Dispatch<React.SetStateAction<MagicItemFormData>>;\r\n  onSubmit: () => void;\r\n  onCancel: () => void;\r\n  isEditing: boolean;\r\n}\r\n\r\nconst MAGIC_ITEM_CATEGORIES: MagicItemCategory[] = [\r\n  'wondrous',\r\n  'armor',\r\n  'shield',\r\n  'ring',\r\n  'staff',\r\n  'wand',\r\n  'rod',\r\n  'scroll',\r\n  'potion',\r\n  'artifact',\r\n  'other',\r\n];\r\n\r\nconst MAGIC_ITEM_RARITIES: MagicItemRarity[] = [\r\n  'common',\r\n  'uncommon',\r\n  'rare',\r\n  'very rare',\r\n  'legendary',\r\n  'artifact',\r\n];\r\n\r\nexport function MagicItemForm({\r\n  formData,\r\n  setFormData,\r\n  onSubmit,\r\n  onCancel,\r\n  isEditing,\r\n}: MagicItemFormProps) {\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* Section: Basic Information */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Basic Information\r\n        </h4>\r\n\r\n        <Input\r\n          label=\"Name\"\r\n          value={formData.name}\r\n          onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n          placeholder=\"e.g., Ring of Protection\"\r\n          required\r\n        />\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n              Category\r\n            </label>\r\n            <SelectField\r\n              value={formData.category}\r\n              onValueChange={value =>\r\n                setFormData({\r\n                  ...formData,\r\n                  category: value as MagicItemCategory,\r\n                })\r\n              }\r\n            >\r\n              {MAGIC_ITEM_CATEGORIES.map(category => (\r\n                <SelectItem key={category} value={category}>\r\n                  {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectField>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"mb-2 block text-sm font-medium text-gray-700\">\r\n              Rarity\r\n            </label>\r\n            <SelectField\r\n              value={formData.rarity}\r\n              onValueChange={value =>\r\n                setFormData({\r\n                  ...formData,\r\n                  rarity: value as MagicItemRarity,\r\n                })\r\n              }\r\n            >\r\n              {MAGIC_ITEM_RARITIES.map(rarity => (\r\n                <SelectItem key={rarity} value={rarity}>\r\n                  {rarity.charAt(0).toUpperCase() + rarity.slice(1)}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectField>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Section: Description */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Description\r\n        </h4>\r\n\r\n        <Textarea\r\n          label=\"Item Properties\"\r\n          value={formData.description}\r\n          onChange={e =>\r\n            setFormData({\r\n              ...formData,\r\n              description: e.target.value,\r\n            })\r\n          }\r\n          rows={3}\r\n          placeholder=\"Describe the item's properties and abilities...\"\r\n        />\r\n      </div>\r\n\r\n      {/* Section: Properties */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n          Properties\r\n        </h4>\r\n\r\n        <div className=\"flex flex-wrap gap-4\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <Checkbox\r\n              checked={formData.requiresAttunement}\r\n              onCheckedChange={checked =>\r\n                setFormData({\r\n                  ...formData,\r\n                  requiresAttunement: checked as boolean,\r\n                  isAttuned: checked ? formData.isAttuned : false,\r\n                })\r\n              }\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-800\">\r\n              Requires Attunement\r\n            </span>\r\n          </label>\r\n\r\n          {formData.requiresAttunement && (\r\n            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n              <Checkbox\r\n                checked={formData.isAttuned}\r\n                onCheckedChange={checked =>\r\n                  setFormData({\r\n                    ...formData,\r\n                    isAttuned: checked as boolean,\r\n                  })\r\n                }\r\n              />\r\n              <span className=\"text-sm font-medium text-gray-800\">\r\n                Currently Attuned\r\n              </span>\r\n            </label>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form Actions */}\r\n      <div className=\"flex justify-end gap-3 pt-4 border-t-2 border-gray-200\">\r\n        <Button type=\"button\" onClick={onCancel} variant=\"outline\" size=\"md\">\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          disabled={!formData.name.trim()}\r\n          className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n        >\r\n          {isEditing ? 'Update' : 'Add'} Item\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6148, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/equipment/index.ts"],"sourcesContent":["export { WeaponCard } from './WeaponCard';\r\nexport { MagicItemCard } from './MagicItemCard';\r\nexport { WeaponForm } from './WeaponForm';\r\nexport { MagicItemForm } from './MagicItemForm';\r\n\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 6161, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/EquipmentModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Weapon,\r\n  MagicItem,\r\n  WeaponCategory,\r\n  WeaponType,\r\n  DamageType,\r\n  WeaponDamage,\r\n  MagicItemCategory,\r\n  MagicItemRarity,\r\n} from '@/types/character';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { Plus, Sword, Wand2 } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/feedback/Modal';\r\nimport DragDropList from '@/components/ui/layout/DragDropList';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport {\r\n  WeaponCard,\r\n  MagicItemCard,\r\n  WeaponForm,\r\n  MagicItemForm,\r\n} from './equipment';\r\n\r\ninterface EquipmentModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface MagicItemFormData {\r\n  name: string;\r\n  category: MagicItemCategory;\r\n  rarity: MagicItemRarity;\r\n  description: string;\r\n  properties: string[];\r\n  requiresAttunement: boolean;\r\n  isAttuned: boolean;\r\n  isEquipped?: boolean;\r\n  charges?: {\r\n    current: number;\r\n    max: number;\r\n    rechargeRule?: string;\r\n  };\r\n}\r\n\r\ninterface WeaponFormData {\r\n  name: string;\r\n  category: WeaponCategory;\r\n  weaponType: WeaponType[];\r\n  damage: WeaponDamage[];\r\n  enhancementBonus: number;\r\n  attackBonus?: number;\r\n  damageBonus?: number;\r\n  properties: string[];\r\n  description?: string;\r\n  range?: {\r\n    normal?: number;\r\n    long?: number;\r\n  };\r\n  isEquipped: boolean;\r\n  manualProficiency?: boolean;\r\n  requiresAttunement?: boolean;\r\n  isAttuned?: boolean;\r\n}\r\n\r\nconst initialMagicItemData: MagicItemFormData = {\r\n  name: '',\r\n  category: 'wondrous',\r\n  rarity: 'common',\r\n  description: '',\r\n  properties: [],\r\n  requiresAttunement: false,\r\n  isAttuned: false,\r\n  isEquipped: false,\r\n};\r\n\r\nconst initialWeaponData: WeaponFormData = {\r\n  name: '',\r\n  category: 'simple',\r\n  weaponType: ['melee'],\r\n  damage: [\r\n    {\r\n      dice: '1d6',\r\n      type: 'bludgeoning',\r\n      label: 'Weapon Damage',\r\n    },\r\n  ],\r\n  enhancementBonus: 0,\r\n  attackBonus: 0,\r\n  damageBonus: 0,\r\n  properties: [],\r\n  description: '',\r\n  range: {\r\n    normal: 5,\r\n  },\r\n  isEquipped: false,\r\n  manualProficiency: undefined,\r\n  requiresAttunement: false,\r\n  isAttuned: false,\r\n};\r\n\r\nexport default function EquipmentModal({\r\n  isOpen,\r\n  onClose,\r\n}: EquipmentModalProps) {\r\n  const {\r\n    character,\r\n    addMagicItem,\r\n    updateMagicItem,\r\n    deleteMagicItem,\r\n    attuneMagicItem,\r\n    reorderMagicItems,\r\n    addWeapon,\r\n    updateWeapon,\r\n    deleteWeapon,\r\n    equipWeapon,\r\n    reorderWeapons,\r\n  } = useCharacterStore();\r\n\r\n  const [showMagicItemForm, setShowMagicItemForm] = useState(false);\r\n  const [showWeaponForm, setShowWeaponForm] = useState(false);\r\n  const [editingMagicItem, setEditingMagicItem] = useState<MagicItem | null>(\r\n    null\r\n  );\r\n  const [editingWeapon, setEditingWeapon] = useState<Weapon | null>(null);\r\n  const [magicItemForm, setMagicItemForm] =\r\n    useState<MagicItemFormData>(initialMagicItemData);\r\n  const [weaponForm, setWeaponForm] =\r\n    useState<WeaponFormData>(initialWeaponData);\r\n\r\n  // Calculate attunement usage\r\n  const attunedItems = character.magicItems.filter(\r\n    item => item.isAttuned\r\n  ).length;\r\n  const weaponsRequiringAttunement = character.weapons.filter(\r\n    weapon => weapon.isAttuned\r\n  ).length;\r\n  const totalAttuned = attunedItems + weaponsRequiringAttunement;\r\n\r\n  const handleMagicItemSubmit = () => {\r\n    if (!magicItemForm.name.trim()) return;\r\n\r\n    if (editingMagicItem) {\r\n      updateMagicItem(editingMagicItem.id, magicItemForm);\r\n      setEditingMagicItem(null);\r\n    } else {\r\n      addMagicItem(magicItemForm);\r\n    }\r\n\r\n    setMagicItemForm(initialMagicItemData);\r\n    setShowMagicItemForm(false);\r\n  };\r\n\r\n  const handleWeaponSubmit = () => {\r\n    if (!weaponForm.name.trim()) return;\r\n\r\n    const weaponData = {\r\n      ...weaponForm,\r\n      properties: weaponForm.properties.filter(p => p.trim()),\r\n      range: weaponForm.range?.normal\r\n        ? {\r\n            normal: weaponForm.range.normal,\r\n            long: weaponForm.range.long,\r\n          }\r\n        : undefined,\r\n    };\r\n\r\n    if (editingWeapon) {\r\n      updateWeapon(editingWeapon.id, weaponData);\r\n      setEditingWeapon(null);\r\n    } else {\r\n      addWeapon(weaponData);\r\n    }\r\n\r\n    setWeaponForm(initialWeaponData);\r\n    setShowWeaponForm(false);\r\n  };\r\n\r\n  const handleEditMagicItem = (item: MagicItem) => {\r\n    setMagicItemForm({\r\n      name: item.name,\r\n      category: item.category,\r\n      rarity: item.rarity,\r\n      description: item.description,\r\n      properties: item.properties,\r\n      requiresAttunement: item.requiresAttunement,\r\n      isAttuned: item.isAttuned,\r\n      isEquipped: item.isEquipped,\r\n      charges: item.charges,\r\n    });\r\n    setEditingMagicItem(item);\r\n    setShowMagicItemForm(true);\r\n  };\r\n\r\n  const handleEditWeapon = (weapon: Weapon) => {\r\n    // Migrate old damage format to new array format if needed\r\n    let damageArray: WeaponDamage[];\r\n    if (Array.isArray(weapon.damage)) {\r\n      damageArray = weapon.damage;\r\n    } else if (weapon.legacyDamage && weapon.legacyDamage.dice) {\r\n      // Use legacy damage if available\r\n      damageArray = [\r\n        {\r\n          dice: weapon.legacyDamage.dice,\r\n          type: weapon.legacyDamage.type as DamageType,\r\n          versatiledice: weapon.legacyDamage.versatiledice,\r\n          label: 'Weapon Damage',\r\n        },\r\n      ];\r\n    } else {\r\n      // Fallback: create default damage entry\r\n      damageArray = [\r\n        {\r\n          dice: '1d6',\r\n          type: 'bludgeoning',\r\n          label: 'Weapon Damage',\r\n        },\r\n      ];\r\n    }\r\n\r\n    setWeaponForm({\r\n      name: weapon.name,\r\n      category: weapon.category,\r\n      weaponType: weapon.weaponType,\r\n      damage: damageArray,\r\n      enhancementBonus: weapon.enhancementBonus,\r\n      attackBonus: weapon.attackBonus || 0,\r\n      damageBonus: weapon.damageBonus || 0,\r\n      properties: weapon.properties,\r\n      description: weapon.description || '',\r\n      range: weapon.range || { normal: 5 },\r\n      isEquipped: weapon.isEquipped,\r\n      manualProficiency: weapon.manualProficiency,\r\n      requiresAttunement: weapon.requiresAttunement || false,\r\n      isAttuned: weapon.isAttuned || false,\r\n    });\r\n    setEditingWeapon(weapon);\r\n    setShowWeaponForm(true);\r\n  };\r\n\r\n  const handleAttunement = (item: MagicItem, shouldAttune: boolean) => {\r\n    if (shouldAttune && totalAttuned >= character.attunementSlots.max) {\r\n      alert(\r\n        `Cannot attune to more items. Maximum attunement slots: ${character.attunementSlots.max}`\r\n      );\r\n      return;\r\n    }\r\n    attuneMagicItem(item.id, shouldAttune);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowMagicItemForm(false);\r\n    setShowWeaponForm(false);\r\n    setEditingMagicItem(null);\r\n    setEditingWeapon(null);\r\n    setMagicItemForm(initialMagicItemData);\r\n    setWeaponForm(initialWeaponData);\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={handleCloseModal}\r\n      title={`‚öîÔ∏è Equipment & Magic Items (Attunement: ${totalAttuned}/${character.attunementSlots.max})`}\r\n      size=\"xl\"\r\n      closeOnBackdropClick={true}\r\n    >\r\n      {/* Show forms if active, otherwise show main content */}\r\n      {showWeaponForm ? (\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-xl font-bold text-gray-800\">\r\n            {editingWeapon ? 'Edit Weapon' : 'Add Weapon'}\r\n          </h3>\r\n\r\n          <WeaponForm\r\n            formData={weaponForm}\r\n            setFormData={setWeaponForm}\r\n            onSubmit={handleWeaponSubmit}\r\n            onCancel={() => {\r\n              setShowWeaponForm(false);\r\n              setEditingWeapon(null);\r\n              setWeaponForm(initialWeaponData);\r\n            }}\r\n            isEditing={!!editingWeapon}\r\n          />\r\n        </div>\r\n      ) : showMagicItemForm ? (\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-xl font-bold text-gray-800\">\r\n            {editingMagicItem ? 'Edit Magic Item' : 'Add Magic Item'}\r\n          </h3>\r\n\r\n          <MagicItemForm\r\n            formData={magicItemForm}\r\n            setFormData={setMagicItemForm}\r\n            onSubmit={handleMagicItemSubmit}\r\n            onCancel={() => {\r\n              setShowMagicItemForm(false);\r\n              setEditingMagicItem(null);\r\n              setMagicItemForm(initialMagicItemData);\r\n            }}\r\n            isEditing={!!editingMagicItem}\r\n          />\r\n        </div>\r\n      ) : (\r\n        // Main equipment view\r\n        <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\r\n          {/* Weapons Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"flex items-center gap-2 text-xl font-bold text-gray-800\">\r\n                <Sword className=\"h-5 w-5\" />\r\n                Weapons ({character.weapons.length})\r\n              </h3>\r\n              <Button\r\n                onClick={() => setShowWeaponForm(true)}\r\n                variant=\"primary\"\r\n                size=\"md\"\r\n                leftIcon={<Plus size={16} />}\r\n                className=\"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700\"\r\n              >\r\n                Add Weapon\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              {character.weapons.length === 0 ? (\r\n                <div className=\"py-8 text-center text-gray-500\">\r\n                  <Sword className=\"mx-auto mb-2 h-12 w-12 text-gray-300\" />\r\n                  <p>No weapons added yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList\r\n                  items={character.weapons}\r\n                  onReorder={reorderWeapons}\r\n                  keyExtractor={weapon => weapon.id}\r\n                  className=\"space-y-3\"\r\n                  showDragHandle={true}\r\n                  dragHandlePosition=\"left\"\r\n                  renderItem={weapon => (\r\n                    <WeaponCard\r\n                      weapon={weapon}\r\n                      onEdit={handleEditWeapon}\r\n                      onDelete={deleteWeapon}\r\n                      onToggleEquip={equipWeapon}\r\n                    />\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Magic Items Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"flex items-center gap-2 text-xl font-bold text-gray-800\">\r\n                <Wand2 className=\"h-5 w-5\" />\r\n                Magic Items ({character.magicItems.length})\r\n              </h3>\r\n              <Button\r\n                onClick={() => setShowMagicItemForm(true)}\r\n                variant=\"primary\"\r\n                size=\"md\"\r\n                leftIcon={<Plus size={16} />}\r\n                className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n              >\r\n                Add Magic Item\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              {character.magicItems.length === 0 ? (\r\n                <div className=\"py-8 text-center text-gray-500\">\r\n                  <Wand2 className=\"mx-auto mb-2 h-12 w-12 text-gray-300\" />\r\n                  <p>No magic items added yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList\r\n                  items={character.magicItems}\r\n                  onReorder={reorderMagicItems}\r\n                  keyExtractor={item => item.id}\r\n                  className=\"space-y-3\"\r\n                  showDragHandle={true}\r\n                  dragHandlePosition=\"left\"\r\n                  renderItem={item => (\r\n                    <MagicItemCard\r\n                      item={item}\r\n                      onEdit={handleEditMagicItem}\r\n                      onDelete={deleteMagicItem}\r\n                      onToggleAttunement={handleAttunement}\r\n                    />\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6644, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/FeaturesTraitsManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Plus, Edit3, Trash2, Save, X } from 'lucide-react';\r\nimport { RichTextContent } from '@/types/character';\r\nimport { RichTextEditor } from '@/components/ui/forms';\r\n\r\ninterface FeaturesTraitsManagerProps {\r\n  items: RichTextContent[];\r\n  category: 'feature' | 'trait' | 'note';\r\n  onAdd: (\r\n    item: Omit<RichTextContent, 'id' | 'createdAt' | 'updatedAt'>\r\n  ) => void;\r\n  onUpdate: (id: string, updates: Partial<RichTextContent>) => void;\r\n  onDelete: (id: string) => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function FeaturesTraitsManager({\r\n  items,\r\n  category,\r\n  onAdd,\r\n  onUpdate,\r\n  onDelete,\r\n  className = '',\r\n}: FeaturesTraitsManagerProps) {\r\n  // Safety guard to ensure items is always an array\r\n  const safeItems = Array.isArray(items) ? items : [];\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [newItem, setNewItem] = useState({ title: '', content: '' });\r\n\r\n  const categoryName =\r\n    category === 'feature'\r\n      ? 'Features'\r\n      : category === 'trait'\r\n        ? 'Traits'\r\n        : 'Notes';\r\n\r\n  // Define concrete styles to avoid Tailwind CSS purging issues\r\n  const styles =\r\n    category === 'feature'\r\n      ? {\r\n          containerBorder: 'border-amber-200',\r\n          headerText: 'text-amber-800',\r\n          addButton: 'bg-amber-600 hover:bg-amber-700',\r\n          formContainer: 'bg-amber-50 border-amber-200',\r\n          saveButton: 'bg-amber-600 hover:bg-amber-700',\r\n          itemBorder: 'border-amber-200',\r\n          itemTitle: 'text-amber-900',\r\n        }\r\n      : category === 'trait'\r\n        ? {\r\n            containerBorder: 'border-emerald-200',\r\n            headerText: 'text-emerald-800',\r\n            addButton: 'bg-emerald-600 hover:bg-emerald-700',\r\n            formContainer: 'bg-emerald-50 border-emerald-200',\r\n            saveButton: 'bg-emerald-600 hover:bg-emerald-700',\r\n            itemBorder: 'border-emerald-200',\r\n            itemTitle: 'text-emerald-900',\r\n          }\r\n        : {\r\n            containerBorder: 'border-blue-200',\r\n            headerText: 'text-blue-800',\r\n            addButton: 'bg-blue-600 hover:bg-blue-700',\r\n            formContainer: 'bg-blue-50 border-blue-200',\r\n            saveButton: 'bg-blue-600 hover:bg-blue-700',\r\n            itemBorder: 'border-blue-200',\r\n            itemTitle: 'text-blue-900',\r\n          };\r\n\r\n  const handleAdd = () => {\r\n    if (newItem.title.trim()) {\r\n      onAdd({\r\n        title: newItem.title.trim(),\r\n        content: newItem.content,\r\n        category,\r\n      });\r\n      setNewItem({ title: '', content: '' });\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (\r\n    id: string,\r\n    updates: { title?: string; content?: string }\r\n  ) => {\r\n    onUpdate(id, updates);\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleCancelAdd = () => {\r\n    setIsAdding(false);\r\n    setNewItem({ title: '', content: '' });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg border bg-white shadow-lg ${styles.containerBorder} p-6 ${className}`}\r\n    >\r\n      <div className=\"mb-4 flex items-center justify-between\">\r\n        <h2\r\n          className={`text-lg font-bold ${styles.headerText} border-b border-gray-200 pb-2`}\r\n        >\r\n          {categoryName}\r\n        </h2>\r\n        <button\r\n          onClick={() => setIsAdding(true)}\r\n          disabled={isAdding}\r\n          className={`flex items-center space-x-1 px-3 py-1 ${styles.addButton} rounded-md text-sm text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50`}\r\n        >\r\n          <Plus size={14} />\r\n          <span>\r\n            Add{' '}\r\n            {category === 'feature'\r\n              ? 'Feature'\r\n              : category === 'trait'\r\n                ? 'Trait'\r\n                : 'Note'}\r\n          </span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Add New Item Form */}\r\n      {isAdding && (\r\n        <div className={`mb-4 border-2 p-4 ${styles.formContainer} rounded-lg`}>\r\n          <div className=\"space-y-3\">\r\n            <div>\r\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n                {category === 'feature'\r\n                  ? 'Feature'\r\n                  : category === 'trait'\r\n                    ? 'Trait'\r\n                    : 'Note'}{' '}\r\n                Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={newItem.title}\r\n                onChange={e =>\r\n                  setNewItem({ ...newItem, title: e.target.value })\r\n                }\r\n                placeholder={`Enter ${category} name...`}\r\n                className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800 focus:border-blue-500 focus:ring-blue-500 focus:outline-none\"\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n                Description\r\n              </label>\r\n              <RichTextEditor\r\n                content={newItem.content}\r\n                onChange={content => setNewItem({ ...newItem, content })}\r\n                placeholder={`Describe this ${category}...`}\r\n                minHeight=\"100px\"\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={handleAdd}\r\n                disabled={!newItem.title.trim()}\r\n                className={`flex items-center space-x-1 px-3 py-2 ${styles.saveButton} rounded-md text-sm text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50`}\r\n              >\r\n                <Save size={14} />\r\n                <span>Save</span>\r\n              </button>\r\n              <button\r\n                onClick={handleCancelAdd}\r\n                className=\"flex items-center space-x-1 rounded-md bg-gray-500 px-3 py-2 text-sm text-white transition-colors hover:bg-gray-600\"\r\n              >\r\n                <X size={14} />\r\n                <span>Cancel</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Items List */}\r\n      <div className=\"space-y-3\">\r\n        {safeItems.length === 0 && !isAdding && (\r\n          <div className=\"py-8 text-center text-gray-500\">\r\n            <p>\r\n              No{' '}\r\n              {category === 'feature'\r\n                ? 'features'\r\n                : category === 'trait'\r\n                  ? 'traits'\r\n                  : 'notes'}{' '}\r\n              added yet.\r\n            </p>\r\n            <p className=\"mt-1 text-sm\">\r\n              Click &quot;Add{' '}\r\n              {category === 'feature'\r\n                ? 'Feature'\r\n                : category === 'trait'\r\n                  ? 'Trait'\r\n                  : 'Note'}\r\n              &quot; to get started.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {safeItems.map(item => (\r\n          <div\r\n            key={item.id}\r\n            className={`border ${styles.itemBorder} rounded-lg p-4 transition-shadow hover:shadow-sm`}\r\n          >\r\n            {editingId === item.id ? (\r\n              <EditItemForm\r\n                item={item}\r\n                category={category}\r\n                styles={styles}\r\n                onSave={updates => handleUpdate(item.id, updates)}\r\n                onCancel={handleCancelEdit}\r\n              />\r\n            ) : (\r\n              <ViewItem\r\n                item={item}\r\n                styles={styles}\r\n                onEdit={() => setEditingId(item.id)}\r\n                onDelete={() => onDelete(item.id)}\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CategoryStyles {\r\n  containerBorder: string;\r\n  headerText: string;\r\n  addButton: string;\r\n  formContainer: string;\r\n  saveButton: string;\r\n  itemBorder: string;\r\n  itemTitle: string;\r\n}\r\n\r\ninterface EditItemFormProps {\r\n  item: RichTextContent;\r\n  category: 'feature' | 'trait' | 'note';\r\n  styles: CategoryStyles;\r\n  onSave: (updates: { title: string; content: string }) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nfunction EditItemForm({\r\n  item,\r\n  category,\r\n  styles,\r\n  onSave,\r\n  onCancel,\r\n}: EditItemFormProps) {\r\n  const [title, setTitle] = useState(item.title);\r\n  const [content, setContent] = useState(item.content);\r\n\r\n  const handleSave = () => {\r\n    if (title.trim()) {\r\n      onSave({ title: title.trim(), content });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div>\r\n        <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n          {category === 'feature'\r\n            ? 'Feature'\r\n            : category === 'trait'\r\n              ? 'Trait'\r\n              : 'Note'}{' '}\r\n          Name\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={e => setTitle(e.target.value)}\r\n          className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800 focus:border-blue-500 focus:ring-blue-500 focus:outline-none\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n          Description\r\n        </label>\r\n        <RichTextEditor\r\n          content={content}\r\n          onChange={setContent}\r\n          minHeight=\"100px\"\r\n        />\r\n      </div>\r\n      <div className=\"flex items-center space-x-2\">\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={!title.trim()}\r\n          className={`flex items-center space-x-1 px-3 py-2 ${styles.saveButton} rounded-md text-sm text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50`}\r\n        >\r\n          <Save size={14} />\r\n          <span>Save</span>\r\n        </button>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"flex items-center space-x-1 rounded-md bg-gray-500 px-3 py-2 text-sm text-white transition-colors hover:bg-gray-600\"\r\n        >\r\n          <X size={14} />\r\n          <span>Cancel</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ViewItemProps {\r\n  item: RichTextContent;\r\n  styles: CategoryStyles;\r\n  onEdit: () => void;\r\n  onDelete: () => void;\r\n}\r\n\r\nfunction ViewItem({ item, styles, onEdit, onDelete }: ViewItemProps) {\r\n  return (\r\n    <>\r\n      <div className=\"mb-2 flex items-start justify-between\">\r\n        <h3 className={`font-semibold ${styles.itemTitle}`}>{item.title}</h3>\r\n        <div className=\"flex items-center space-x-1\">\r\n          <button\r\n            onClick={onEdit}\r\n            className=\"p-1 text-gray-500 transition-colors hover:text-blue-600\"\r\n            title=\"Edit\"\r\n          >\r\n            <Edit3 size={14} />\r\n          </button>\r\n          <button\r\n            onClick={onDelete}\r\n            className=\"p-1 text-gray-500 transition-colors hover:text-red-600\"\r\n            title=\"Delete\"\r\n          >\r\n            <Trash2 size={14} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"rich-content text-sm text-gray-700\"\r\n        dangerouslySetInnerHTML={{\r\n          __html:\r\n            item.content ||\r\n            '<p class=\"text-gray-500 italic\">No description provided.</p>',\r\n        }}\r\n      />\r\n\r\n      {/* Inline styles for proper rendering of rich content */}\r\n      <style jsx>{`\r\n        .rich-content :global(h1) {\r\n          font-size: 1.125rem;\r\n          font-weight: 700;\r\n          line-height: 1.3;\r\n          margin: 0.75rem 0 0.5rem 0;\r\n          color: #1f2937;\r\n        }\r\n        .rich-content :global(h2) {\r\n          font-size: 1rem;\r\n          font-weight: 600;\r\n          line-height: 1.4;\r\n          margin: 0.5rem 0 0.25rem 0;\r\n          color: #374151;\r\n        }\r\n        .rich-content :global(p) {\r\n          margin: 0.25rem 0;\r\n          line-height: 1.5;\r\n        }\r\n        .rich-content :global(ul) {\r\n          margin: 0.25rem 0;\r\n          padding-left: 1.25rem;\r\n          list-style-type: disc;\r\n        }\r\n        .rich-content :global(ol) {\r\n          margin: 0.25rem 0;\r\n          padding-left: 1.25rem;\r\n          list-style-type: decimal;\r\n        }\r\n        .rich-content :global(li) {\r\n          margin: 0.125rem 0;\r\n          line-height: 1.4;\r\n        }\r\n        .rich-content :global(strong) {\r\n          font-weight: 600;\r\n        }\r\n        .rich-content :global(em) {\r\n          font-style: italic;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7209, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/InventoryManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { InventoryManager as SharedInventoryManager } from '@/components/shared/character';\r\n\r\nexport default function InventoryManager() {\r\n  const {\r\n    character,\r\n    addInventoryItem,\r\n    updateInventoryItem,\r\n    deleteInventoryItem,\r\n    updateItemQuantity,\r\n    reorderInventoryItems,\r\n  } = useCharacterStore();\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <SharedInventoryManager\r\n        items={character.inventoryItems}\r\n        onAddItem={item => addInventoryItem(item)}\r\n        onUpdateItem={updateInventoryItem}\r\n        onDeleteItem={deleteInventoryItem}\r\n        onQuantityChange={updateItemQuantity}\r\n        onReorderItems={reorderInventoryItems}\r\n        readonly={false}\r\n        compact={false}\r\n        hideAddButton={false}\r\n        hideFilters={false}\r\n        hideLocations={false}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAJA;;;;AAMe,SAAS;IACtB,MAAM,EACJ,SAAS,EACT,gBAAgB,EAChB,mBAAmB,EACnB,mBAAmB,EACnB,kBAAkB,EAClB,qBAAqB,EACtB,GAAG,IAAA,kKAAiB;IACrB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,gMAAsB;YACrB,OAAO,UAAU,cAAc;YAC/B,WAAW,CAAA,OAAQ,iBAAiB;YACpC,cAAc;YACd,cAAc;YACd,kBAAkB;YAClB,gBAAgB;YAChB,UAAU;YACV,SAAS;YACT,eAAe;YACf,aAAa;YACb,eAAe;;;;;;;;;;;AAIvB","debugId":null}},
    {"offset": {"line": 7252, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/NoteModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { X, Edit3, Save, Eye, Trash2 } from 'lucide-react';\r\nimport { RichTextContent } from '@/types/character';\r\nimport { Modal } from '@/components/ui/feedback';\r\nimport { Button, Input, RichTextEditor } from '@/components/ui/forms';\r\nimport { RichTextRenderer } from '@/components/ui/utils';\r\nimport { ToastData } from '@/components/ui/feedback/Toast';\r\n\r\ninterface NoteModalProps {\r\n  note: RichTextContent | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onUpdate: (id: string, updates: Partial<RichTextContent>) => void;\r\n  onDelete: (id: string) => void;\r\n  onAddToast?: (toast: Omit<ToastData, 'id'>) => void;\r\n}\r\n\r\nexport default function NoteModal({\r\n  note,\r\n  isOpen,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete,\r\n  onAddToast,\r\n}: NoteModalProps) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editTitle, setEditTitle] = useState('');\r\n  const [editContent, setEditContent] = useState('');\r\n  const [initialNoteId, setInitialNoteId] = useState<string | null>(null);\r\n  const isSavingRef = useRef(false);\r\n\r\n  // Reset editing state when modal opens/closes or when a different note is selected\r\n  useEffect(() => {\r\n    if (note && isOpen) {\r\n      // Only reset if it's a different note or the modal is opening for the first time\r\n      // Don't reset if we're currently saving to prevent overwriting user changes\r\n      if ((!initialNoteId || initialNoteId !== note.id) && !isSavingRef.current) {\r\n        setEditTitle(note.title);\r\n        setEditContent(note.content);\r\n        setIsEditing(false);\r\n        setInitialNoteId(note.id);\r\n      }\r\n      // Reset the saving flag after the note has been updated\r\n      if (isSavingRef.current && initialNoteId === note.id) {\r\n        isSavingRef.current = false;\r\n      }\r\n    } else if (!isOpen) {\r\n      setInitialNoteId(null);\r\n      setIsEditing(false);\r\n      isSavingRef.current = false;\r\n    }\r\n  }, [note, isOpen, initialNoteId]);\r\n\r\n  const handleSave = () => {\r\n    if (!note) return;\r\n\r\n    const trimmedTitle = editTitle.trim();\r\n    if (!trimmedTitle) return;\r\n\r\n    // Set saving flag to prevent useEffect from resetting our changes\r\n    isSavingRef.current = true;\r\n    \r\n    onUpdate(note.id, {\r\n      title: trimmedTitle,\r\n      content: editContent,\r\n    });\r\n    setIsEditing(false);\r\n    \r\n    // Show success toast\r\n    if (onAddToast) {\r\n      onAddToast({\r\n        type: 'success',\r\n        title: '‚úÖ Note Saved',\r\n        message: `\"${trimmedTitle}\" has been saved successfully`,\r\n        duration: 3000,\r\n      });\r\n    }\r\n    \r\n    // Close the modal after saving\r\n    onClose();\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    if (!note) return;\r\n\r\n    setEditTitle(note.title);\r\n    setEditContent(note.content);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!note) return;\r\n\r\n    if (window.confirm('Are you sure you want to delete this note?')) {\r\n      onDelete(note.id);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!note) return null;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={isEditing ? undefined : note.title}\r\n      size=\"lg\"\r\n      showCloseButton={true}\r\n      closeOnBackdropClick={true}\r\n    >\r\n      <div>\r\n        {/* Header - Only show when editing for title input */}\r\n        {isEditing && (\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              value={editTitle}\r\n              onChange={e => setEditTitle(e.target.value)}\r\n              placeholder=\"Note title...\"\r\n              className=\"border-b-2 border-blue-300 text-xl font-semibold text-blue-900\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"mb-6 flex items-center justify-end space-x-2 border-b border-gray-200 pb-4\">\r\n          {isEditing ? (\r\n            <>\r\n              <Button\r\n                onClick={handleCancel}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                leftIcon={<X className=\"h-4 w-4\" />}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={handleSave}\r\n                disabled={!editTitle.trim()}\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                leftIcon={<Save className=\"h-4 w-4\" />}\r\n              >\r\n                Save\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Button\r\n                onClick={() => setIsEditing(true)}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                leftIcon={<Edit3 className=\"h-4 w-4\" />}\r\n                className=\"text-blue-600 hover:bg-blue-100\"\r\n              >\r\n                Edit\r\n              </Button>\r\n              <Button\r\n                onClick={handleDelete}\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                leftIcon={<Trash2 className=\"h-4 w-4\" />}\r\n                className=\"text-red-600 hover:bg-red-100\"\r\n              >\r\n                Delete\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"space-y-6\">\r\n          {isEditing ? (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"mb-2 block text-sm font-medium text-blue-800\">\r\n                  Note Content\r\n                </label>\r\n                <RichTextEditor\r\n                  content={editContent}\r\n                  onChange={setEditContent}\r\n                  placeholder=\"Write your note here...\"\r\n                  className=\"min-h-96\"\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {note.content ? (\r\n                <RichTextRenderer content={note.content} />\r\n              ) : (\r\n                <div className=\"py-12 text-center text-gray-500\">\r\n                  <Eye className=\"mx-auto mb-4 h-12 w-12 text-gray-400\" />\r\n                  <p className=\"mb-2 text-lg font-medium\">No content yet</p>\r\n                  <p className=\"text-sm\">\r\n                    Click Edit to add content to this note.\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {note.updatedAt && !isEditing && (\r\n          <div className=\"mt-6 border-t border-gray-200 pt-4\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              Last updated: {new Date(note.updatedAt).toLocaleDateString()} at{' '}\r\n              {new Date(note.updatedAt).toLocaleTimeString()}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAPA;;;;;;;AAmBe,SAAS,UAAU,EAChC,IAAI,EACJ,MAAM,EACN,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,UAAU,EACK;IACf,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,cAAc,IAAA,+MAAM,EAAC;IAE3B,mFAAmF;IACnF,IAAA,kNAAS,EAAC;QACR,IAAI,QAAQ,QAAQ;YAClB,iFAAiF;YACjF,4EAA4E;YAC5E,IAAI,CAAC,CAAC,iBAAiB,kBAAkB,KAAK,EAAE,KAAK,CAAC,YAAY,OAAO,EAAE;gBACzE,aAAa,KAAK,KAAK;gBACvB,eAAe,KAAK,OAAO;gBAC3B,aAAa;gBACb,iBAAiB,KAAK,EAAE;YAC1B;YACA,wDAAwD;YACxD,IAAI,YAAY,OAAO,IAAI,kBAAkB,KAAK,EAAE,EAAE;gBACpD,YAAY,OAAO,GAAG;YACxB;QACF,OAAO,IAAI,CAAC,QAAQ;YAClB,iBAAiB;YACjB,aAAa;YACb,YAAY,OAAO,GAAG;QACxB;IACF,GAAG;QAAC;QAAM;QAAQ;KAAc;IAEhC,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM;QAEX,MAAM,eAAe,UAAU,IAAI;QACnC,IAAI,CAAC,cAAc;QAEnB,kEAAkE;QAClE,YAAY,OAAO,GAAG;QAEtB,SAAS,KAAK,EAAE,EAAE;YAChB,OAAO;YACP,SAAS;QACX;QACA,aAAa;QAEb,qBAAqB;QACrB,IAAI,YAAY;YACd,WAAW;gBACT,MAAM;gBACN,OAAO;gBACP,SAAS,CAAC,CAAC,EAAE,aAAa,6BAA6B,CAAC;gBACxD,UAAU;YACZ;QACF;QAEA,+BAA+B;QAC/B;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;QAEX,aAAa,KAAK,KAAK;QACvB,eAAe,KAAK,OAAO;QAC3B,aAAa;IACf;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;QAEX,IAAI,OAAO,OAAO,CAAC,+CAA+C;YAChE,SAAS,KAAK,EAAE;YAChB;QACF;IACF;IAEA,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC,qKAAK;QACJ,QAAQ;QACR,SAAS;QACT,OAAO,YAAY,YAAY,KAAK,KAAK;QACzC,MAAK;QACL,iBAAiB;QACjB,sBAAsB;kBAEtB,cAAA,8OAAC;;gBAEE,2BACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,kKAAK;wBACJ,OAAO;wBACP,UAAU,CAAA,IAAK,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC1C,aAAY;wBACZ,WAAU;wBACV,SAAS;;;;;;;;;;;8BAMf,8OAAC;oBAAI,WAAU;8BACZ,0BACC;;0CACE,8OAAC,oLAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,MAAK;gCACL,wBAAU,8OAAC,iMAAC;oCAAC,WAAU;;;;;;0CACxB;;;;;;0CAGD,8OAAC,oLAAM;gCACL,SAAS;gCACT,UAAU,CAAC,UAAU,IAAI;gCACzB,SAAQ;gCACR,MAAK;gCACL,wBAAU,8OAAC,0MAAI;oCAAC,WAAU;;;;;;0CAC3B;;;;;;;qDAKH;;0CACE,8OAAC,oLAAM;gCACL,SAAS,IAAM,aAAa;gCAC5B,SAAQ;gCACR,MAAK;gCACL,wBAAU,8OAAC,mNAAK;oCAAC,WAAU;;;;;;gCAC3B,WAAU;0CACX;;;;;;0CAGD,8OAAC,oLAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,MAAK;gCACL,wBAAU,8OAAC,oNAAM;oCAAC,WAAU;;;;;;gCAC5B,WAAU;0CACX;;;;;;;;;;;;;8BAQP,8OAAC;oBAAI,WAAU;8BACZ,0BACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC,iOAAc;oCACb,SAAS;oCACT,UAAU;oCACV,aAAY;oCACZ,WAAU;;;;;;;;;;;;;;;;6CAKhB,8OAAC;wBAAI,WAAU;kCACZ,KAAK,OAAO,iBACX,8OAAC,uOAAgB;4BAAC,SAAS,KAAK,OAAO;;;;;iDAEvC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,uMAAG;oCAAC,WAAU;;;;;;8CACf,8OAAC;oCAAE,WAAU;8CAA2B;;;;;;8CACxC,8OAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;gBAUhC,KAAK,SAAS,IAAI,CAAC,2BAClB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;;4BAAwB;4BACpB,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;4BAAG;4BAAI;4BAChE,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;AAO1D","debugId":null}},
    {"offset": {"line": 7579, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/NotesManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Plus, Edit3, Trash2, Save, X, BookOpen, PenTool } from 'lucide-react';\r\nimport { RichTextContent } from '@/types/character';\r\nimport { RichTextEditor } from '@/components/ui/forms';\r\nimport { RichTextRenderer } from '@/components/ui/utils';\r\nimport { ToastData } from '@/components/ui/feedback/Toast';\r\nimport NoteModal from './NoteModal';\r\nimport DragDropList from '@/components/ui/layout/DragDropList';\r\n\r\ninterface NotesManagerProps {\r\n  items: RichTextContent[];\r\n  onAdd: (\r\n    item: Omit<RichTextContent, 'id' | 'createdAt' | 'updatedAt'>\r\n  ) => void;\r\n  onUpdate: (id: string, updates: Partial<RichTextContent>) => void;\r\n  onDelete: (id: string) => void;\r\n  onReorder?: (sourceIndex: number, destinationIndex: number) => void;\r\n  onAddToast?: (toast: Omit<ToastData, 'id'>) => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function NotesManager({\r\n  items,\r\n  onAdd,\r\n  onUpdate,\r\n  onDelete,\r\n  onReorder,\r\n  onAddToast,\r\n  className = '',\r\n}: NotesManagerProps) {\r\n  // Safety guard to ensure items is always an array\r\n  const safeItems = Array.isArray(items) ? items : [];\r\n\r\n  // Sort items by order field if it exists, otherwise maintain current order\r\n  const sortedItems = [...safeItems].sort((a, b) => {\r\n    if (a.order !== undefined && b.order !== undefined) {\r\n      return a.order - b.order;\r\n    }\r\n    return 0;\r\n  });\r\n\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [newItem, setNewItem] = useState({ title: '', content: '' });\r\n  const [editingItem, setEditingItem] = useState({ title: '', content: '' });\r\n  const [viewMode, setViewMode] = useState<'read' | 'edit'>('read');\r\n  const [selectedNote, setSelectedNote] = useState<RichTextContent | null>(\r\n    null\r\n  );\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const handleAdd = () => {\r\n    if (newItem.title.trim()) {\r\n      onAdd({\r\n        title: newItem.title.trim(),\r\n        content: newItem.content,\r\n        category: 'note',\r\n      });\r\n      setNewItem({ title: '', content: '' });\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (\r\n    id: string,\r\n    updates: { title?: string; content?: string }\r\n  ) => {\r\n    onUpdate(id, updates);\r\n    setEditingId(null);\r\n    setEditingItem({ title: '', content: '' });\r\n  };\r\n\r\n  const handleStartEdit = (item: RichTextContent) => {\r\n    setEditingId(item.id);\r\n    setEditingItem({ title: item.title, content: item.content });\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditingItem({ title: '', content: '' });\r\n  };\r\n\r\n  const handleSaveEdit = (id: string) => {\r\n    handleUpdate(id, {\r\n      title: editingItem.title,\r\n      content: editingItem.content,\r\n    });\r\n  };\r\n\r\n  const handleCancelAdd = () => {\r\n    setIsAdding(false);\r\n    setNewItem({ title: '', content: '' });\r\n  };\r\n\r\n  const handleNoteClick = (note: RichTextContent) => {\r\n    setSelectedNote(note);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedNote(null);\r\n  };\r\n\r\n  const handleReorder = (sourceIndex: number, destinationIndex: number) => {\r\n    if (onReorder) {\r\n      onReorder(sourceIndex, destinationIndex);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg border border-blue-200 bg-white p-6 shadow-lg ${className}`}\r\n    >\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <h2 className=\"border-b border-gray-200 pb-2 text-xl font-bold text-blue-800\">\r\n            Session Notes\r\n          </h2>\r\n          <div className=\"flex items-center rounded-lg border border-blue-200 bg-blue-50 p-1\">\r\n            <button\r\n              onClick={() => setViewMode('read')}\r\n              className={`flex items-center space-x-1 rounded-md px-3 py-1 text-sm font-medium transition-all ${\r\n                viewMode === 'read'\r\n                  ? 'bg-blue-600 text-white shadow-sm'\r\n                  : 'text-blue-600 hover:bg-blue-100'\r\n              }`}\r\n            >\r\n              <BookOpen size={14} />\r\n              <span>Read</span>\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('edit')}\r\n              className={`flex items-center space-x-1 rounded-md px-3 py-1 text-sm font-medium transition-all ${\r\n                viewMode === 'edit'\r\n                  ? 'bg-blue-600 text-white shadow-sm'\r\n                  : 'text-blue-600 hover:bg-blue-100'\r\n              }`}\r\n            >\r\n              <PenTool size={14} />\r\n              <span>Edit</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {viewMode === 'edit' && (\r\n          <button\r\n            onClick={() => setIsAdding(true)}\r\n            disabled={isAdding}\r\n            className=\"flex items-center space-x-2 rounded-md bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n          >\r\n            <Plus size={16} />\r\n            <span>Add Note</span>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Add New Note Form */}\r\n      {isAdding && viewMode === 'edit' && (\r\n        <div className=\"mb-6 rounded-lg border-2 border-blue-200 bg-blue-50 p-6\">\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-blue-800\">\r\n                Note Title\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={newItem.title}\r\n                onChange={e =>\r\n                  setNewItem({ ...newItem, title: e.target.value })\r\n                }\r\n                placeholder=\"Enter note title...\"\r\n                className=\"w-full rounded-md border border-blue-300 px-4 py-2 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none\"\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"mb-2 block text-sm font-medium text-blue-800\">\r\n                Note Content\r\n              </label>\r\n              <RichTextEditor\r\n                content={newItem.content}\r\n                onChange={content => setNewItem({ ...newItem, content })}\r\n                placeholder=\"Write your note here...\"\r\n                className=\"min-h-40\"\r\n              />\r\n            </div>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                onClick={handleCancelAdd}\r\n                className=\"flex items-center space-x-1 rounded-md border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50\"\r\n              >\r\n                <X size={16} />\r\n                <span>Cancel</span>\r\n              </button>\r\n              <button\r\n                onClick={handleAdd}\r\n                disabled={!newItem.title.trim()}\r\n                className=\"flex items-center space-x-1 rounded-md bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              >\r\n                <Save size={16} />\r\n                <span>Save Note</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Notes List */}\r\n      <div className=\"space-y-6\">\r\n        {sortedItems.length === 0 ? (\r\n          <div className=\"py-12 text-center text-gray-500\">\r\n            <BookOpen className=\"mx-auto mb-4 h-12 w-12 text-gray-400\" />\r\n            <p className=\"mb-2 text-lg font-medium\">No notes yet</p>\r\n            <p className=\"text-sm\">\r\n              {viewMode === 'edit'\r\n                ? \"Click 'Add Note' to start taking notes about your adventures.\"\r\n                : 'Switch to Edit mode to start adding notes.'}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <DragDropList\r\n            items={sortedItems}\r\n            onReorder={handleReorder}\r\n            keyExtractor={item => item.id}\r\n            disabled={viewMode !== 'edit' || !onReorder}\r\n            className=\"space-y-6\"\r\n            itemClassName=\"border border-blue-100 rounded-lg p-6 bg-gradient-to-r from-blue-25 to-indigo-25 hover:shadow-md transition-all cursor-pointer hover:shadow-lg hover:border-blue-200\"\r\n            showDragHandle={viewMode === 'edit' && Boolean(onReorder)}\r\n            dragHandlePosition=\"left\"\r\n            renderItem={item => (\r\n              <>\r\n                {editingId === item.id && viewMode === 'edit' ? (\r\n                  // Edit mode for individual note\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <label className=\"mb-2 block text-sm font-medium text-blue-800\">\r\n                        Note Title\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingItem.title}\r\n                        onChange={e => \r\n                          setEditingItem({ ...editingItem, title: e.target.value })\r\n                        }\r\n                        className=\"w-full rounded-md border border-blue-300 px-4 py-2 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none\"\r\n                        autoFocus\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"mb-2 block text-sm font-medium text-blue-800\">\r\n                        Note Content\r\n                      </label>\r\n                      <RichTextEditor\r\n                        content={editingItem.content}\r\n                        onChange={content => \r\n                          setEditingItem({ ...editingItem, content })\r\n                        }\r\n                        className=\"min-h-40\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"flex justify-end space-x-3\">\r\n                      <button\r\n                        onClick={handleCancelEdit}\r\n                        className=\"flex items-center space-x-1 rounded-md border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50\"\r\n                      >\r\n                        <X size={16} />\r\n                        <span>Cancel</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleSaveEdit(item.id)}\r\n                        disabled={!editingItem.title.trim()}\r\n                        className=\"flex items-center space-x-1 rounded-md bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                      >\r\n                        <Save size={16} />\r\n                        <span>Save</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  // Display mode\r\n                  <div onClick={() => handleNoteClick(item)}>\r\n                    <div className=\"mb-4 flex items-start justify-between\">\r\n                      <div className=\"flex flex-1 items-center gap-3\">\r\n                        <h3 className=\"flex-1 text-xl font-semibold text-blue-900\">\r\n                          {item.title}\r\n                        </h3>\r\n                      </div>\r\n                      {viewMode === 'edit' && (\r\n                        <div className=\"ml-4 flex items-center space-x-2\">\r\n                          <button\r\n                            onClick={e => {\r\n                              e.stopPropagation();\r\n                              handleStartEdit(item);\r\n                            }}\r\n                            className=\"rounded-md p-2 text-blue-600 transition-colors hover:bg-blue-100\"\r\n                            title=\"Edit note\"\r\n                          >\r\n                            <Edit3 size={16} />\r\n                          </button>\r\n                          <button\r\n                            onClick={e => {\r\n                              e.stopPropagation();\r\n                              onDelete(item.id);\r\n                            }}\r\n                            className=\"rounded-md p-2 text-red-600 transition-colors hover:bg-red-100\"\r\n                            title=\"Delete note\"\r\n                          >\r\n                            <Trash2 size={16} />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"mt-4\">\r\n                      {item.content ? (\r\n                        <div className=\"relative\">\r\n                          <div className=\"max-h-32 overflow-hidden\">\r\n                            <RichTextRenderer content={item.content} />\r\n                          </div>\r\n                          {item.content.length > 200 && (\r\n                            <div className=\"from-blue-25 absolute right-0 bottom-0 left-0 h-8 bg-gradient-to-t to-transparent\"></div>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"text-gray-500 italic\">\r\n                          No content yet...\r\n                        </p>\r\n                      )}\r\n\r\n                      {viewMode === 'read' && (\r\n                        <div className=\"mt-4 border-t border-blue-100 pt-3\">\r\n                          <p className=\"text-sm font-medium text-blue-600\">\r\n                            {item.content && item.content.length > 200\r\n                              ? 'Click to read full note ‚Üí'\r\n                              : 'Click to view or edit in detail ‚Üí'}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {item.updatedAt && (\r\n                      <div className=\"mt-6 border-t border-blue-200 pt-4\">\r\n                        <p className=\"text-sm text-blue-600\">\r\n                          Last updated:{' '}\r\n                          {new Date(item.updatedAt).toLocaleDateString()} at{' '}\r\n                          {new Date(item.updatedAt).toLocaleTimeString()}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Note Modal */}\r\n      <NoteModal\r\n        note={selectedNote}\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        onUpdate={onUpdate}\r\n        onDelete={onDelete}\r\n        onAddToast={onAddToast}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8304, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ui/game/index.ts"],"sourcesContent":["// Game-specific Components\r\nexport { default as ConditionDetailsModal } from './ConditionDetailsModal';\r\nexport { default as ConditionsDiseasesManager } from './ConditionsDiseasesManager';\r\nexport { default as CurrencyManager } from './CurrencyManager';\r\nexport { DiceButton } from './DiceButton';\r\nexport { DiceResultDisplay } from './DiceResultDisplay';\r\nexport { DiceRoller } from './DiceRoller';\r\nexport { default as EquipmentModal } from './EquipmentModal';\r\nexport { default as FeaturesTraitsManager } from './FeaturesTraitsManager';\r\nexport { default as InventoryManager } from './InventoryManager';\r\nexport { default as NoteModal } from './NoteModal';\r\nexport { default as NotesManager } from './NotesManager';\r\nexport { SpellCastModal } from './SpellCastModal';\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","debugId":null}}]
}