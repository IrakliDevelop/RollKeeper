{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/spells/SpellSlotTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { SpellSlots, PactMagic } from '@/types/character';\r\nimport { Button } from '@/components/ui/forms';\r\nimport { Badge } from '@/components/ui/layout';\r\nimport { RotateCcw, Zap } from 'lucide-react';\r\n\r\ninterface SpellSlotTrackerProps {\r\n  spellSlots: SpellSlots;\r\n  pactMagic?: PactMagic;\r\n  onSpellSlotChange?: (level: keyof SpellSlots, used: number) => void;\r\n  onPactMagicChange?: (used: number) => void;\r\n  onResetSpellSlots?: () => void;\r\n  onResetPactMagic?: () => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideControls?: boolean;\r\n  hideResetButtons?: boolean;\r\n  showOnlyUsed?: boolean;\r\n  maxLevelToShow?: number;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function SpellSlotTracker({\r\n  spellSlots,\r\n  pactMagic,\r\n  onSpellSlotChange,\r\n  onPactMagicChange,\r\n  onResetSpellSlots,\r\n  onResetPactMagic,\r\n  readonly = false,\r\n  compact = false,\r\n  hideControls = false,\r\n  hideResetButtons = false,\r\n  showOnlyUsed = false,\r\n  maxLevelToShow = 9,\r\n  className = '',\r\n}: SpellSlotTrackerProps) {\r\n  // Check if character has any spell slots\r\n  const hasSpellSlots = Object.values(spellSlots).some(slot => slot.max > 0);\r\n  const hasPactMagic = pactMagic && pactMagic.slots.max > 0;\r\n\r\n  if (!hasSpellSlots && !hasPactMagic) {\r\n    return null; // Don't render if no spell slots\r\n  }\r\n\r\n  const renderSlotCheckboxes = (\r\n    max: number,\r\n    used: number,\r\n    onChange?: (used: number) => void\r\n  ) => {\r\n    const size = compact ? 'w-3 h-3' : 'w-4 h-4';\r\n    const gap = compact ? 'gap-0.5' : 'gap-1';\r\n\r\n    return (\r\n      <div className={`flex flex-wrap ${gap}`}>\r\n        {Array.from({ length: max }, (_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => {\r\n              if (readonly || !onChange) return;\r\n              const newUsed = index < used ? used - 1 : index + 1;\r\n              onChange(Math.max(0, Math.min(newUsed, max)));\r\n            }}\r\n            disabled={readonly || !onChange}\r\n            className={`${size} rounded border-2 transition-colors ${\r\n              index < used\r\n                ? 'border-red-500 bg-red-500' // Used slot\r\n                : readonly\r\n                  ? 'border-gray-300 bg-white'\r\n                  : 'border-gray-400 bg-white hover:border-gray-600' // Available slot\r\n            } ${readonly ? '' : 'cursor-pointer'}`}\r\n            title={`Spell slot ${index + 1} - ${index < used ? 'Used' : 'Available'}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const containerClasses = compact\r\n    ? `rounded-lg border-2 border-purple-200 bg-white p-3 space-y-3 shadow-sm ${className}`\r\n    : `rounded-lg border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-violet-50 p-4 space-y-4 shadow-sm ${className}`;\r\n\r\n  // Filter spell levels to show\r\n  const levelsToShow = ([1, 2, 3, 4, 5, 6, 7, 8, 9] as const)\r\n    .filter(level => level <= maxLevelToShow)\r\n    .filter(level => {\r\n      const slot = spellSlots[level];\r\n      if (showOnlyUsed) {\r\n        return slot.max > 0 && slot.used > 0;\r\n      }\r\n      return slot.max > 0;\r\n    });\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3\r\n          className={`flex items-center gap-2 font-semibold text-purple-800 ${compact ? 'text-base' : 'text-lg'}`}\r\n        >\r\n          <Zap size={compact ? 16 : 20} />\r\n          Spell Slots\r\n        </h3>\r\n        {!readonly && !hideResetButtons && !hideControls && (\r\n          <div className=\"flex items-center space-x-2\">\r\n            {hasSpellSlots && onResetSpellSlots && (\r\n              <Button\r\n                onClick={onResetSpellSlots}\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                leftIcon={<RotateCcw className=\"h-3 w-3\" />}\r\n                className=\"text-purple-600 hover:text-purple-800\"\r\n                title=\"Reset all spell slots\"\r\n              >\r\n                Reset Slots\r\n              </Button>\r\n            )}\r\n            {hasPactMagic && onResetPactMagic && (\r\n              <Button\r\n                onClick={onResetPactMagic}\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                leftIcon={<RotateCcw className=\"h-3 w-3\" />}\r\n                className=\"text-purple-600 hover:text-purple-800\"\r\n                title=\"Reset pact magic slots\"\r\n              >\r\n                Reset Pact\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Regular Spell Slots */}\r\n      {hasSpellSlots && levelsToShow.length > 0 && (\r\n        <div className={compact ? 'space-y-2' : 'space-y-3'}>\r\n          {!compact && (\r\n            <h4 className=\"text-sm font-semibold text-purple-700\">Spell Slots</h4>\r\n          )}\r\n          {levelsToShow.map(level => {\r\n            const slot = spellSlots[level];\r\n            const remaining = slot.max - slot.used;\r\n            return (\r\n              <div key={level} className=\"flex items-center justify-between rounded-lg border-2 border-purple-200 bg-white p-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant=\"secondary\" size=\"sm\">\r\n                    {compact ? `L${level}` : `Level ${level}`}\r\n                  </Badge>\r\n                  <Badge\r\n                    variant={remaining > 0 ? 'success' : 'neutral'}\r\n                    size=\"sm\"\r\n                  >\r\n                    {remaining}/{slot.max}\r\n                  </Badge>\r\n                </div>\r\n                {renderSlotCheckboxes(\r\n                  slot.max,\r\n                  slot.used,\r\n                  onSpellSlotChange\r\n                    ? used => onSpellSlotChange(level, used)\r\n                    : undefined\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Warlock Pact Magic */}\r\n      {hasPactMagic && pactMagic && (\r\n        <div\r\n          className={`space-y-3 border-t-2 border-purple-200 pt-3 ${compact ? 'space-y-2 pt-2' : ''}`}\r\n        >\r\n          <h4\r\n            className={`font-semibold text-purple-700 ${compact ? 'text-xs' : 'text-sm'}`}\r\n          >\r\n            Pact Magic\r\n          </h4>\r\n          <div className=\"flex items-center justify-between rounded-lg border-2 border-purple-300 bg-white p-2\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Badge variant=\"info\" size=\"sm\">\r\n                {compact ? `L${pactMagic.level}` : `Level ${pactMagic.level}`}\r\n              </Badge>\r\n              <Badge\r\n                variant={pactMagic.slots.max - pactMagic.slots.used > 0 ? 'success' : 'neutral'}\r\n                size=\"sm\"\r\n              >\r\n                {pactMagic.slots.max - pactMagic.slots.used}/{pactMagic.slots.max}\r\n              </Badge>\r\n            </div>\r\n            {renderSlotCheckboxes(\r\n              pactMagic.slots.max,\r\n              pactMagic.slots.used,\r\n              onPactMagicChange\r\n            )}\r\n          </div>\r\n          {!compact && (\r\n            <p className=\"text-xs text-purple-600 italic\">\r\n              ‚ö° Pact magic slots recharge on a short rest\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Usage Guide */}\r\n      {!readonly && !hideControls && !compact && (\r\n        <div className=\"border-t-2 border-purple-100 pt-2 text-xs text-gray-500\">\r\n          <p>\r\n            üí° Click empty slots to mark as used ‚Ä¢ Click used slots to mark as available\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AANA;;;;;AA2BO,SAAS,iBAAiB,KAcT;QAdS,EAC/B,UAAU,EACV,SAAS,EACT,iBAAiB,EACjB,iBAAiB,EACjB,iBAAiB,EACjB,gBAAgB,EAChB,WAAW,KAAK,EAChB,UAAU,KAAK,EACf,eAAe,KAAK,EACpB,mBAAmB,KAAK,EACxB,eAAe,KAAK,EACpB,iBAAiB,CAAC,EAClB,YAAY,EAAE,EACQ,GAdS;IAe/B,yCAAyC;IACzC,MAAM,gBAAgB,OAAO,MAAM,CAAC,YAAY,IAAI,CAAC,CAAA,OAAQ,KAAK,GAAG,GAAG;IACxE,MAAM,eAAe,aAAa,UAAU,KAAK,CAAC,GAAG,GAAG;IAExD,IAAI,CAAC,iBAAiB,CAAC,cAAc;QACnC,OAAO,MAAM,iCAAiC;IAChD;IAEA,MAAM,uBAAuB,CAC3B,KACA,MACA;QAEA,MAAM,OAAO,UAAU,YAAY;QACnC,MAAM,MAAM,UAAU,YAAY;QAElC,qBACE,6LAAC;YAAI,WAAW,AAAC,kBAAqB,OAAJ;sBAC/B,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAI,GAAG,CAAC,GAAG,sBAC/B,6LAAC;oBAEC,SAAS;wBACP,IAAI,YAAY,CAAC,UAAU;wBAC3B,MAAM,UAAU,QAAQ,OAAO,OAAO,IAAI,QAAQ;wBAClD,SAAS,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,SAAS;oBACzC;oBACA,UAAU,YAAY,CAAC;oBACvB,WAAW,AAAC,GACV,OADY,MAAK,wCAMf,OALF,QAAQ,OACJ,4BAA4B,YAAY;uBACxC,WACE,6BACA,iDAAiD,iBAAiB;sBACzE,KAAoC,OAAjC,WAAW,KAAK;oBACpB,OAAO,AAAC,cAA4B,OAAf,QAAQ,GAAE,OAAyC,OAApC,QAAQ,OAAO,SAAS;mBAdvD;;;;;;;;;;IAmBf;IAEA,MAAM,mBAAmB,UACrB,AAAC,0EAAmF,OAAV,aAC1E,AAAC,+GAAwH,OAAV;IAEnH,8BAA8B;IAC9B,MAAM,eAAe,AAAC;QAAC;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;KAAE,CAC9C,MAAM,CAAC,CAAA,QAAS,SAAS,gBACzB,MAAM,CAAC,CAAA;QACN,MAAM,OAAO,UAAU,CAAC,MAAM;QAC9B,IAAI,cAAc;YAChB,OAAO,KAAK,GAAG,GAAG,KAAK,KAAK,IAAI,GAAG;QACrC;QACA,OAAO,KAAK,GAAG,GAAG;IACpB;IAEF,qBACE,6LAAC;QAAI,WAAW;;0BACd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAW,AAAC,yDAA0F,OAAlC,UAAU,cAAc;;0CAE5F,6LAAC,0MAAG;gCAAC,MAAM,UAAU,KAAK;;;;;;4BAAM;;;;;;;oBAGjC,CAAC,YAAY,CAAC,oBAAoB,CAAC,8BAClC,6LAAC;wBAAI,WAAU;;4BACZ,iBAAiB,mCAChB,6LAAC,uLAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,MAAK;gCACL,wBAAU,6LAAC,gOAAS;oCAAC,WAAU;;;;;;gCAC/B,WAAU;gCACV,OAAM;0CACP;;;;;;4BAIF,gBAAgB,kCACf,6LAAC,uLAAM;gCACL,SAAS;gCACT,SAAQ;gCACR,MAAK;gCACL,wBAAU,6LAAC,gOAAS;oCAAC,WAAU;;;;;;gCAC/B,WAAU;gCACV,OAAM;0CACP;;;;;;;;;;;;;;;;;;YASR,iBAAiB,aAAa,MAAM,GAAG,mBACtC,6LAAC;gBAAI,WAAW,UAAU,cAAc;;oBACrC,CAAC,yBACA,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;oBAEvD,aAAa,GAAG,CAAC,CAAA;wBAChB,MAAM,OAAO,UAAU,CAAC,MAAM;wBAC9B,MAAM,YAAY,KAAK,GAAG,GAAG,KAAK,IAAI;wBACtC,qBACE,6LAAC;4BAAgB,WAAU;;8CACzB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sLAAK;4CAAC,SAAQ;4CAAY,MAAK;sDAC7B,UAAU,AAAC,IAAS,OAAN,SAAU,AAAC,SAAc,OAAN;;;;;;sDAEpC,6LAAC,sLAAK;4CACJ,SAAS,YAAY,IAAI,YAAY;4CACrC,MAAK;;gDAEJ;gDAAU;gDAAE,KAAK,GAAG;;;;;;;;;;;;;gCAGxB,qBACC,KAAK,GAAG,EACR,KAAK,IAAI,EACT,oBACI,CAAA,OAAQ,kBAAkB,OAAO,QACjC;;2BAjBE;;;;;oBAqBd;;;;;;;YAKH,gBAAgB,2BACf,6LAAC;gBACC,WAAW,AAAC,+CAA8E,OAAhC,UAAU,mBAAmB;;kCAEvF,6LAAC;wBACC,WAAW,AAAC,iCAAgE,OAAhC,UAAU,YAAY;kCACnE;;;;;;kCAGD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,sLAAK;wCAAC,SAAQ;wCAAO,MAAK;kDACxB,UAAU,AAAC,IAAmB,OAAhB,UAAU,KAAK,IAAK,AAAC,SAAwB,OAAhB,UAAU,KAAK;;;;;;kDAE7D,6LAAC,sLAAK;wCACJ,SAAS,UAAU,KAAK,CAAC,GAAG,GAAG,UAAU,KAAK,CAAC,IAAI,GAAG,IAAI,YAAY;wCACtE,MAAK;;4CAEJ,UAAU,KAAK,CAAC,GAAG,GAAG,UAAU,KAAK,CAAC,IAAI;4CAAC;4CAAE,UAAU,KAAK,CAAC,GAAG;;;;;;;;;;;;;4BAGpE,qBACC,UAAU,KAAK,CAAC,GAAG,EACnB,UAAU,KAAK,CAAC,IAAI,EACpB;;;;;;;oBAGH,CAAC,yBACA,6LAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;YAQnD,CAAC,YAAY,CAAC,gBAAgB,CAAC,yBAC9B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;8BAAE;;;;;;;;;;;;;;;;;AAOb;KA/LgB","debugId":null}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/spells/index.ts"],"sourcesContent":["export { SpellSlotTracker } from './SpellSlotTracker';\r\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/CharacterHeader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { ClassInfo } from '@/types/character';\r\nimport Image from 'next/image';\r\n\r\ninterface CharacterHeaderProps {\r\n  name: string;\r\n  race?: string;\r\n  classInfo?: ClassInfo;\r\n  level?: number;\r\n  background?: string;\r\n  playerName?: string;\r\n  alignment?: string;\r\n  avatar?: string;\r\n\r\n  // Display options\r\n  compact?: boolean;\r\n  showPlayerName?: boolean;\r\n  showBackground?: boolean;\r\n  showAlignment?: boolean;\r\n  readonly?: boolean;\r\n\r\n  // Edit handlers\r\n  onUpdateName?: (name: string) => void;\r\n  onUpdateRace?: (race: string) => void;\r\n  onUpdateBackground?: (background: string) => void;\r\n  onUpdatePlayerName?: (playerName: string) => void;\r\n  onUpdateAlignment?: (alignment: string) => void;\r\n\r\n  className?: string;\r\n}\r\n\r\nconst ALIGNMENTS = [\r\n  'Lawful Good',\r\n  'Neutral Good',\r\n  'Chaotic Good',\r\n  'Lawful Neutral',\r\n  'True Neutral',\r\n  'Chaotic Neutral',\r\n  'Lawful Evil',\r\n  'Neutral Evil',\r\n  'Chaotic Evil',\r\n];\r\n\r\nexport function CharacterHeader({\r\n  name,\r\n  race,\r\n  classInfo,\r\n  level,\r\n  background,\r\n  playerName,\r\n  alignment,\r\n  avatar,\r\n  compact = false,\r\n  showPlayerName = false,\r\n  showBackground = true,\r\n  showAlignment = true,\r\n  readonly = false,\r\n  onUpdateName,\r\n  onUpdateRace,\r\n  onUpdateBackground,\r\n  onUpdatePlayerName,\r\n  onUpdateAlignment,\r\n  className = '',\r\n}: CharacterHeaderProps) {\r\n  const containerClasses = compact\r\n    ? `bg-white rounded-lg shadow border border-amber-200 p-3 ${className}`\r\n    : `bg-white rounded-lg shadow-lg border border-amber-200 p-6 ${className}`;\r\n\r\n  if (compact) {\r\n    return (\r\n      <div className={containerClasses}>\r\n        <div className=\"flex items-center gap-3\">\r\n          {avatar && (\r\n            <Image\r\n              src={avatar}\r\n              alt={name || 'Character'}\r\n              className=\"h-12 w-12 rounded-full border-2 border-blue-200\"\r\n              width={48}\r\n              height={48}\r\n            />\r\n          )}\r\n          <div className=\"min-w-0 flex-1\">\r\n            <h3 className=\"truncate text-lg font-bold text-gray-800\">\r\n              {name || 'Unnamed Character'}\r\n            </h3>\r\n            <div className=\"truncate text-sm text-gray-600\">\r\n              {level && classInfo?.name && (\r\n                <span>\r\n                  Level {level} {classInfo.name}\r\n                </span>\r\n              )}\r\n              {race && (\r\n                <span>\r\n                  {level && classInfo?.name ? ' ‚Ä¢ ' : ''}\r\n                  {race}\r\n                </span>\r\n              )}\r\n              {showPlayerName && playerName && (\r\n                <span className=\"text-gray-500\"> ({playerName})</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <h2 className=\"mb-4 border-b border-gray-200 pb-2 text-lg font-bold text-gray-800\">\r\n        Character Information\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n        {/* Character Name */}\r\n        <div className=\"sm:col-span-2\">\r\n          <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n            Character Name\r\n          </label>\r\n          {readonly ? (\r\n            <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n              {name || 'Unnamed Character'}\r\n            </div>\r\n          ) : (\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter character name\"\r\n              value={name}\r\n              onChange={e => onUpdateName?.(e.target.value)}\r\n              className=\"w-full rounded-md border border-gray-300 p-2 text-gray-800 placeholder-gray-400 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Race */}\r\n        <div>\r\n          <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n            Race\r\n          </label>\r\n          {readonly ? (\r\n            <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n              {race || 'Unknown'}\r\n            </div>\r\n          ) : (\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Human\"\r\n              value={race}\r\n              onChange={e => onUpdateRace?.(e.target.value)}\r\n              className=\"w-full rounded-md border border-gray-300 p-2 text-gray-800 placeholder-gray-400 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Class & Level (Display Only) */}\r\n        <div>\r\n          <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n            Class & Level\r\n          </label>\r\n          <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n            {level && classInfo?.name\r\n              ? `Level ${level} ${classInfo.name}`\r\n              : 'Not Set'}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Background */}\r\n        {showBackground && (\r\n          <div>\r\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n              Background\r\n            </label>\r\n            {readonly ? (\r\n              <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n                {background || 'Unknown'}\r\n              </div>\r\n            ) : (\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Soldier\"\r\n                value={background}\r\n                onChange={e => onUpdateBackground?.(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 p-2 text-gray-800 placeholder-gray-400 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Player Name */}\r\n        {showPlayerName && (\r\n          <div>\r\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n              Player Name\r\n            </label>\r\n            {readonly ? (\r\n              <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n                {playerName || 'Unknown'}\r\n              </div>\r\n            ) : (\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Your Name\"\r\n                value={playerName}\r\n                onChange={e => onUpdatePlayerName?.(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 p-2 text-gray-800 placeholder-gray-400 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Alignment */}\r\n        {showAlignment && (\r\n          <div>\r\n            <label className=\"mb-1 block text-sm font-medium text-gray-700\">\r\n              Alignment\r\n            </label>\r\n            {readonly ? (\r\n              <div className=\"w-full rounded-md border border-gray-200 bg-gray-50 p-2 text-gray-800\">\r\n                {alignment || 'Unknown'}\r\n              </div>\r\n            ) : (\r\n              <select\r\n                value={alignment}\r\n                onChange={e => onUpdateAlignment?.(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 p-2 text-gray-800 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"\">Select...</option>\r\n                {ALIGNMENTS.map(align => (\r\n                  <option key={align} value={align}>\r\n                    {align}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 681, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/HeroicInspirationTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { HeroicInspiration } from '@/types/character';\r\nimport { Star, Plus, Minus, RotateCcw, Settings } from 'lucide-react';\r\nimport { Button, Input } from '@/components/ui/forms';\r\n\r\ninterface HeroicInspirationTrackerProps {\r\n  inspiration: HeroicInspiration;\r\n  onUpdateInspiration?: (updates: Partial<HeroicInspiration>) => void;\r\n  onAddInspiration?: (amount?: number) => void;\r\n  onUseInspiration?: () => void;\r\n  onResetInspiration?: () => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideControls?: boolean;\r\n  hideSettings?: boolean;\r\n  hideHelperText?: boolean;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function HeroicInspirationTracker({\r\n  inspiration,\r\n  onUpdateInspiration,\r\n  onAddInspiration,\r\n  onUseInspiration,\r\n  onResetInspiration,\r\n  readonly = false,\r\n  compact = false,\r\n  hideControls = false,\r\n  hideSettings = false,\r\n  hideHelperText = false,\r\n  className = '',\r\n}: HeroicInspirationTrackerProps) {\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [maxCountInput, setMaxCountInput] = useState(\r\n    inspiration.maxCount?.toString() || ''\r\n  );\r\n\r\n  const handleMaxCountChange = () => {\r\n    const newMax =\r\n      maxCountInput.trim() === ''\r\n        ? undefined\r\n        : parseInt(maxCountInput) || undefined;\r\n    onUpdateInspiration?.({ maxCount: newMax });\r\n    setShowSettings(false);\r\n  };\r\n\r\n  const renderInspirationDice = () => {\r\n    const maxDisplay = Math.max(\r\n      inspiration.count,\r\n      inspiration.maxCount || 0,\r\n      compact ? 3 : 5\r\n    );\r\n\r\n    return (\r\n      <div\r\n        className={`flex flex-wrap justify-center gap-2 ${compact ? 'gap-1' : 'gap-2'}`}\r\n      >\r\n        {Array.from({ length: maxDisplay }, (_, index) => {\r\n          const isActive = index < inspiration.count;\r\n          const isOverMax =\r\n            inspiration.maxCount && index >= inspiration.maxCount;\r\n\r\n          return (\r\n            <button\r\n              key={index}\r\n              onClick={() => {\r\n                if (readonly) return;\r\n\r\n                if (isActive && onUpdateInspiration) {\r\n                  // Click on active dice to remove\r\n                  const newCount = Math.max(0, inspiration.count - 1);\r\n                  onUpdateInspiration({ count: newCount });\r\n                } else if (!isOverMax && onAddInspiration) {\r\n                  // Click on inactive dice to add (if not over max)\r\n                  onAddInspiration(1);\r\n                }\r\n              }}\r\n              disabled={readonly || Boolean(isOverMax && !isActive)}\r\n              className={` ${compact ? 'h-8 w-8' : 'h-10 w-10'} flex items-center justify-center rounded-lg border-2 transition-all duration-200 ${\r\n                isActive\r\n                  ? 'scale-110 transform border-yellow-600 bg-gradient-to-br from-yellow-400 to-yellow-600 text-white shadow-lg hover:shadow-xl'\r\n                  : isOverMax\r\n                    ? 'cursor-not-allowed border-gray-300 bg-gray-100 text-gray-400'\r\n                    : readonly\r\n                      ? 'border-yellow-300 bg-white text-yellow-600'\r\n                      : 'cursor-pointer border-yellow-300 bg-white text-yellow-600 hover:border-yellow-500 hover:bg-yellow-50'\r\n              } `}\r\n              title={\r\n                isActive\r\n                  ? readonly\r\n                    ? 'Inspiration available'\r\n                    : 'Click to use inspiration'\r\n                  : isOverMax\r\n                    ? 'Over maximum limit'\r\n                    : readonly\r\n                      ? 'No inspiration'\r\n                      : 'Click to add inspiration'\r\n              }\r\n            >\r\n              <Star\r\n                size={compact ? 12 : 16}\r\n                className={isActive ? 'fill-current' : ''}\r\n              />\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const containerClasses = compact\r\n    ? `bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border-2 border-yellow-300 p-3 ${className}`\r\n    : `bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border-2 border-yellow-300 p-4 ${className}`;\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      {!compact && (\r\n        <div className=\"mb-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Star className=\"h-5 w-5 fill-current text-yellow-600\" />\r\n            <h3 className=\"text-lg font-bold text-yellow-800\">\r\n              Heroic Inspiration\r\n            </h3>\r\n          </div>\r\n\r\n          {!readonly && !hideSettings && (\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button\r\n                onClick={() => setShowSettings(!showSettings)}\r\n                variant=\"ghost\"\r\n                size=\"xs\"\r\n                className=\"text-yellow-600 hover:bg-yellow-100\"\r\n                title=\"Settings\"\r\n              >\r\n                <Settings size={16} />\r\n              </Button>\r\n              {onResetInspiration && (\r\n                <Button\r\n                  onClick={onResetInspiration}\r\n                  variant=\"ghost\"\r\n                  size=\"xs\"\r\n                  className=\"text-yellow-600 hover:bg-yellow-100\"\r\n                  title=\"Reset to 0\"\r\n                >\r\n                  <RotateCcw size={16} />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Settings Panel */}\r\n      {!readonly && showSettings && !hideSettings && (\r\n        <div className=\"mb-4 rounded-lg border border-yellow-200 bg-white p-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              Max Inspiration:\r\n            </label>\r\n            <Input\r\n              type=\"number\"\r\n              value={maxCountInput}\r\n              onChange={e => setMaxCountInput(e.target.value)}\r\n              placeholder=\"Unlimited\"\r\n              min=\"0\"\r\n              className=\"w-20 text-sm\"\r\n              size=\"sm\"\r\n            />\r\n            <Button\r\n              onClick={handleMaxCountChange}\r\n              variant=\"warning\"\r\n              size=\"sm\"\r\n              className=\"bg-yellow-600 hover:bg-yellow-700\"\r\n            >\r\n              Set\r\n            </Button>\r\n            <Button\r\n              onClick={() => setShowSettings(false)}\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Current Count Display */}\r\n      <div className=\"mb-4 text-center\">\r\n        <div\r\n          className={`font-bold text-yellow-800 ${compact ? 'text-xl' : 'text-3xl'}`}\r\n        >\r\n          {inspiration.count}\r\n          {inspiration.maxCount && (\r\n            <span\r\n              className={`ml-1 text-yellow-600 ${compact ? 'text-sm' : 'text-lg'}`}\r\n            >\r\n              / {inspiration.maxCount}\r\n            </span>\r\n          )}\r\n        </div>\r\n        {!compact && (\r\n          <div className=\"text-sm text-yellow-700\">\r\n            {inspiration.count === 0\r\n              ? 'No inspiration available'\r\n              : inspiration.count === 1\r\n                ? '1 inspiration die'\r\n                : `${inspiration.count} inspiration dice`}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Inspiration Dice Visual */}\r\n      <div className=\"mb-4\">{renderInspirationDice()}</div>\r\n\r\n      {/* Action Buttons */}\r\n      {!readonly && !hideControls && (\r\n        <div className=\"flex justify-center gap-2\">\r\n          {onAddInspiration && (\r\n            <Button\r\n              onClick={() => onAddInspiration(1)}\r\n              disabled={\r\n                inspiration.maxCount\r\n                  ? inspiration.count >= inspiration.maxCount\r\n                  : false\r\n              }\r\n              variant=\"success\"\r\n              size=\"sm\"\r\n              leftIcon={<Plus size={16} />}\r\n            >\r\n              Add\r\n            </Button>\r\n          )}\r\n          {onUseInspiration && (\r\n            <Button\r\n              onClick={onUseInspiration}\r\n              disabled={inspiration.count === 0}\r\n              variant=\"danger\"\r\n              size=\"sm\"\r\n              leftIcon={<Minus size={16} />}\r\n            >\r\n              Use\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Helper Text */}\r\n      {!hideHelperText && !compact && (\r\n        <div className=\"mt-3 rounded bg-yellow-100 p-2 text-center text-xs text-yellow-700\">\r\n          <p>\r\n            <strong>Heroic Inspiration:</strong> Reroll a d20 die and use the\r\n            new roll.\r\n          </p>\r\n          <p className=\"mt-1\">\r\n            Unlike regular inspiration, you can have multiple dice and they\r\n            stack!\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1042, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/XPTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { TrendingUp } from 'lucide-react';\r\nimport { Button, Input, Switch } from '@/components/ui/forms';\r\nimport {\r\n  getXPForLevel,\r\n  getXPToNextLevel,\r\n  getXPProgress,\r\n  shouldLevelUp,\r\n} from '@/utils/calculations';\r\n\r\ninterface XPTrackerProps {\r\n  currentXP: number;\r\n  currentLevel: number;\r\n  onAddXP?: (xpToAdd: number) => void;\r\n  onSetXP?: (newXP: number) => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideControls?: boolean;\r\n  hideProgressBar?: boolean;\r\n  hideLevelUpAlert?: boolean;\r\n  hideThresholds?: boolean;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function XPTracker({\r\n  currentXP,\r\n  currentLevel,\r\n  onAddXP,\r\n  onSetXP,\r\n  readonly = false,\r\n  compact = false,\r\n  hideControls = false,\r\n  hideProgressBar = false,\r\n  hideLevelUpAlert = false,\r\n  hideThresholds = false,\r\n  className = '',\r\n}: XPTrackerProps) {\r\n  const [mode, setMode] = useState<'add' | 'set'>('add');\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [showLevelUp, setShowLevelUp] = useState(false);\r\n\r\n  const xpToNext = getXPToNextLevel(currentXP, currentLevel);\r\n  const progress = getXPProgress(currentXP, currentLevel);\r\n  const isMaxLevel = currentLevel >= 20;\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const value = parseInt(inputValue);\r\n\r\n    if (isNaN(value) || value < 0) return;\r\n\r\n    if (mode === 'add' && onAddXP) {\r\n      onAddXP(value);\r\n      if (!hideLevelUpAlert && shouldLevelUp(currentXP + value, currentLevel)) {\r\n        setShowLevelUp(true);\r\n        setTimeout(() => setShowLevelUp(false), 3000);\r\n      }\r\n    } else if (mode === 'set' && onSetXP) {\r\n      onSetXP(value);\r\n      if (!hideLevelUpAlert && shouldLevelUp(value, currentLevel)) {\r\n        setShowLevelUp(true);\r\n        setTimeout(() => setShowLevelUp(false), 3000);\r\n      }\r\n    }\r\n\r\n    setInputValue('');\r\n  };\r\n\r\n  const containerClasses = compact\r\n    ? `bg-white rounded-lg border border-gray-200 p-3 space-y-3 ${className}`\r\n    : `bg-white rounded-lg border border-gray-200 p-4 space-y-4 ${className}`;\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3\r\n          className={`flex items-center gap-2 font-semibold text-indigo-800 ${compact ? 'text-base' : 'text-lg'}`}\r\n        >\r\n          <TrendingUp size={compact ? 16 : 20} />\r\n          {compact ? 'XP' : 'Experience Points'}\r\n        </h3>\r\n        {!hideLevelUpAlert && showLevelUp && (\r\n          <div className=\"flex animate-pulse items-center space-x-1 font-bold text-green-600\">\r\n            <TrendingUp size={16} />\r\n            <span className=\"text-sm\">LEVEL UP!</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Current XP and Level Display */}\r\n      <div\r\n        className={\r\n          compact\r\n            ? 'flex items-center justify-between'\r\n            : 'grid grid-cols-2 gap-4'\r\n        }\r\n      >\r\n        <div className=\"text-center\">\r\n          <div\r\n            className={`font-bold text-indigo-800 ${compact ? 'text-lg' : 'text-2xl'}`}\r\n          >\r\n            {currentXP.toLocaleString()}\r\n          </div>\r\n          <div className={`text-gray-600 ${compact ? 'text-xs' : 'text-xs'}`}>\r\n            {compact ? 'XP' : 'Current XP'}\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <div\r\n            className={`font-bold text-purple-800 ${compact ? 'text-lg' : 'text-2xl'}`}\r\n          >\r\n            Level {currentLevel}\r\n          </div>\r\n          <div className={`text-gray-600 ${compact ? 'text-xs' : 'text-xs'}`}>\r\n            {compact ? 'Level' : 'Current Level'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress to Next Level */}\r\n      {!isMaxLevel && !hideProgressBar && (\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-sm\">\r\n            <span className=\"text-gray-600\">To Next Level:</span>\r\n            <span className=\"font-semibold text-gray-800\">\r\n              {xpToNext.toLocaleString()} XP\r\n            </span>\r\n          </div>\r\n          <div\r\n            className={`w-full rounded-full bg-gray-200 ${compact ? 'h-2' : 'h-3'}`}\r\n          >\r\n            <div\r\n              className={`rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500 ease-out ${compact ? 'h-2' : 'h-3'}`}\r\n              style={{ width: `${progress}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"text-center text-xs text-gray-500\">\r\n            {progress.toFixed(1)}% to Level {currentLevel + 1}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {isMaxLevel && (\r\n        <div className=\"rounded-md border border-yellow-300 bg-yellow-50 p-3 text-center\">\r\n          <div\r\n            className={`font-medium text-yellow-800 ${compact ? 'text-xs' : 'text-sm'}`}\r\n          >\r\n            üéâ Maximum Level Reached! üéâ\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* XP Management Form */}\r\n      {!readonly && !hideControls && (onAddXP || onSetXP) && (\r\n        <div\r\n          className={`space-y-3 border-t border-gray-100 pt-3 ${compact ? 'space-y-2 pt-2' : ''}`}\r\n        >\r\n          {onAddXP && onSetXP && !compact && (\r\n            <div className=\"flex items-center justify-center gap-3\">\r\n              <span className={`text-sm font-medium ${mode === 'add' ? 'text-indigo-600' : 'text-gray-600'}`}>\r\n                ‚ûï Add XP\r\n              </span>\r\n              <Switch\r\n                checked={mode === 'set'}\r\n                onCheckedChange={(checked) => setMode(checked ? 'set' : 'add')}\r\n                size=\"sm\"\r\n                variant=\"default\"\r\n              />\r\n              <span className={`text-sm font-medium ${mode === 'set' ? 'text-indigo-600' : 'text-gray-600'}`}>\r\n                ‚úèÔ∏è Set XP\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"flex space-x-2\">\r\n            <Input\r\n              type=\"number\"\r\n              value={inputValue}\r\n              onChange={e => setInputValue(e.target.value)}\r\n              placeholder={mode === 'add' ? 'XP to add...' : 'Total XP...'}\r\n              min=\"0\"\r\n              className={`flex-1 ${compact ? 'text-sm' : 'text-sm'}`}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={!inputValue || isNaN(parseInt(inputValue))}\r\n              variant=\"primary\"\r\n              size={compact ? 'sm' : 'md'}\r\n              className=\"bg-indigo-600 hover:bg-indigo-700\"\r\n            >\r\n              {mode === 'add' ? 'Add' : 'Set'}\r\n            </Button>\r\n          </form>\r\n\r\n          {!compact && (\r\n            <div className=\"text-xs text-gray-500\">\r\n              {mode === 'add'\r\n                ? '‚Ä¢ Add XP from encounters, quests, or other sources'\r\n                : '‚Ä¢ Set total XP directly (useful for importing characters)'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Level Thresholds Reference */}\r\n      {!isMaxLevel && !hideThresholds && !compact && (\r\n        <div className=\"border-t border-gray-100 pt-2 text-xs text-gray-500\">\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <div>\r\n              Level {currentLevel}:{' '}\r\n              {getXPForLevel(currentLevel).toLocaleString()} XP\r\n            </div>\r\n            <div>\r\n              Level {currentLevel + 1}:{' '}\r\n              {getXPForLevel(currentLevel + 1).toLocaleString()} XP\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1434, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/TraitTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { TrackableTrait } from '@/types/character';\r\nimport { calculateTraitMaxUses } from '@/utils/calculations';\r\nimport { Button } from '@/components/ui/forms';\r\nimport { Badge } from '@/components/ui/layout';\r\nimport { RotateCcw, Zap, Eye, Trash2, Search, X } from 'lucide-react';\r\n\r\ninterface TraitTrackerProps {\r\n  traits: TrackableTrait[];\r\n  characterLevel?: number;\r\n  onUpdateTrait?: (id: string, updates: Partial<TrackableTrait>) => void;\r\n  onDeleteTrait?: (id: string) => void;\r\n  onUseTrait?: (id: string) => void;\r\n  onResetTraits?: (restType: 'short' | 'long') => void;\r\n  onTraitClick?: (trait: TrackableTrait) => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideControls?: boolean;\r\n  hideResetButtons?: boolean;\r\n  showOnlyUsed?: boolean;\r\n  maxTraitsToShow?: number;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function TraitTracker({\r\n  traits,\r\n  characterLevel = 1,\r\n  onUpdateTrait,\r\n  onDeleteTrait,\r\n  onUseTrait,\r\n  onResetTraits,\r\n  onTraitClick,\r\n  readonly = false,\r\n  compact = false,\r\n  hideControls = false,\r\n  hideResetButtons = false,\r\n  showOnlyUsed = false,\r\n  maxTraitsToShow,\r\n  className = '',\r\n}: TraitTrackerProps) {\r\n  const [searchFilter, setSearchFilter] = useState('');\r\n\r\n  // Safety guard to ensure traits is always an array\r\n  const safeTraits = Array.isArray(traits) ? traits : [];\r\n\r\n  // Filter traits based on display options\r\n  let displayTraits = safeTraits;\r\n\r\n  // Apply search filter\r\n  if (searchFilter.trim()) {\r\n    displayTraits = displayTraits.filter(\r\n      trait =>\r\n        trait.name.toLowerCase().includes(searchFilter.toLowerCase()) ||\r\n        (trait.description &&\r\n          trait.description\r\n            .toLowerCase()\r\n            .includes(searchFilter.toLowerCase())) ||\r\n        (trait.source &&\r\n          trait.source.toLowerCase().includes(searchFilter.toLowerCase()))\r\n    );\r\n  }\r\n\r\n  if (showOnlyUsed) {\r\n    displayTraits = displayTraits.filter(trait => trait.usedUses > 0);\r\n  }\r\n  if (maxTraitsToShow) {\r\n    displayTraits = displayTraits.slice(0, maxTraitsToShow);\r\n  }\r\n\r\n  const renderUsageCheckboxes = (trait: TrackableTrait) => {\r\n    const size = compact ? 'w-3 h-3' : 'w-4 h-4';\r\n    const gap = compact ? 'gap-0.5' : 'gap-1';\r\n    const effectiveMaxUses = calculateTraitMaxUses(trait, characterLevel);\r\n\r\n    return (\r\n      <div className={`flex flex-wrap ${gap}`}>\r\n        {Array.from({ length: effectiveMaxUses }, (_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => {\r\n              if (readonly || !onUpdateTrait) return;\r\n              const newUsed =\r\n                index < trait.usedUses ? trait.usedUses - 1 : index + 1;\r\n              onUpdateTrait(trait.id, {\r\n                usedUses: Math.max(0, Math.min(newUsed, effectiveMaxUses)),\r\n              });\r\n            }}\r\n            disabled={readonly || !onUpdateTrait}\r\n            className={`${size} rounded border-2 transition-colors ${\r\n              index < trait.usedUses\r\n                ? 'border-red-500 bg-red-500' // Used\r\n                : readonly\r\n                  ? 'border-gray-300 bg-white'\r\n                  : 'border-gray-400 bg-white hover:border-gray-600' // Available\r\n            } ${readonly ? '' : 'cursor-pointer'}`}\r\n            title={`Use ${index + 1} - ${index < trait.usedUses ? 'Used' : 'Available'}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const shortRestTraits = displayTraits.filter(\r\n    trait => trait.restType === 'short'\r\n  );\r\n  const longRestTraits = displayTraits.filter(\r\n    trait => trait.restType === 'long'\r\n  );\r\n\r\n  const containerClasses = compact\r\n    ? `rounded-lg border-2 border-indigo-200 bg-white p-3 shadow-sm ${className}`\r\n    : `rounded-lg border-2 border-indigo-200 bg-gradient-to-br from-indigo-50 to-purple-50 p-4 space-y-4 shadow-sm ${className}`;\r\n\r\n  if (safeTraits.length === 0) {\r\n    return (\r\n      <div className={containerClasses}>\r\n        <div className=\"mb-4 flex items-center justify-between\">\r\n          <h3\r\n            className={`flex items-center gap-2 font-semibold text-indigo-800 ${compact ? 'text-base' : 'text-lg'}`}\r\n          >\r\n            <Zap size={compact ? 16 : 20} />\r\n            {compact ? 'Abilities' : 'Special Abilities'}\r\n          </h3>\r\n        </div>\r\n        {!compact && (\r\n          <div className=\"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-8 text-center\">\r\n            <Zap className=\"mx-auto mb-2 h-10 w-10 text-gray-400\" />\r\n            <p className=\"font-medium text-gray-600\">\r\n              No special abilities yet\r\n            </p>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              Special abilities appear here when added through Active Abilities\r\n              & Features\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <h3\r\n            className={`flex items-center gap-2 font-semibold text-indigo-800 ${compact ? 'text-base' : 'text-lg'}`}\r\n          >\r\n            <Zap size={compact ? 16 : 20} />\r\n            {compact ? 'Abilities' : 'Special Abilities'}\r\n          </h3>\r\n          {!compact && displayTraits.length > 0 && (\r\n            <Badge variant=\"info\" size=\"sm\">\r\n              {displayTraits.length}{' '}\r\n              {displayTraits.length === 1 ? 'ability' : 'abilities'}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n        {!readonly && !hideControls && (\r\n          <div className=\"flex items-center space-x-2\">\r\n            {!hideResetButtons &&\r\n              onResetTraits &&\r\n              shortRestTraits.length > 0 && (\r\n                <Button\r\n                  onClick={() => onResetTraits('short')}\r\n                  variant=\"ghost\"\r\n                  size=\"xs\"\r\n                  leftIcon={<RotateCcw className=\"h-3 w-3\" />}\r\n                  className=\"text-blue-600 hover:text-blue-800\"\r\n                  title=\"Reset short rest abilities\"\r\n                >\r\n                  Short Rest\r\n                </Button>\r\n              )}\r\n            {!hideResetButtons &&\r\n              onResetTraits &&\r\n              longRestTraits.length > 0 && (\r\n                <Button\r\n                  onClick={() => onResetTraits('long')}\r\n                  variant=\"ghost\"\r\n                  size=\"xs\"\r\n                  leftIcon={<RotateCcw className=\"h-3 w-3\" />}\r\n                  className=\"text-indigo-600 hover:text-indigo-800\"\r\n                  title=\"Reset all abilities\"\r\n                >\r\n                  Long Rest\r\n                </Button>\r\n              )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Search Filter */}\r\n      {!compact && safeTraits.length > 3 && (\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search abilities...\"\r\n            value={searchFilter}\r\n            onChange={e => setSearchFilter(e.target.value)}\r\n            className=\"w-full rounded-lg border-2 border-indigo-200 bg-white py-2 pr-10 pl-10 text-sm transition-colors focus:border-indigo-400 focus:ring-2 focus:ring-indigo-200 focus:outline-none\"\r\n          />\r\n          {searchFilter && (\r\n            <button\r\n              onClick={() => setSearchFilter('')}\r\n              className=\"absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n              title=\"Clear search\"\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Traits List with fixed height and scroll */}\r\n      {displayTraits.length > 0 ? (\r\n        <div\r\n          className={`${compact ? 'space-y-2' : 'max-h-96 space-y-3 overflow-y-auto pr-2'}`}\r\n        >\r\n          {displayTraits.map(trait => (\r\n            <div\r\n              key={trait.id}\r\n              className={`rounded-lg border-2 border-indigo-200 bg-white ${compact ? 'p-2' : 'p-3'} transition-shadow hover:shadow-md`}\r\n            >\r\n              <div>\r\n                <div\r\n                  className={`mb-2 flex items-start justify-between ${compact ? 'mb-1' : ''}`}\r\n                >\r\n                  <div className=\"min-w-0 flex-1\">\r\n                    <div className=\"flex flex-wrap items-center gap-2\">\r\n                      <h4\r\n                        className={`font-medium text-gray-900 ${compact ? 'text-sm' : 'text-base'}`}\r\n                      >\r\n                        {trait.name}\r\n                      </h4>\r\n                      {trait.source && (\r\n                        <Badge variant=\"neutral\" size=\"sm\">\r\n                          {trait.source}\r\n                        </Badge>\r\n                      )}\r\n                      <Badge\r\n                        variant={\r\n                          trait.restType === 'short' ? 'info' : 'secondary'\r\n                        }\r\n                        size=\"sm\"\r\n                      >\r\n                        {trait.restType === 'short'\r\n                          ? 'Short Rest'\r\n                          : 'Long Rest'}\r\n                      </Badge>\r\n                    </div>\r\n                    {trait.description && !compact && (\r\n                      <div\r\n                        className=\"mt-1 line-clamp-2 text-sm text-gray-600\"\r\n                        dangerouslySetInnerHTML={{ __html: trait.description }}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  {!readonly && !hideControls && (\r\n                    <div className=\"ml-2 flex items-center space-x-1\">\r\n                      {onTraitClick && (\r\n                        <Button\r\n                          onClick={() => onTraitClick(trait)}\r\n                          variant=\"ghost\"\r\n                          size=\"xs\"\r\n                          className=\"text-indigo-600 hover:bg-indigo-100\"\r\n                          title=\"View ability details\"\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {onDeleteTrait && (\r\n                        <Button\r\n                          onClick={() => onDeleteTrait(trait.id)}\r\n                          variant=\"ghost\"\r\n                          size=\"xs\"\r\n                          className=\"text-red-600 hover:bg-red-100\"\r\n                          title=\"Delete ability\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  {/* View button even when controls are hidden */}\r\n                  {(readonly || hideControls) && onTraitClick && (\r\n                    <div className=\"ml-2\">\r\n                      <Button\r\n                        onClick={() => onTraitClick(trait)}\r\n                        variant=\"ghost\"\r\n                        size=\"xs\"\r\n                        className=\"text-indigo-600 hover:bg-indigo-100\"\r\n                        title=\"View ability details\"\r\n                      >\r\n                        <Eye className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex flex-wrap items-center gap-2\">\r\n                    <Badge\r\n                      variant={\r\n                        calculateTraitMaxUses(trait, characterLevel) -\r\n                          trait.usedUses >\r\n                        0\r\n                          ? 'success'\r\n                          : 'neutral'\r\n                      }\r\n                      size=\"sm\"\r\n                    >\r\n                      {calculateTraitMaxUses(trait, characterLevel) -\r\n                        trait.usedUses}\r\n                      /{calculateTraitMaxUses(trait, characterLevel)} Uses\r\n                      {trait.scaleWithProficiency && ' (Prof.)'}\r\n                    </Badge>\r\n                    {renderUsageCheckboxes(trait)}\r\n                  </div>\r\n                  {!readonly && onUseTrait && (\r\n                    <Button\r\n                      onClick={() => onUseTrait(trait.id)}\r\n                      disabled={\r\n                        trait.usedUses >=\r\n                        calculateTraitMaxUses(trait, characterLevel)\r\n                      }\r\n                      variant=\"ghost\"\r\n                      size=\"xs\"\r\n                      className=\"text-indigo-600 hover:bg-indigo-100\"\r\n                      title=\"Use ability\"\r\n                    >\r\n                      <Zap className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-8 text-center\">\r\n          <Search className=\"mx-auto mb-2 h-10 w-10 text-gray-400\" />\r\n          <p className=\"font-medium text-gray-600\">\r\n            No abilities match your search\r\n          </p>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            Try a different search term\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/InventoryManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { InventoryItem } from '@/types/character';\r\nimport {\r\n  Plus,\r\n  Package,\r\n  Filter,\r\n  MapPin,\r\n  X,\r\n  Search,\r\n  ChevronDown,\r\n  ChevronRight,\r\n} from 'lucide-react';\r\nimport { formatCurrencyFromCopper } from '@/utils/currency';\r\nimport DragDropList from '@/components/ui/layout/DragDropList';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\nimport { ItemCard, ItemForm, initialInventoryFormData, type InventoryFormData } from '../../ui/game/inventory';\r\n\r\nconst ITEM_CATEGORIES = [\r\n  'weapon',\r\n  'armor',\r\n  'tool',\r\n  'consumable',\r\n  'treasure',\r\n  'misc',\r\n];\r\n\r\nconst DEFAULT_LOCATIONS = [\r\n  'Backpack',\r\n  'Belt',\r\n  'Pocket',\r\n  'Bag of Holding',\r\n  'Saddlebags',\r\n  'Chest',\r\n  'Wagon',\r\n  'On Person',\r\n  'Left Behind',\r\n];\r\n\r\ninterface InventoryManagerProps {\r\n  items: InventoryItem[];\r\n  onAddItem?: (\r\n    item: Omit<InventoryItem, 'id' | 'createdAt' | 'updatedAt'>\r\n  ) => void;\r\n  onUpdateItem?: (id: string, updates: Partial<InventoryItem>) => void;\r\n  onDeleteItem?: (id: string) => void;\r\n  onQuantityChange?: (id: string, quantity: number) => void;\r\n  onReorderItems?: (sourceIndex: number, destinationIndex: number) => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideAddButton?: boolean;\r\n  hideFilters?: boolean;\r\n  hideLocations?: boolean;\r\n  showOnlyLocation?: string;\r\n  maxItemsToShow?: number;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function InventoryManager({\r\n  items,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onDeleteItem,\r\n  onQuantityChange,\r\n  onReorderItems,\r\n  readonly = false,\r\n  compact = false,\r\n  hideAddButton = false,\r\n  hideFilters = false,\r\n  hideLocations = false,\r\n  showOnlyLocation,\r\n  maxItemsToShow,\r\n  className = '',\r\n}: InventoryManagerProps) {\r\n  const [showItemForm, setShowItemForm] = useState(false);\r\n  const [editingItem, setEditingItem] = useState<InventoryItem | null>(null);\r\n  const [formData, setFormData] = useState<InventoryFormData>(initialInventoryFormData);\r\n  const [filterLocation, setFilterLocation] = useState<string>('all');\r\n  const [filterCategory, setFilterCategory] = useState<string>('all');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [collapsedLocations, setCollapsedLocations] = useState<Set<string>>(new Set());\r\n\r\n  // Get all unique locations from items\r\n  const allLocations = useMemo(() => {\r\n    return [\r\n      ...new Set([\r\n        ...DEFAULT_LOCATIONS,\r\n        ...items.map(item => item.location).filter((loc): loc is string => Boolean(loc)),\r\n      ]),\r\n    ].sort();\r\n  }, [items]);\r\n\r\n  // Filter items based on selected filters and display options\r\n  const filteredItems = useMemo(() => {\r\n    let result = items;\r\n\r\n    if (showOnlyLocation) {\r\n      result = result.filter(item =>\r\n        showOnlyLocation === 'Unassigned'\r\n          ? !item.location || item.location === null\r\n          : item.location === showOnlyLocation\r\n      );\r\n    } else {\r\n      result = result.filter(item => {\r\n        const locationMatch =\r\n          filterLocation === 'all' ||\r\n          (filterLocation === 'Unassigned' &&\r\n            (!item.location || item.location === null)) ||\r\n          item.location === filterLocation;\r\n\r\n        const categoryMatch =\r\n          filterCategory === 'all' || item.category === filterCategory;\r\n\r\n        const searchMatch =\r\n          !searchQuery ||\r\n          item.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          item.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          item.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\r\n\r\n        return locationMatch && categoryMatch && searchMatch;\r\n      });\r\n    }\r\n\r\n    if (maxItemsToShow && result.length > maxItemsToShow) {\r\n      result = result.slice(0, maxItemsToShow);\r\n    }\r\n\r\n    return result;\r\n  }, [items, filterLocation, filterCategory, searchQuery, showOnlyLocation, maxItemsToShow]);\r\n\r\n  // Group items by location\r\n  const itemsByLocation = useMemo(() => {\r\n    const grouped: Record<string, InventoryItem[]> = {};\r\n    \r\n    filteredItems.forEach(item => {\r\n      const location = item.location || 'Unassigned';\r\n      if (!grouped[location]) {\r\n        grouped[location] = [];\r\n      }\r\n      grouped[location].push(item);\r\n    });\r\n\r\n    return grouped;\r\n  }, [filteredItems]);\r\n\r\n  // Calculate statistics\r\n  const stats = useMemo(() => {\r\n    const totalItems = filteredItems.reduce((sum, item) => sum + item.quantity, 0);\r\n    const totalWeight = filteredItems.reduce(\r\n      (sum, item) => sum + (item.weight || 0) * item.quantity,\r\n      0\r\n    );\r\n    const totalValue = filteredItems.reduce(\r\n      (sum, item) => sum + (item.value || 0) * item.quantity,\r\n      0\r\n    );\r\n\r\n    return { totalItems, totalWeight, totalValue };\r\n  }, [filteredItems]);\r\n\r\n  const handleEditItem = (item: InventoryItem) => {\r\n    setEditingItem(item);\r\n    setFormData({\r\n      name: item.name,\r\n      category: item.category,\r\n      location: item.location || 'Backpack',\r\n      rarity: item.rarity,\r\n      type: item.type,\r\n      quantity: item.quantity,\r\n      weight: item.weight,\r\n      value: item.value,\r\n      description: item.description || '',\r\n      tags: item.tags,\r\n    });\r\n    setShowItemForm(true);\r\n  };\r\n\r\n  const handleFormSubmit = (data: InventoryFormData) => {\r\n    if (editingItem && onUpdateItem) {\r\n      onUpdateItem(editingItem.id, data);\r\n    } else if (onAddItem) {\r\n      onAddItem(data);\r\n    }\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setShowItemForm(false);\r\n    setEditingItem(null);\r\n    setFormData(initialInventoryFormData);\r\n  };\r\n\r\n  const toggleLocationCollapse = (location: string) => {\r\n    setCollapsedLocations(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(location)) {\r\n        next.delete(location);\r\n      } else {\r\n        next.add(location);\r\n      }\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const activeFilterCount = [\r\n    filterLocation !== 'all' ? 1 : 0,\r\n    filterCategory !== 'all' ? 1 : 0,\r\n    searchQuery ? 1 : 0,\r\n  ].reduce((a, b) => a + b, 0);\r\n\r\n  return (\r\n    <div className={`rounded-lg border-2 border-gray-200 bg-white shadow-sm ${className}`}>\r\n      {/* Header */}\r\n      <div className=\"border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"flex items-center gap-2 text-xl font-bold text-gray-800\">\r\n            <Package className=\"h-6 w-6 text-purple-600\" />\r\n            {compact ? 'Inventory' : 'Inventory & Equipment'}\r\n          </h2>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Badge variant=\"primary\" size=\"md\">\r\n              {filteredItems.length} items\r\n            </Badge>\r\n            {!readonly && !hideAddButton && onAddItem && (\r\n              <Button\r\n                onClick={() => setShowItemForm(true)}\r\n                variant=\"primary\"\r\n                size=\"sm\"\r\n                leftIcon={<Plus size={16} />}\r\n                className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n              >\r\n                Add Item\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Statistics */}\r\n        <div className=\"grid grid-cols-3 gap-3\">\r\n          <div className=\"rounded-lg border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-violet-50 p-3 text-center\">\r\n            <div className=\"text-2xl font-bold text-purple-800\">\r\n              {stats.totalItems}\r\n            </div>\r\n            <div className=\"text-xs font-medium text-purple-600\">Total Items</div>\r\n          </div>\r\n          <div className=\"rounded-lg border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-cyan-50 p-3 text-center\">\r\n            <div className=\"text-2xl font-bold text-blue-800\">\r\n              {stats.totalWeight.toFixed(1)}\r\n            </div>\r\n            <div className=\"text-xs font-medium text-blue-600\">lbs</div>\r\n          </div>\r\n          <div className=\"rounded-lg border-2 border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50 p-3 text-center\">\r\n            <div className=\"text-xl font-bold text-yellow-800\">\r\n              {formatCurrencyFromCopper(stats.totalValue)}\r\n            </div>\r\n            <div className=\"text-xs font-medium text-yellow-600\">Total Value</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      {!hideFilters && !showOnlyLocation && (\r\n        <div className=\"border-b-2 border-gray-200 bg-gray-50 p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"flex items-center gap-2 text-sm font-bold text-gray-800 uppercase tracking-wide\">\r\n              <Filter className=\"h-4 w-4\" />\r\n              Filters\r\n              {activeFilterCount > 0 && (\r\n                <Badge variant=\"primary\" size=\"sm\">\r\n                  {activeFilterCount}\r\n                </Badge>\r\n              )}\r\n            </h3>\r\n            <Button\r\n              onClick={() => setShowFilters(!showFilters)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n            >\r\n              {showFilters ? 'Hide' : 'Show'}\r\n            </Button>\r\n          </div>\r\n\r\n          {showFilters && (\r\n            <>\r\n              <div className=\"mb-3\">\r\n                <label className=\"mb-2 flex items-center gap-1 text-sm font-medium text-gray-700\">\r\n                  <Search className=\"h-3 w-3\" />\r\n                  Search Items\r\n                </label>\r\n                <Input\r\n                  leftIcon={<Search className=\"h-4 w-4\" />}\r\n                  value={searchQuery}\r\n                  onChange={e => setSearchQuery(e.target.value)}\r\n                  placeholder=\"Search by name, description, or tags...\"\r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\r\n                <div>\r\n                  <label className=\"mb-2 flex items-center gap-1 text-sm font-medium text-gray-700\">\r\n                    <MapPin className=\"h-3 w-3\" />\r\n                    Location\r\n                  </label>\r\n                  <SelectField\r\n                    value={filterLocation}\r\n                    onValueChange={setFilterLocation}\r\n                  >\r\n                    <SelectItem value=\"all\">All Locations</SelectItem>\r\n                    {allLocations.map(location => (\r\n                      <SelectItem key={location} value={location}>\r\n                        {location}\r\n                      </SelectItem>\r\n                    ))}\r\n                    <SelectItem value=\"Unassigned\">Unassigned</SelectItem>\r\n                  </SelectField>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"mb-2 flex items-center gap-1 text-sm font-medium text-gray-700\">\r\n                    <Package className=\"h-3 w-3\" />\r\n                    Category\r\n                  </label>\r\n                  <SelectField\r\n                    value={filterCategory}\r\n                    onValueChange={setFilterCategory}\r\n                  >\r\n                    <SelectItem value=\"all\">All Categories</SelectItem>\r\n                    {ITEM_CATEGORIES.map(category => (\r\n                      <SelectItem key={category} value={category}>\r\n                        {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectField>\r\n                </div>\r\n              </div>\r\n\r\n              {activeFilterCount > 0 && (\r\n                <Button\r\n                  onClick={() => {\r\n                    setFilterLocation('all');\r\n                    setFilterCategory('all');\r\n                    setSearchQuery('');\r\n                  }}\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  leftIcon={<X size={14} />}\r\n                  className=\"mt-3\"\r\n                >\r\n                  Clear Filters\r\n                </Button>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Items Display */}\r\n      <div className=\"p-6\">\r\n        {filteredItems.length > 0 ? (\r\n          hideLocations ? (\r\n            // Simple list view\r\n            <DragDropList\r\n              items={filteredItems}\r\n              onReorder={onReorderItems || (() => {})}\r\n              keyExtractor={item => item.id}\r\n              className=\"space-y-3\"\r\n              showDragHandle={!readonly && !!onReorderItems}\r\n              dragHandlePosition=\"left\"\r\n              renderItem={item => (\r\n                <ItemCard\r\n                  item={item}\r\n                  onEdit={readonly || !onUpdateItem ? undefined : handleEditItem}\r\n                  onDelete={\r\n                    readonly || !onDeleteItem ? undefined : () => onDeleteItem(item.id)\r\n                  }\r\n                  onQuantityChange={\r\n                    readonly || !onQuantityChange\r\n                      ? undefined\r\n                      : (quantity: number) => onQuantityChange(item.id, quantity)\r\n                  }\r\n                  compact={compact}\r\n                />\r\n              )}\r\n            />\r\n          ) : (\r\n            // Grouped by location\r\n            <div className=\"space-y-4\">\r\n              {Object.entries(itemsByLocation).map(([location, locationItems]) => {\r\n                const isCollapsed = collapsedLocations.has(location);\r\n                \r\n                return (\r\n                  <div key={location} className=\"rounded-lg border-2 border-gray-200 bg-white\">\r\n                    <button\r\n                      onClick={() => toggleLocationCollapse(location)}\r\n                      className=\"w-full flex items-center justify-between p-4 text-left transition-colors hover:bg-gray-50\"\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {isCollapsed ? (\r\n                          <ChevronRight className=\"h-4 w-4 text-purple-600\" />\r\n                        ) : (\r\n                          <ChevronDown className=\"h-4 w-4 text-purple-600\" />\r\n                        )}\r\n                        <MapPin className=\"h-4 w-4 text-purple-600\" />\r\n                        <h4 className=\"font-bold text-gray-800\">{location}</h4>\r\n                        <Badge variant=\"secondary\" size=\"sm\">\r\n                          {locationItems.length}\r\n                        </Badge>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        {isCollapsed ? 'Click to expand' : 'Click to collapse'}\r\n                      </div>\r\n                    </button>\r\n                    \r\n                    {!isCollapsed && (\r\n                      <div className=\"space-y-3 p-4 pt-0\">\r\n                        {locationItems.map(item => (\r\n                          <ItemCard\r\n                            key={item.id}\r\n                            item={item}\r\n                            onEdit={readonly || !onUpdateItem ? undefined : handleEditItem}\r\n                            onDelete={\r\n                              readonly || !onDeleteItem\r\n                                ? undefined\r\n                                : () => onDeleteItem(item.id)\r\n                            }\r\n                            onQuantityChange={\r\n                              readonly || !onQuantityChange\r\n                                ? undefined\r\n                                : (quantity: number) => onQuantityChange(item.id, quantity)\r\n                            }\r\n                            compact={compact}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div className=\"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-12 text-center\">\r\n            <Package className=\"mx-auto mb-3 h-12 w-12 text-gray-300\" />\r\n            <p className=\"font-medium text-gray-600\">No items found</p>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              {activeFilterCount > 0\r\n                ? 'Try adjusting your filters or add new items'\r\n                : 'Add items to track your equipment and supplies'}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Item Form Modal */}\r\n      <ItemForm\r\n        isOpen={showItemForm}\r\n        onClose={resetForm}\r\n        onSubmit={handleFormSubmit}\r\n        initialData={formData}\r\n        availableLocations={allLocations}\r\n        isEditing={!!editingItem}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2774, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/CurrencyManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Currency } from '@/types/character';\r\nimport { Coins, Plus, Minus, Info } from 'lucide-react';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Input } from '@/components/ui/forms/input';\r\n\r\nconst CURRENCY_TYPES: {\r\n  [key in keyof Currency]: { name: string; abbr: string; color: string; badgeVariant: 'secondary' | 'warning' | 'success' | 'neutral' | 'danger' };\r\n} = {\r\n  platinum: { name: 'Platinum', abbr: 'pp', color: 'text-slate-700', badgeVariant: 'neutral' },\r\n  gold: { name: 'Gold', abbr: 'gp', color: 'text-yellow-700', badgeVariant: 'warning' },\r\n  electrum: { name: 'Electrum', abbr: 'ep', color: 'text-green-700', badgeVariant: 'success' },\r\n  silver: { name: 'Silver', abbr: 'sp', color: 'text-gray-700', badgeVariant: 'secondary' },\r\n  copper: { name: 'Copper', abbr: 'cp', color: 'text-orange-700', badgeVariant: 'danger' },\r\n};\r\n\r\n// Currency conversion rates (all relative to copper)\r\nconst CURRENCY_VALUES = {\r\n  platinum: 1000,\r\n  gold: 100,\r\n  electrum: 50,\r\n  silver: 10,\r\n  copper: 1,\r\n};\r\n\r\ninterface CurrencyManagerProps {\r\n  currency: Currency;\r\n  onAddCurrency?: (type: keyof Currency, amount: number) => void;\r\n  onSubtractCurrency?: (type: keyof Currency, amount: number) => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  hideControls?: boolean;\r\n  hideConversionInfo?: boolean;\r\n  showOnlyTotal?: boolean;\r\n  hideIndividualCurrencies?: boolean;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function CurrencyManager({\r\n  currency,\r\n  onAddCurrency,\r\n  onSubtractCurrency,\r\n  readonly = false,\r\n  compact = false,\r\n  hideControls = false,\r\n  hideConversionInfo = false,\r\n  showOnlyTotal = false,\r\n  hideIndividualCurrencies = false,\r\n  className = '',\r\n}: CurrencyManagerProps) {\r\n  const [currencyAmounts, setCurrencyAmounts] = useState<Currency>({\r\n    copper: 0,\r\n    silver: 0,\r\n    electrum: 0,\r\n    gold: 0,\r\n    platinum: 0,\r\n  });\r\n\r\n  // Calculate total wealth in copper pieces\r\n  const totalWealthInCopper = Object.entries(currency).reduce(\r\n    (total, [type, amount]) => {\r\n      return total + amount * CURRENCY_VALUES[type as keyof Currency];\r\n    },\r\n    0\r\n  );\r\n\r\n  // Convert total wealth to the most appropriate denominations\r\n  const getWealthBreakdown = (totalCopper: number) => {\r\n    if (totalCopper === 0) return 'No wealth';\r\n\r\n    const breakdown = [];\r\n    let remaining = totalCopper;\r\n\r\n    // Convert to highest denominations first\r\n    if (remaining >= CURRENCY_VALUES.platinum) {\r\n      const pp = Math.floor(remaining / CURRENCY_VALUES.platinum);\r\n      breakdown.push(`${pp} pp`);\r\n      remaining %= CURRENCY_VALUES.platinum;\r\n    }\r\n\r\n    if (remaining >= CURRENCY_VALUES.gold) {\r\n      const gp = Math.floor(remaining / CURRENCY_VALUES.gold);\r\n      breakdown.push(`${gp} gp`);\r\n      remaining %= CURRENCY_VALUES.gold;\r\n    }\r\n\r\n    if (remaining >= CURRENCY_VALUES.electrum) {\r\n      const ep = Math.floor(remaining / CURRENCY_VALUES.electrum);\r\n      breakdown.push(`${ep} ep`);\r\n      remaining %= CURRENCY_VALUES.electrum;\r\n    }\r\n\r\n    if (remaining >= CURRENCY_VALUES.silver) {\r\n      const sp = Math.floor(remaining / CURRENCY_VALUES.silver);\r\n      breakdown.push(`${sp} sp`);\r\n      remaining %= CURRENCY_VALUES.silver;\r\n    }\r\n\r\n    if (remaining > 0) {\r\n      breakdown.push(`${remaining} cp`);\r\n    }\r\n\r\n    // Show up to 3 most significant denominations\r\n    return breakdown.slice(0, 3).join(', ');\r\n  };\r\n\r\n  const handleCurrencyChange = (type: keyof Currency, value: string) => {\r\n    const amount = parseInt(value) || 0;\r\n    setCurrencyAmounts(prev => ({ ...prev, [type]: amount }));\r\n  };\r\n\r\n  const addCurrencyAmount = (type: keyof Currency) => {\r\n    const amount = currencyAmounts[type];\r\n    if (amount > 0 && onAddCurrency) {\r\n      onAddCurrency(type, amount);\r\n      setCurrencyAmounts(prev => ({ ...prev, [type]: 0 }));\r\n    }\r\n  };\r\n\r\n  const subtractCurrencyAmount = (type: keyof Currency) => {\r\n    const amount = currencyAmounts[type];\r\n    if (amount > 0 && onSubtractCurrency) {\r\n      onSubtractCurrency(type, amount);\r\n      setCurrencyAmounts(prev => ({ ...prev, [type]: 0 }));\r\n    }\r\n  };\r\n\r\n  const containerClasses = compact\r\n    ? `bg-white rounded-lg shadow-sm border-2 border-yellow-200 p-4 ${className}`\r\n    : `bg-white rounded-lg shadow-sm border-2 border-yellow-200 p-6 ${className}`;\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"mb-6 flex items-center justify-between border-b-2 border-yellow-200 pb-4\">\r\n        <h2\r\n          className={`flex items-center gap-2 font-bold text-amber-800 ${compact ? 'text-base' : 'text-xl'}`}\r\n        >\r\n          <Coins className={compact ? 'h-5 w-5' : 'h-6 w-6'} />\r\n          {compact ? 'Currency' : 'Currency & Wealth'}\r\n        </h2>\r\n        <Badge variant=\"warning\" size=\"md\">\r\n          {totalWealthInCopper.toLocaleString()} cp\r\n        </Badge>\r\n      </div>\r\n\r\n      {/* Show only total wealth */}\r\n      {showOnlyTotal ? (\r\n        <div className=\"rounded-lg border-2 border-yellow-300 bg-gradient-to-r from-yellow-50 to-amber-50 p-6 text-center\">\r\n          <div\r\n            className={`font-bold text-amber-800 ${compact ? 'mb-2 text-sm' : 'mb-2 text-lg'}`}\r\n          >\r\n            Total Wealth\r\n          </div>\r\n          <div\r\n            className={`font-bold text-amber-900 ${compact ? 'text-xl' : 'text-2xl'}`}\r\n          >\r\n            {getWealthBreakdown(totalWealthInCopper)}\r\n          </div>\r\n          {!compact && (\r\n            <Badge variant=\"warning\" size=\"md\" className=\"mt-3\">\r\n              {totalWealthInCopper.toLocaleString()} copper pieces\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Current Currency Display */}\r\n          {!hideIndividualCurrencies && (\r\n            <div\r\n              className={`grid gap-4 ${compact ? 'mb-4 grid-cols-3' : 'mb-6 grid-cols-2 sm:grid-cols-5'}`}\r\n            >\r\n              {Object.entries(CURRENCY_TYPES).map(([type, config]) => (\r\n                <div key={type} className=\"text-center\">\r\n                  <div\r\n                    className={`rounded-lg border-2 border-yellow-200 bg-gradient-to-b from-yellow-50 to-amber-50 transition-all hover:shadow-md hover:border-yellow-300 ${compact ? 'p-3' : 'p-4'}`}\r\n                  >\r\n                    <div\r\n                      className={`font-bold ${config.color} ${compact ? 'mb-1 text-2xl' : 'mb-2 text-4xl'}`}\r\n                    >\r\n                      {currency[type as keyof Currency] || 0}\r\n                    </div>\r\n                    <Badge variant={config.badgeVariant} size=\"sm\">\r\n                      {config.abbr}\r\n                    </Badge>\r\n                    {!compact && (\r\n                      <div className=\"mt-2 text-xs font-medium text-gray-600\">\r\n                        {config.name}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Total Wealth */}\r\n          <div\r\n            className={`rounded-lg border-2 border-yellow-300 bg-gradient-to-r from-yellow-50 to-amber-50 p-6 text-center ${compact ? 'mb-4' : 'mb-6'}`}\r\n          >\r\n            <div\r\n              className={`font-bold text-amber-800 ${compact ? 'mb-2 text-sm' : 'mb-2 text-lg'}`}\r\n            >\r\n              Total Wealth\r\n            </div>\r\n            <div\r\n              className={`font-bold text-amber-900 ${compact ? 'text-xl' : 'text-2xl'}`}\r\n            >\r\n              {getWealthBreakdown(totalWealthInCopper)}\r\n            </div>\r\n            {!compact && (\r\n              <Badge variant=\"warning\" size=\"md\" className=\"mt-3\">\r\n                {totalWealthInCopper.toLocaleString()} copper pieces\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Add/Subtract Currency */}\r\n          {!readonly &&\r\n            !hideControls &&\r\n            (onAddCurrency || onSubtractCurrency) && (\r\n              <div\r\n                className={`rounded-lg border-2 border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50 ${compact ? 'p-4' : 'p-6'}`}\r\n              >\r\n                <h3\r\n                  className={`font-bold text-amber-800 ${compact ? 'mb-4 text-sm uppercase tracking-wide' : 'mb-4 text-base uppercase tracking-wide border-b-2 border-yellow-200 pb-2'}`}\r\n                >\r\n                  Manage Currency\r\n                </h3>\r\n                <div\r\n                  className={`grid gap-4 ${compact ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-5'}`}\r\n                >\r\n                  {Object.entries(CURRENCY_TYPES).map(([type, config]) => (\r\n                    <div key={type} className=\"space-y-2\">\r\n                      <label\r\n                        className={`block font-bold text-amber-800 ${compact ? 'text-xs' : 'text-sm'}`}\r\n                      >\r\n                        {config.name}\r\n                      </label>\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={currencyAmounts[type as keyof Currency] || ''}\r\n                        onChange={e =>\r\n                          handleCurrencyChange(\r\n                            type as keyof Currency,\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        placeholder=\"0\"\r\n                        min={0}\r\n                        className=\"text-center\"\r\n                      />\r\n                      <div className=\"flex gap-1\">\r\n                        {onAddCurrency && (\r\n                          <Button\r\n                            onClick={() =>\r\n                              addCurrencyAmount(type as keyof Currency)\r\n                            }\r\n                            variant=\"success\"\r\n                            size=\"xs\"\r\n                            fullWidth\r\n                            leftIcon={<Plus size={12} />}\r\n                            disabled={currencyAmounts[type as keyof Currency] <= 0}\r\n                          >\r\n                            Add\r\n                          </Button>\r\n                        )}\r\n                        {onSubtractCurrency && (\r\n                          <Button\r\n                            onClick={() =>\r\n                              subtractCurrencyAmount(type as keyof Currency)\r\n                            }\r\n                            variant=\"danger\"\r\n                            size=\"xs\"\r\n                            fullWidth\r\n                            leftIcon={<Minus size={12} />}\r\n                            disabled={currencyAmounts[type as keyof Currency] <= 0}\r\n                          >\r\n                            Spend\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n          {/* Currency Conversion Helper */}\r\n          {!hideConversionInfo && !compact && (\r\n            <div className=\"mt-6 rounded-lg border-2 border-amber-200 bg-gradient-to-r from-amber-50 to-yellow-50 p-5\">\r\n              <h4 className=\"mb-3 flex items-center gap-2 text-base font-bold text-amber-800 uppercase tracking-wide border-b-2 border-amber-200 pb-2\">\r\n                <Info className=\"h-4 w-4\" />\r\n                Currency Conversion\r\n              </h4>\r\n              <div className=\"space-y-2 text-sm text-amber-800\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant=\"neutral\" size=\"sm\">1 pp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"warning\" size=\"sm\">10 gp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"secondary\" size=\"sm\">100 sp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"danger\" size=\"sm\">1,000 cp</Badge>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant=\"warning\" size=\"sm\">1 gp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"secondary\" size=\"sm\">10 sp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"danger\" size=\"sm\">100 cp</Badge>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant=\"success\" size=\"sm\">1 ep</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"secondary\" size=\"sm\">5 sp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"danger\" size=\"sm\">50 cp</Badge>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant=\"secondary\" size=\"sm\">1 sp</Badge>\r\n                  <span>=</span>\r\n                  <Badge variant=\"danger\" size=\"sm\">10 cp</Badge>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3437, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/character/index.ts"],"sourcesContent":["export { CharacterHeader } from './CharacterHeader';\r\nexport { HeroicInspirationTracker } from './HeroicInspirationTracker';\r\nexport { XPTracker } from './XPTracker';\r\nexport { TraitTracker } from './TraitTracker';\r\nexport { InventoryManager } from './InventoryManager';\r\nexport { CurrencyManager } from './CurrencyManager';\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 3457, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/combat/HitPointTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  Heart,\r\n  Plus,\r\n  Minus,\r\n  RotateCcw,\r\n  Calculator,\r\n  Edit3,\r\n  Zap,\r\n  Skull,\r\n  Shield,\r\n  HelpCircle,\r\n} from 'lucide-react';\r\nimport { HitPoints, ClassInfo } from '@/types/character';\r\nimport { isDying, isDead, isStabilized } from '@/utils/hpCalculations';\r\n\r\ninterface HitPointTrackerProps {\r\n  hitPoints: HitPoints;\r\n  classInfo?: ClassInfo;\r\n  level?: number;\r\n  constitutionScore?: number;\r\n  onApplyDamage?: (damage: number) => void;\r\n  onApplyHealing?: (healing: number) => void;\r\n  onAddTemporaryHP?: (tempHP: number) => void;\r\n  onMakeDeathSave?: (isSuccess: boolean, isCritical?: boolean) => void;\r\n  onResetDeathSaves?: () => void;\r\n  onToggleCalculationMode?: () => void;\r\n  onRecalculateMaxHP?: () => void;\r\n  onUpdateHitPoints?: (updates: Partial<HitPoints>) => void;\r\n\r\n  // Display options\r\n  readonly?: boolean;\r\n  compact?: boolean;\r\n  showControls?: boolean;\r\n  showDeathSaves?: boolean;\r\n  showCalculationInfo?: boolean;\r\n  hideLabels?: boolean;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport function HitPointTracker({\r\n  hitPoints,\r\n  classInfo,\r\n  level,\r\n  onApplyDamage,\r\n  onApplyHealing,\r\n  onAddTemporaryHP,\r\n  onMakeDeathSave,\r\n  onResetDeathSaves,\r\n  onToggleCalculationMode,\r\n  onUpdateHitPoints,\r\n  readonly = false,\r\n  compact = false,\r\n  showControls = true,\r\n  showDeathSaves = true,\r\n  showCalculationInfo = true,\r\n  hideLabels = false,\r\n  className = '',\r\n}: HitPointTrackerProps) {\r\n  const [damageAmount, setDamageAmount] = useState('');\r\n  const [healingAmount, setHealingAmount] = useState('');\r\n  const [tempHPAmount, setTempHPAmount] = useState('');\r\n  const [deathSaveResult, setDeathSaveResult] = useState<number | null>(null);\r\n\r\n  const isCharacterDying = isDying(hitPoints);\r\n  const isCharacterDead = isDead(hitPoints);\r\n  const isCharacterStabilized = isStabilized(hitPoints);\r\n  const isUnconscious = hitPoints.current === 0;\r\n\r\n  const handleDamage = () => {\r\n    const damage = parseInt(damageAmount);\r\n    if (!isNaN(damage) && damage > 0 && onApplyDamage) {\r\n      onApplyDamage(damage);\r\n      setDamageAmount('');\r\n    }\r\n  };\r\n\r\n  const handleHealing = () => {\r\n    const healing = parseInt(healingAmount);\r\n    if (!isNaN(healing) && healing > 0 && onApplyHealing) {\r\n      onApplyHealing(healing);\r\n      setHealingAmount('');\r\n    }\r\n  };\r\n\r\n  const handleTempHP = () => {\r\n    const tempHP = parseInt(tempHPAmount);\r\n    if (!isNaN(tempHP) && tempHP > 0 && onAddTemporaryHP) {\r\n      onAddTemporaryHP(tempHP);\r\n      setTempHPAmount('');\r\n    }\r\n  };\r\n\r\n  const handleDeathSave = () => {\r\n    if (deathSaveResult === null || !onMakeDeathSave) return;\r\n\r\n    const isSuccess = deathSaveResult >= 10;\r\n    const isCritical = deathSaveResult === 20;\r\n\r\n    onMakeDeathSave(isSuccess, isCritical);\r\n    setDeathSaveResult(null);\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    if (isCharacterDead) return 'text-black bg-gray-800';\r\n    if (isCharacterDying) return 'text-red-800 bg-red-100';\r\n    if (isCharacterStabilized) return 'text-yellow-800 bg-yellow-100';\r\n    if (isUnconscious) return 'text-orange-800 bg-orange-100';\r\n    if (hitPoints.current <= hitPoints.max * 0.25)\r\n      return 'text-red-700 bg-red-50';\r\n    if (hitPoints.current <= hitPoints.max * 0.5)\r\n      return 'text-yellow-700 bg-yellow-50';\r\n    return 'text-green-700 bg-green-50';\r\n  };\r\n\r\n  const getCurrentHPBoxColor = () => {\r\n    if (isCharacterDead) return 'bg-gray-800 border-gray-900';\r\n    if (isCharacterDying) return 'bg-red-100 border-red-300';\r\n    if (isCharacterStabilized) return 'bg-yellow-50 border-yellow-300';\r\n    if (isUnconscious) return 'bg-orange-50 border-orange-300';\r\n    if (hitPoints.current <= hitPoints.max * 0.25)\r\n      return 'bg-red-50 border-red-200';\r\n    if (hitPoints.current <= hitPoints.max * 0.5)\r\n      return 'bg-yellow-50 border-yellow-200';\r\n    return 'bg-green-50 border-green-200';\r\n  };\r\n\r\n  const getCurrentHPTextColor = () => {\r\n    if (isCharacterDead) return 'text-white';\r\n    if (isCharacterDying) return 'text-red-800';\r\n    if (isCharacterStabilized) return 'text-yellow-800';\r\n    if (isUnconscious) return 'text-orange-800';\r\n    if (hitPoints.current <= hitPoints.max * 0.25) return 'text-red-800';\r\n    if (hitPoints.current <= hitPoints.max * 0.5) return 'text-yellow-800';\r\n    return 'text-green-800';\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (isCharacterDead) return 'üíÄ Dead';\r\n    if (isCharacterDying) return 'üíî Dying';\r\n    if (isCharacterStabilized) return 'üòµ Stabilized';\r\n    if (isUnconscious) return 'üòµ Unconscious';\r\n    return '‚ù§Ô∏è Alive';\r\n  };\r\n\r\n  const containerClasses = compact\r\n    ? `bg-white rounded-lg shadow border border-red-200 p-3 space-y-3 ${className}`\r\n    : `bg-white rounded-lg shadow-lg border border-red-200 p-6 space-y-6 ${className}`;\r\n\r\n  const gridSizeClasses = compact ? 'gap-1 sm:gap-2' : 'gap-2 sm:gap-4';\r\n  const minHeightClasses = compact\r\n    ? 'min-h-[60px]'\r\n    : 'min-h-[80px] sm:min-h-[90px]';\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      {!hideLabels && (\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3\r\n            className={`${compact ? 'text-base' : 'text-lg'} flex items-center gap-2 font-semibold text-red-800`}\r\n          >\r\n            <Heart size={compact ? 16 : 20} />\r\n            Hit Points\r\n          </h3>\r\n          <div\r\n            className={`rounded-full px-3 py-1 text-sm font-medium ${getStatusColor()}`}\r\n          >\r\n            {getStatusText()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* HP Display */}\r\n      <div className={`grid grid-cols-3 ${gridSizeClasses}`}>\r\n        <div className=\"text-center\">\r\n          <div\r\n            className={`rounded-lg border-2 p-2 ${compact ? 'sm:p-2' : 'sm:p-3'} transition-colors ${getCurrentHPBoxColor()} ${minHeightClasses} flex flex-col justify-center`}\r\n          >\r\n            <div\r\n              className={`mb-1 text-xs font-medium ${getCurrentHPTextColor()}`}\r\n            >\r\n              CURRENT\r\n            </div>\r\n            {readonly ? (\r\n              <div\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} font-bold ${getCurrentHPTextColor()}`}\r\n              >\r\n                {hitPoints.current}\r\n              </div>\r\n            ) : (\r\n              <input\r\n                type=\"number\"\r\n                value={hitPoints.current}\r\n                onChange={e =>\r\n                  onUpdateHitPoints?.({\r\n                    current: parseInt(e.target.value) || 0,\r\n                  })\r\n                }\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} w-full border-none bg-transparent text-center font-bold outline-none ${getCurrentHPTextColor()} leading-tight`}\r\n                min=\"0\"\r\n                max={hitPoints.max}\r\n                style={{ maxWidth: '100%' }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <div\r\n            className={`rounded-lg border-2 border-red-300 bg-red-100 p-2 ${compact ? 'sm:p-2' : 'sm:p-3'} relative ${minHeightClasses} flex flex-col justify-center`}\r\n          >\r\n            <div className=\"mb-1 flex items-center justify-center gap-1 text-xs font-medium text-red-800\">\r\n              <span className=\"hidden sm:inline\">MAXIMUM</span>\r\n              <span className=\"sm:hidden\">MAX</span>\r\n              {!readonly && onToggleCalculationMode && (\r\n                <button\r\n                  onClick={onToggleCalculationMode}\r\n                  className=\"text-red-600 transition-colors hover:text-red-800\"\r\n                  title={`Switch to ${hitPoints.calculationMode === 'auto' ? 'manual' : 'auto'} calculation`}\r\n                >\r\n                  {hitPoints.calculationMode === 'auto' ? (\r\n                    <Calculator size={12} />\r\n                  ) : (\r\n                    <Edit3 size={12} />\r\n                  )}\r\n                </button>\r\n              )}\r\n            </div>\r\n            {readonly ? (\r\n              <div\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} font-bold text-red-900`}\r\n              >\r\n                {hitPoints.max}\r\n              </div>\r\n            ) : (\r\n              <input\r\n                type=\"number\"\r\n                value={hitPoints.max}\r\n                onChange={e =>\r\n                  onUpdateHitPoints?.({ max: parseInt(e.target.value) || 0 })\r\n                }\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} w-full border-none bg-transparent text-center leading-tight font-bold text-red-900 outline-none`}\r\n                disabled={hitPoints.calculationMode === 'auto'}\r\n                min=\"1\"\r\n                style={{ maxWidth: '100%' }}\r\n              />\r\n            )}\r\n            {hitPoints.calculationMode === 'auto' && (\r\n              <div className=\"absolute -top-1 -right-1\">\r\n                <div className=\"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white\">\r\n                  AUTO\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <div\r\n            className={`rounded-lg border-2 border-blue-200 bg-blue-50 p-2 ${compact ? 'sm:p-2' : 'sm:p-3'} ${minHeightClasses} flex flex-col justify-center`}\r\n          >\r\n            <div className=\"mb-1 text-xs font-medium text-blue-700\">\r\n              <span>TEMP</span>\r\n            </div>\r\n            {readonly ? (\r\n              <div\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} font-bold text-blue-800`}\r\n              >\r\n                {hitPoints.temporary}\r\n              </div>\r\n            ) : (\r\n              <input\r\n                type=\"number\"\r\n                value={hitPoints.temporary}\r\n                onChange={e =>\r\n                  onUpdateHitPoints?.({\r\n                    temporary: parseInt(e.target.value) || 0,\r\n                  })\r\n                }\r\n                className={`${compact ? 'text-lg' : 'text-lg sm:text-xl'} w-full border-none bg-transparent text-center leading-tight font-bold text-blue-800 outline-none`}\r\n                min=\"0\"\r\n                style={{ maxWidth: '100%' }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* HP Management Actions */}\r\n      {!readonly && showControls && (\r\n        <div className=\"space-y-3\">\r\n          {/* Damage */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium text-red-700\">\r\n              Apply Damage\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"number\"\r\n                value={damageAmount}\r\n                onChange={e => setDamageAmount(e.target.value)}\r\n                placeholder=\"Amount\"\r\n                className=\"w-24 rounded-md border border-red-300 px-3 py-2 text-center text-gray-800 focus:border-red-500 focus:ring-2 focus:ring-red-500\"\r\n                min=\"1\"\r\n              />\r\n              <button\r\n                onClick={handleDamage}\r\n                disabled={!damageAmount || parseInt(damageAmount) <= 0}\r\n                className=\"flex flex-1 items-center justify-center gap-2 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:bg-gray-400\"\r\n              >\r\n                <Minus size={16} />\r\n                Apply Damage\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Healing */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium text-green-700\">\r\n              Apply Healing\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"number\"\r\n                value={healingAmount}\r\n                onChange={e => setHealingAmount(e.target.value)}\r\n                placeholder=\"Amount\"\r\n                className=\"w-24 rounded-md border border-green-300 px-3 py-2 text-center text-gray-800 focus:border-green-500 focus:ring-2 focus:ring-green-500\"\r\n                min=\"1\"\r\n              />\r\n              <button\r\n                onClick={handleHealing}\r\n                disabled={!healingAmount || parseInt(healingAmount) <= 0}\r\n                className=\"flex flex-1 items-center justify-center gap-2 rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-green-700 disabled:cursor-not-allowed disabled:bg-gray-400\"\r\n              >\r\n                <Plus size={16} />\r\n                Apply Healing\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Temporary HP */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"block text-sm font-medium text-blue-700\">\r\n              Add Temporary HP\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"number\"\r\n                value={tempHPAmount}\r\n                onChange={e => setTempHPAmount(e.target.value)}\r\n                placeholder=\"Amount\"\r\n                className=\"w-24 rounded-md border border-blue-300 px-3 py-2 text-center text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500\"\r\n                min=\"1\"\r\n              />\r\n              <button\r\n                onClick={handleTempHP}\r\n                disabled={!tempHPAmount || parseInt(tempHPAmount) <= 0}\r\n                className=\"flex flex-1 items-center justify-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-gray-400\"\r\n              >\r\n                <Shield size={16} />\r\n                Add Temp HP\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Death Saving Throws */}\r\n      {showDeathSaves &&\r\n        (isCharacterDying || isCharacterStabilized || hitPoints.deathSaves) && (\r\n          <div className=\"border-t border-gray-200 pt-4\">\r\n            <div className=\"mb-4 flex items-center justify-between\">\r\n              <h4 className=\"text-md flex items-center gap-2 font-semibold text-gray-800\">\r\n                <Skull size={18} />\r\n                Death Saving Throws\r\n              </h4>\r\n              {!readonly && onResetDeathSaves && (\r\n                <button\r\n                  onClick={onResetDeathSaves}\r\n                  className=\"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800\"\r\n                  title=\"Reset death saves\"\r\n                >\r\n                  <RotateCcw size={14} />\r\n                  Reset\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {hitPoints.deathSaves && (\r\n              <div className=\"space-y-4\">\r\n                {/* Success/Failure Display */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <div className=\"mb-2 text-sm font-medium text-green-700\">\r\n                      Successes\r\n                    </div>\r\n                    <div className=\"flex gap-1\">\r\n                      {[1, 2, 3].map(i => (\r\n                        <div\r\n                          key={i}\r\n                          className={`h-6 w-6 rounded-full border-2 ${\r\n                            i <= hitPoints.deathSaves!.successes\r\n                              ? 'border-green-500 bg-green-500'\r\n                              : 'border-gray-400 bg-white'\r\n                          }`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"mb-2 text-sm font-medium text-red-700\">\r\n                      Failures\r\n                    </div>\r\n                    <div className=\"flex gap-1\">\r\n                      {[1, 2, 3].map(i => (\r\n                        <div\r\n                          key={i}\r\n                          className={`h-6 w-6 rounded-full border-2 ${\r\n                            i <= hitPoints.deathSaves!.failures\r\n                              ? 'border-red-500 bg-red-500'\r\n                              : 'border-gray-400 bg-white'\r\n                          }`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Death Save Roll */}\r\n                {!readonly && isCharacterDying && onMakeDeathSave && (\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"text-sm font-medium text-gray-700\">\r\n                      Make Death Saving Throw\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={deathSaveResult || ''}\r\n                        onChange={e =>\r\n                          setDeathSaveResult(parseInt(e.target.value) || null)\r\n                        }\r\n                        placeholder=\"d20 result\"\r\n                        className=\"w-24 rounded-md border border-gray-300 px-3 py-2 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-500\"\r\n                        min=\"1\"\r\n                        max=\"20\"\r\n                      />\r\n                      <button\r\n                        onClick={handleDeathSave}\r\n                        disabled={\r\n                          deathSaveResult === null ||\r\n                          deathSaveResult < 1 ||\r\n                          deathSaveResult > 20\r\n                        }\r\n                        className=\"flex items-center gap-1 rounded-md bg-purple-600 px-4 py-2 text-white transition-colors hover:bg-purple-700 disabled:cursor-not-allowed disabled:bg-gray-400\"\r\n                      >\r\n                        <Zap size={16} />\r\n                        Roll Save\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"space-y-1 text-xs text-gray-600\">\r\n                      <p>‚Ä¢ Roll 10 or higher to succeed</p>\r\n                      <p>‚Ä¢ Natural 20: Regain 1 HP and become conscious</p>\r\n                      <p>‚Ä¢ 3 successes: Stabilized but unconscious</p>\r\n                      <p>‚Ä¢ 3 failures: Dead</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n      {/* HP Calculation Mode Info */}\r\n      {showCalculationInfo && classInfo && level && !compact && (\r\n        <div className=\"border-t border-gray-200 pt-4\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <HelpCircle size={16} className=\"mt-0.5 text-gray-500\" />\r\n            <div className=\"space-y-1 text-xs text-gray-600\">\r\n              <p>\r\n                <strong>Auto Mode:</strong> Max HP calculated using D&D 5e rules\r\n                (Level 1: full hit die + CON, subsequent levels: average hit die\r\n                + CON)\r\n              </p>\r\n              <p>\r\n                <strong>Manual Mode:</strong> Set your own maximum HP value\r\n              </p>\r\n              {hitPoints.calculationMode === 'auto' && (\r\n                <p className=\"text-blue-600\">\r\n                  Current calculation: Level {level} {classInfo.name} ={' '}\r\n                  {hitPoints.max} HP\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4320, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/shared/combat/index.ts"],"sourcesContent":["export { HitPointTracker } from './HitPointTracker';\r\n"],"names":[],"mappings":";AAAA","debugId":null}}]
}