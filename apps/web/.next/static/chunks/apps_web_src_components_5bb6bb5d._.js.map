{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/WeaponProficiencies.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { Shield, Plus, X } from 'lucide-react';\r\nimport { Checkbox, Input, Button } from '@/components/ui/forms';\r\n\r\nexport const WeaponProficiencies: React.FC = () => {\r\n  const { character, updateCharacter } = useCharacterStore();\r\n  const [specificWeaponInput, setSpecificWeaponInput] = useState('');\r\n\r\n  const toggleSimpleWeapons = () => {\r\n    updateCharacter({\r\n      weaponProficiencies: {\r\n        ...character.weaponProficiencies,\r\n        simpleWeapons: !character.weaponProficiencies.simpleWeapons,\r\n      },\r\n    });\r\n  };\r\n\r\n  const toggleMartialWeapons = () => {\r\n    updateCharacter({\r\n      weaponProficiencies: {\r\n        ...character.weaponProficiencies,\r\n        martialWeapons: !character.weaponProficiencies.martialWeapons,\r\n      },\r\n    });\r\n  };\r\n\r\n  const addSpecificWeapon = () => {\r\n    if (\r\n      specificWeaponInput.trim() &&\r\n      !character.weaponProficiencies.specificWeapons.includes(\r\n        specificWeaponInput.trim().toLowerCase()\r\n      )\r\n    ) {\r\n      updateCharacter({\r\n        weaponProficiencies: {\r\n          ...character.weaponProficiencies,\r\n          specificWeapons: [\r\n            ...character.weaponProficiencies.specificWeapons,\r\n            specificWeaponInput.trim().toLowerCase(),\r\n          ],\r\n        },\r\n      });\r\n      setSpecificWeaponInput('');\r\n    }\r\n  };\r\n\r\n  const removeSpecificWeapon = (weaponName: string) => {\r\n    updateCharacter({\r\n      weaponProficiencies: {\r\n        ...character.weaponProficiencies,\r\n        specificWeapons: character.weaponProficiencies.specificWeapons.filter(\r\n          w => w !== weaponName\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-lg border border-amber-200 bg-white p-4 shadow-lg\">\r\n      <h2 className=\"mb-3 flex items-center gap-2 border-b border-gray-200 pb-2 text-lg font-bold text-gray-800\">\r\n        <Shield className=\"text-blue-600\" size={20} />\r\n        Weapon Proficiencies\r\n      </h2>\r\n\r\n      <div className=\"space-y-3\">\r\n        {/* Category Proficiencies */}\r\n        <div className=\"space-y-2\">\r\n          <Checkbox\r\n            checked={character.weaponProficiencies.simpleWeapons}\r\n            onCheckedChange={toggleSimpleWeapons}\r\n            label=\"Simple Weapons\"\r\n            size=\"sm\"\r\n            variant=\"primary\"\r\n            className=\"rounded-lg p-2 transition-colors hover:bg-blue-50\"\r\n          />\r\n\r\n          <Checkbox\r\n            checked={character.weaponProficiencies.martialWeapons}\r\n            onCheckedChange={toggleMartialWeapons}\r\n            label=\"Martial Weapons\"\r\n            size=\"sm\"\r\n            variant=\"primary\"\r\n            className=\"rounded-lg p-2 transition-colors hover:bg-blue-50\"\r\n          />\r\n        </div>\r\n\r\n        {/* Specific Weapons */}\r\n        <div className=\"mt-4\">\r\n          <h4 className=\"mb-2 text-sm font-semibold text-gray-700\">\r\n            Specific Weapons\r\n          </h4>\r\n\r\n          <div className=\"mb-2 flex gap-2\">\r\n            <Input\r\n              type=\"text\"\r\n              value={specificWeaponInput}\r\n              onChange={e => setSpecificWeaponInput(e.target.value)}\r\n              placeholder=\"Rapier, Longbow, etc.\"\r\n              size=\"sm\"\r\n              className=\"flex-1\"\r\n              onKeyPress={e =>\r\n                e.key === 'Enter' && (e.preventDefault(), addSpecificWeapon())\r\n              }\r\n            />\r\n            <Button\r\n              onClick={addSpecificWeapon}\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"bg-blue-600 hover:bg-blue-700\"\r\n            >\r\n              <Plus size={14} />\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {character.weaponProficiencies.specificWeapons.map(\r\n              (weapon, index) => (\r\n                <span\r\n                  key={index}\r\n                  className=\"inline-flex items-center gap-1 rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800\"\r\n                >\r\n                  {weapon}\r\n                  <Button\r\n                    onClick={() => removeSpecificWeapon(weapon)}\r\n                    variant=\"ghost\"\r\n                    size=\"xs\"\r\n                    className=\"ml-1 h-auto p-0 text-green-600 hover:bg-transparent hover:text-green-800\"\r\n                  >\r\n                    <X size={12} />\r\n                  </Button>\r\n                </span>\r\n              )\r\n            )}\r\n          </div>\r\n\r\n          {character.weaponProficiencies.specificWeapons.length === 0 && (\r\n            <p className=\"mt-1 text-xs text-gray-500\">\r\n              No specific weapon proficiencies\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/EquippedWeapons.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { useNavigation } from '@/contexts/NavigationContext';\r\nimport { Shield, Dice6, Zap } from 'lucide-react';\r\nimport { Weapon } from '@/types/character';\r\nimport { RollSummary } from '@/types/dice';\r\nimport {\r\n  isWeaponProficient,\r\n  getWeaponAttackString,\r\n  getWeaponDamageString,\r\n  calculateWeaponAttackBonus,\r\n  calculateWeaponDamageBonus,\r\n  rollDamage,\r\n} from '@/utils/calculations';\r\nimport DragDropList from '@/components/ui/layout/DragDropList';\r\nimport { Button } from '@/components/ui/forms';\r\nimport { Badge } from '@/components/ui/layout';\r\n\r\ninterface EquippedWeaponsProps {\r\n  showAttackRoll: (\r\n    weaponName: string,\r\n    roll: number,\r\n    bonus: number,\r\n    isCrit: boolean,\r\n    damage?: string,\r\n    damageType?: string\r\n  ) => void;\r\n  showDamageRoll: (\r\n    weaponName: string,\r\n    damageRoll: string,\r\n    damageType?: string,\r\n    versatile?: boolean\r\n  ) => void;\r\n  animateRoll?: (notation: string) => Promise<unknown> | void;\r\n}\r\n\r\nexport const EquippedWeapons: React.FC<EquippedWeaponsProps> = ({\r\n  showAttackRoll,\r\n  showDamageRoll,\r\n  animateRoll,\r\n}) => {\r\n  const { character, equipWeapon, reorderWeapons } = useCharacterStore();\r\n  const { switchToTab } = useNavigation();\r\n\r\n  const rollWeaponAttack = async (weapon: Weapon) => {\r\n    const attackBonus = calculateWeaponAttackBonus(character, weapon);\r\n\r\n    // Handle backward compatibility for damage\r\n    let primaryDice = '1d6';\r\n    let primaryType = 'bludgeoning';\r\n\r\n    if (Array.isArray(weapon.damage)) {\r\n      // New format: array of damage entries\r\n      const primaryDamage = weapon.damage.length > 0 ? weapon.damage[0] : null;\r\n      primaryDice = primaryDamage?.dice || '1d6';\r\n      primaryType = primaryDamage?.type || 'bludgeoning';\r\n    } else {\r\n      // Old format: single damage object\r\n      const legacyDamage = weapon.damage as {\r\n        dice: string;\r\n        type: string;\r\n        versatiledice?: string;\r\n      };\r\n      if (legacyDamage && legacyDamage.dice && legacyDamage.type) {\r\n        primaryDice = legacyDamage.dice;\r\n        primaryType = legacyDamage.type;\r\n      }\r\n    }\r\n\r\n    // Animate d20 attack roll and use actual result\r\n    if (animateRoll) {\r\n      try {\r\n        const rollResult = await animateRoll(\r\n          `1d20${attackBonus > 0 ? `+${attackBonus}` : attackBonus}`\r\n        );\r\n        if (\r\n          rollResult &&\r\n          typeof rollResult === 'object' &&\r\n          'individualValues' in rollResult\r\n        ) {\r\n          const summary = rollResult as RollSummary;\r\n          const roll = summary.individualValues[0] || 1; // Get the d20 result\r\n          const isCrit = roll === 20;\r\n\r\n          showAttackRoll(\r\n            weapon.name,\r\n            roll,\r\n            attackBonus,\r\n            isCrit,\r\n            primaryDice,\r\n            primaryType\r\n          );\r\n          return;\r\n        }\r\n      } catch (error) {\r\n        console.warn(\r\n          'Dice animation failed, falling back to random roll:',\r\n          error\r\n        );\r\n      }\r\n    }\r\n\r\n    // Fallback to random roll if animation fails or isn't available\r\n    const roll = Math.floor(Math.random() * 20) + 1;\r\n    const isCrit = roll === 20;\r\n\r\n    showAttackRoll(\r\n      weapon.name,\r\n      roll,\r\n      attackBonus,\r\n      isCrit,\r\n      primaryDice,\r\n      primaryType\r\n    );\r\n  };\r\n\r\n  const rollWeaponDamage = async (weapon: Weapon, versatile = false) => {\r\n    const damageBonus = calculateWeaponDamageBonus(character, weapon);\r\n\r\n    if (Array.isArray(weapon.damage)) {\r\n      // New format: array of damage entries\r\n      for (let index = 0; index < weapon.damage.length; index++) {\r\n        const damage = weapon.damage[index];\r\n        const dice =\r\n          versatile && damage.versatiledice\r\n            ? damage.versatiledice\r\n            : damage.dice;\r\n        const weaponBonus = index === 0 ? damageBonus : 0; // Only add weapon damage bonus to first damage\r\n\r\n        // Animate damage dice and use actual result\r\n        if (animateRoll) {\r\n          try {\r\n            const notationWithBonus =\r\n              weaponBonus !== 0\r\n                ? `${dice}${weaponBonus > 0 ? `+${weaponBonus}` : `${weaponBonus}`}`\r\n                : dice;\r\n            const rollResult = await animateRoll(notationWithBonus);\r\n            if (\r\n              rollResult &&\r\n              typeof rollResult === 'object' &&\r\n              'finalTotal' in rollResult\r\n            ) {\r\n              const summary = rollResult as RollSummary;\r\n              const damageResult = `${summary.total} + ${weaponBonus} = ${summary.finalTotal}`;\r\n\r\n              showDamageRoll(\r\n                `${weapon.name}${damage.label && damage.label !== 'Weapon Damage' ? ` (${damage.label})` : ''}`,\r\n                damageResult,\r\n                damage.type,\r\n                versatile && index === 0 // Only show versatile for first damage\r\n              );\r\n              continue;\r\n            }\r\n          } catch (error) {\r\n            console.warn(\r\n              'Dice animation failed, falling back to calculated roll:',\r\n              error\r\n            );\r\n          }\r\n        }\r\n\r\n        // Fallback to calculated damage if animation fails\r\n        const damageResult = rollDamage(dice, weaponBonus);\r\n        showDamageRoll(\r\n          `${weapon.name}${damage.label && damage.label !== 'Weapon Damage' ? ` (${damage.label})` : ''}`,\r\n          damageResult,\r\n          damage.type,\r\n          versatile && index === 0 // Only show versatile for first damage\r\n        );\r\n      }\r\n    } else {\r\n      // Old format: single damage object\r\n      const legacyDamage = weapon.damage as {\r\n        dice: string;\r\n        type: string;\r\n        versatiledice?: string;\r\n      };\r\n      if (legacyDamage && legacyDamage.dice && legacyDamage.type) {\r\n        const dice =\r\n          versatile && legacyDamage.versatiledice\r\n            ? legacyDamage.versatiledice\r\n            : legacyDamage.dice;\r\n\r\n        // Animate damage dice and use actual result\r\n        if (animateRoll) {\r\n          try {\r\n            const notationWithBonus =\r\n              damageBonus !== 0\r\n                ? `${dice}${damageBonus > 0 ? `+${damageBonus}` : `${damageBonus}`}`\r\n                : dice;\r\n            const rollResult = await animateRoll(notationWithBonus);\r\n            if (\r\n              rollResult &&\r\n              typeof rollResult === 'object' &&\r\n              'finalTotal' in rollResult\r\n            ) {\r\n              const summary = rollResult as RollSummary;\r\n              const damageResult = `${summary.total} + ${damageBonus} = ${summary.finalTotal}`;\r\n\r\n              showDamageRoll(\r\n                weapon.name,\r\n                damageResult,\r\n                legacyDamage.type,\r\n                versatile\r\n              );\r\n              return;\r\n            }\r\n          } catch (error) {\r\n            console.warn(\r\n              'Dice animation failed, falling back to calculated roll:',\r\n              error\r\n            );\r\n          }\r\n        }\r\n\r\n        // Fallback to calculated damage if animation fails\r\n        const damageResult = rollDamage(dice, damageBonus);\r\n        showDamageRoll(weapon.name, damageResult, legacyDamage.type, versatile);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Filter to only equipped weapons\r\n  const equippedWeapons = character.weapons.filter(weapon => weapon.isEquipped);\r\n\r\n  // Custom reorder handler for equipped weapons only\r\n  const handleReorderEquippedWeapons = (\r\n    sourceIndex: number,\r\n    destinationIndex: number\r\n  ) => {\r\n    // Get the weapon IDs being reordered\r\n    const sourceWeaponId = equippedWeapons[sourceIndex].id;\r\n    const destinationWeaponId = equippedWeapons[destinationIndex].id;\r\n\r\n    // Find the indices in the main weapons array\r\n    const sourceGlobalIndex = character.weapons.findIndex(\r\n      weapon => weapon.id === sourceWeaponId\r\n    );\r\n    const destinationGlobalIndex = character.weapons.findIndex(\r\n      weapon => weapon.id === destinationWeaponId\r\n    );\r\n\r\n    if (sourceGlobalIndex !== -1 && destinationGlobalIndex !== -1) {\r\n      reorderWeapons(sourceGlobalIndex, destinationGlobalIndex);\r\n    }\r\n  };\r\n\r\n  if (equippedWeapons.length === 0) {\r\n    return (\r\n      <div className=\"rounded-lg border border-gray-200 bg-white p-6 text-center\">\r\n        <div className=\"mb-3 text-5xl\">üó°Ô∏è</div>\r\n        <p className=\"font-semibold text-gray-700\">No weapons equipped</p>\r\n        <p className=\"mt-1 text-sm text-gray-500\">\r\n          Equip weapons in the Equipment section to see them here.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <DragDropList\r\n        items={equippedWeapons}\r\n        onReorder={handleReorderEquippedWeapons}\r\n        keyExtractor={weapon => weapon.id}\r\n        className=\"space-y-3\"\r\n        itemClassName=\"p-4 rounded-lg border-2 border-gray-200 bg-white transition-all hover:shadow-md hover:border-gray-300\"\r\n        showDragHandle={true}\r\n        dragHandlePosition=\"left\"\r\n        renderItem={weapon => {\r\n          const isProficient = isWeaponProficient(character, weapon);\r\n          const attackString = getWeaponAttackString(character, weapon);\r\n          const damageString = getWeaponDamageString(character, weapon);\r\n          const versatileDamageString = (() => {\r\n            if (Array.isArray(weapon.damage)) {\r\n              return weapon.damage.some(dmg => dmg.versatiledice)\r\n                ? getWeaponDamageString(character, weapon, true)\r\n                : null;\r\n            } else {\r\n              const legacyDamage = weapon.damage as {\r\n                dice: string;\r\n                type: string;\r\n                versatiledice?: string;\r\n              };\r\n              return legacyDamage && legacyDamage.versatiledice\r\n                ? getWeaponDamageString(character, weapon, true)\r\n                : null;\r\n            }\r\n          })();\r\n\r\n          return (\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n              <div className=\"flex-1 min-w-0\">\r\n                {/* Title and badges */}\r\n                <div className=\"mb-3 flex flex-wrap items-center gap-2\">\r\n                  <h4 className=\"font-bold text-gray-900\">{weapon.name}</h4>\r\n                  <Badge variant=\"success\" size=\"sm\" leftIcon={<Shield size={12} />}>\r\n                    Equipped\r\n                  </Badge>\r\n                  {weapon.enhancementBonus > 0 && (\r\n                    <Badge variant=\"warning\" size=\"sm\">\r\n                      +{weapon.enhancementBonus}\r\n                    </Badge>\r\n                  )}\r\n                  {!isProficient && (\r\n                    <Badge variant=\"danger\" size=\"sm\">\r\n                      Not Proficient\r\n                      {weapon.manualProficiency !== undefined && ' (Manual)'}\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Attack and Damage stats */}\r\n                <div className=\"mb-3 flex flex-wrap gap-x-6 gap-y-2 text-sm\">\r\n                  <div className=\"flex items-center gap-1.5\">\r\n                    <span className=\"text-gray-600\">üéØ Attack:</span>\r\n                    <span className=\"font-bold text-red-600\">{attackString}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-1.5\">\r\n                    <span className=\"text-gray-600\">‚öîÔ∏è Damage:</span>\r\n                    <span className=\"font-bold text-blue-600\">{damageString}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {versatileDamageString && (\r\n                  <div className=\"mb-3 flex items-center gap-1.5 text-sm\">\r\n                    <span className=\"text-gray-600\">üó°Ô∏è Versatile:</span>\r\n                    <span className=\"font-bold text-purple-600\">{versatileDamageString}</span>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Weapon properties */}\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <Badge variant=\"secondary\" size=\"sm\">\r\n                    {weapon.category}\r\n                  </Badge>\r\n                  {weapon.weaponType.map((type, index) => (\r\n                    <Badge key={index} variant=\"neutral\" size=\"sm\">\r\n                      {type}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex flex-col gap-2 flex-shrink-0\">\r\n                <Button\r\n                  onClick={() => rollWeaponAttack(weapon)}\r\n                  variant=\"secondary\"\r\n                  size=\"sm\"\r\n                  leftIcon={<Dice6 size={14} />}\r\n                  className=\"min-w-[110px]\"\r\n                  title=\"Roll attack\"\r\n                >\r\n                  Attack\r\n                </Button>\r\n                <Button\r\n                  onClick={() => rollWeaponDamage(weapon)}\r\n                  variant=\"warning\"\r\n                  size=\"sm\"\r\n                  leftIcon={<Zap size={14} />}\r\n                  className=\"min-w-[110px] bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700\"\r\n                  title=\"Roll damage\"\r\n                >\r\n                  Damage\r\n                </Button>\r\n                {(() => {\r\n                  if (Array.isArray(weapon.damage)) {\r\n                    return weapon.damage.some(dmg => dmg.versatiledice);\r\n                  } else {\r\n                    const legacyDamage = weapon.damage as {\r\n                      dice: string;\r\n                      type: string;\r\n                      versatiledice?: string;\r\n                    };\r\n                    return legacyDamage && legacyDamage.versatiledice;\r\n                  }\r\n                })() && (\r\n                  <Button\r\n                    onClick={() => rollWeaponDamage(weapon, true)}\r\n                    variant=\"primary\"\r\n                    size=\"sm\"\r\n                    leftIcon={<Zap size={14} />}\r\n                    className=\"min-w-[110px] bg-gradient-to-r from-purple-600 to-violet-700 hover:from-purple-700 hover:to-violet-800\"\r\n                    title=\"Roll versatile damage\"\r\n                  >\r\n                    Versatile\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={() => equipWeapon(weapon.id, false)}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className=\"min-w-[110px] border-orange-300 text-orange-700 hover:bg-orange-50\"\r\n                  title=\"Unequip weapon\"\r\n                >\r\n                  Unequip\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          );\r\n        }}\r\n      />\r\n\r\n      <div className=\"mt-4 rounded-lg border border-blue-200 bg-blue-50 p-3\">\r\n        <p className=\"text-center text-sm text-blue-800\">\r\n          <strong>üí° Quick Reference:</strong> Manage your full weapon inventory in the{' '}\r\n          <button\r\n            onClick={() => switchToTab('equipment')}\r\n            className=\"font-semibold text-blue-600 underline transition-colors hover:text-blue-800 hover:no-underline\"\r\n          >\r\n            Equipment tab\r\n          </button>\r\n          .\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/EnhancedQuickSpells.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport {\r\n  Sparkles,\r\n  Dice6,\r\n  Wand2,\r\n  Search,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Star,\r\n  Heart,\r\n  Grid3X3,\r\n  List,\r\n  Eye,\r\n} from 'lucide-react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { Spell } from '@/types/character';\r\nimport {\r\n  calculateSpellAttackBonus,\r\n  calculateSpellSaveDC,\r\n  getCharacterSpellcastingAbility,\r\n  rollDamage,\r\n} from '@/utils/calculations';\r\nimport { SpellCastModal } from '@/components/ui/game/SpellCastModal';\r\nimport SpellDetailsModal from '@/components/ui/game/SpellDetailsModal';\r\nimport { RollSummary } from '@/types/dice';\r\nimport { Button } from '@/components/ui/forms';\r\nimport { Badge } from '@/components/ui/layout';\r\n\r\ninterface EnhancedQuickSpellsProps {\r\n  showAttackRoll: (\r\n    weaponName: string,\r\n    roll: number,\r\n    bonus: number,\r\n    isCrit: boolean,\r\n    damage?: string,\r\n    damageType?: string\r\n  ) => void;\r\n  showSavingThrow: (\r\n    spellName: string,\r\n    saveDC: number,\r\n    saveType?: string,\r\n    damage?: string,\r\n    damageType?: string\r\n  ) => void;\r\n  showDamageRoll: (\r\n    weaponName: string,\r\n    damageRoll: string,\r\n    damageType?: string,\r\n    versatile?: boolean\r\n  ) => void;\r\n  animateRoll?: (notation: string) => Promise<unknown> | void;\r\n}\r\n\r\ninterface SpellsByLevel {\r\n  [level: number]: Spell[];\r\n}\r\n\r\ninterface LevelSectionProps {\r\n  level: number;\r\n  spells: Spell[];\r\n  isExpanded: boolean;\r\n  onToggle: () => void;\r\n  compactView: boolean;\r\n  spellSaveDC: number | null;\r\n  onSpellAction: (spell: Spell, action: string) => void;\r\n  favoriteSpells: string[];\r\n  onToggleFavorite: (spellId: string) => void;\r\n}\r\n\r\nconst SpellCard: React.FC<{\r\n  spell: Spell;\r\n  compact: boolean;\r\n  isFavorite: boolean;\r\n  spellSaveDC: number | null;\r\n  onAction: (action: string) => void;\r\n  onToggleFavorite: () => void;\r\n}> = ({ spell, compact, isFavorite, spellSaveDC, onAction, onToggleFavorite }) => {\r\n  const isCantrip = spell.level === 0;\r\n  \r\n  if (compact) {\r\n    return (\r\n      <div className=\"group flex items-center justify-between rounded-lg border-2 border-gray-200 bg-white p-2.5 hover:shadow-md hover:border-gray-300 transition-all\">\r\n        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n          <button\r\n            onClick={onToggleFavorite}\r\n            className={`flex-shrink-0 transition-colors ${\r\n              isFavorite ? 'text-yellow-500 hover:text-yellow-600' : 'text-gray-400 hover:text-yellow-500'\r\n            }`}\r\n            title={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\r\n          >\r\n            <Star size={14} fill={isFavorite ? 'currentColor' : 'none'} />\r\n          </button>\r\n          <span className=\"font-medium text-gray-900 truncate text-sm\">\r\n            {spell.name}\r\n          </span>\r\n          {spell.concentration && (\r\n            <Badge variant=\"warning\" size=\"sm\" className=\"flex-shrink-0\">‚è±</Badge>\r\n          )}\r\n        </div>\r\n        <div className=\"flex gap-1.5 flex-shrink-0\">\r\n          <Button\r\n            onClick={() => onAction('cast')}\r\n            variant=\"primary\"\r\n            size=\"xs\"\r\n            className=\"bg-purple-600 hover:bg-purple-700\"\r\n            title=\"Cast spell\"\r\n          >\r\n            <Wand2 size={12} />\r\n          </Button>\r\n          {spell.actionType === 'attack' && (\r\n            <Button\r\n              onClick={() => onAction('attack')}\r\n              variant=\"secondary\"\r\n              size=\"xs\"\r\n              title=\"Attack roll\"\r\n            >\r\n              <Dice6 size={12} />\r\n            </Button>\r\n          )}\r\n          <Button\r\n            onClick={() => onAction('view')}\r\n            variant=\"outline\"\r\n            size=\"xs\"\r\n            title=\"View details\"\r\n          >\r\n            <Eye size={12} />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-lg border-2 border-gray-200 bg-white p-4 hover:shadow-md hover:border-gray-300 transition-all\">\r\n      <div className=\"mb-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2 flex-wrap\">\r\n          <button\r\n            onClick={onToggleFavorite}\r\n            className={`transition-colors ${\r\n              isFavorite ? 'text-yellow-500 hover:text-yellow-600' : 'text-gray-400 hover:text-yellow-500'\r\n            }`}\r\n            title={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\r\n          >\r\n            <Star size={16} fill={isFavorite ? 'currentColor' : 'none'} />\r\n          </button>\r\n          <span className=\"font-bold text-gray-900\">{spell.name}</span>\r\n          <Badge \r\n            variant={isCantrip ? \"warning\" : \"primary\"} \r\n            size=\"sm\"\r\n            className={isCantrip ? \"bg-yellow-100 text-yellow-800\" : \"bg-purple-100 text-purple-800\"}\r\n          >\r\n            {isCantrip ? 'Cantrip' : `Level ${spell.level}`}\r\n          </Badge>\r\n          {spell.concentration && (\r\n            <Badge variant=\"warning\" size=\"sm\">‚è± Concentration</Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mb-3 flex flex-wrap items-center gap-2 text-xs text-gray-600\">\r\n        <span>{spell.castingTime}</span>\r\n        <span>‚Ä¢</span>\r\n        <span>{spell.range}</span>\r\n        {spell.duration && (\r\n          <>\r\n            <span>‚Ä¢</span>\r\n            <span>{spell.duration}</span>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        <Button\r\n          onClick={() => onAction('cast')}\r\n          variant=\"primary\"\r\n          size=\"sm\"\r\n          leftIcon={<Wand2 size={14} />}\r\n          className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n        >\r\n          Cast\r\n        </Button>\r\n\r\n        {spell.actionType === 'attack' && (\r\n          <Button\r\n            onClick={() => onAction('attack')}\r\n            variant=\"secondary\"\r\n            size=\"sm\"\r\n            leftIcon={<Dice6 size={14} />}\r\n          >\r\n            Attack\r\n          </Button>\r\n        )}\r\n\r\n        <Button\r\n          onClick={() => onAction('view')}\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          leftIcon={<Eye size={14} />}\r\n        >\r\n          View\r\n        </Button>\r\n\r\n        {/* Show spell info for reference */}\r\n        {spell.actionType === 'save' && spell.savingThrow && (\r\n          <Badge variant=\"info\" size=\"sm\">\r\n            {spell.savingThrow} Save DC {spellSaveDC || '?'}\r\n          </Badge>\r\n        )}\r\n        {spell.damage && (\r\n          <Badge variant=\"warning\" size=\"sm\">\r\n            {spell.damage} {spell.damageType && `${spell.damageType}`}\r\n          </Badge>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst LevelSection: React.FC<LevelSectionProps> = ({\r\n  level,\r\n  spells,\r\n  isExpanded,\r\n  onToggle,\r\n  compactView,\r\n  spellSaveDC,\r\n  onSpellAction,\r\n  favoriteSpells,\r\n  onToggleFavorite,\r\n}) => {\r\n  const isCantrip = level === 0;\r\n  const levelName = isCantrip ? 'Cantrips' : `Level ${level}`;\r\n  const levelColor = isCantrip ? 'text-yellow-700' : 'text-purple-700';\r\n  const levelBg = isCantrip ? 'bg-gradient-to-r from-yellow-50 to-amber-50' : 'bg-gradient-to-r from-purple-50 to-violet-50';\r\n  const borderColor = isCantrip ? 'border-yellow-200' : 'border-purple-200';\r\n\r\n  return (\r\n    <div className={`border-2 ${borderColor} rounded-lg overflow-hidden bg-white`}>\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center justify-between p-4 ${levelBg} hover:opacity-90 transition-all`}\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {isExpanded ? (\r\n              <ChevronDown size={18} className={levelColor} />\r\n            ) : (\r\n              <ChevronRight size={18} className={levelColor} />\r\n            )}\r\n            <span className={`font-bold text-base ${levelColor}`}>{levelName}</span>\r\n          </div>\r\n          <Badge \r\n            variant={isCantrip ? \"warning\" : \"primary\"}\r\n            size=\"sm\"\r\n            className={isCantrip ? \"bg-yellow-100 text-yellow-800\" : \"bg-purple-100 text-purple-800\"}\r\n          >\r\n            {spells.length} spell{spells.length !== 1 ? 's' : ''}\r\n          </Badge>\r\n        </div>\r\n      </button>\r\n      \r\n      {isExpanded && (\r\n        <div className=\"p-4 bg-white border-t-2 border-gray-100\">\r\n          <div className={compactView ? 'space-y-2' : 'space-y-3'}>\r\n            {spells.map(spell => (\r\n              <SpellCard\r\n                key={spell.id}\r\n                spell={spell}\r\n                compact={compactView}\r\n                isFavorite={favoriteSpells.includes(spell.id)}\r\n                spellSaveDC={spellSaveDC}\r\n                onAction={(action) => onSpellAction(spell, action)}\r\n                onToggleFavorite={() => onToggleFavorite(spell.id)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport function EnhancedQuickSpells({\r\n  showAttackRoll: showAttackToast,\r\n  showSavingThrow: showSaveToast,\r\n  showDamageRoll,\r\n  animateRoll,\r\n}: EnhancedQuickSpellsProps) {\r\n  const {\r\n    character,\r\n    updateSpellSlot,\r\n    startConcentration,\r\n    stopConcentration,\r\n    toggleSpellFavorite,\r\n  } = useCharacterStore();\r\n\r\n  // Local state\r\n  const [castModalOpen, setCastModalOpen] = useState(false);\r\n  const [selectedSpell, setSelectedSpell] = useState<Spell | null>(null);\r\n  const [viewingSpell, setViewingSpell] = useState<Spell | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [compactView, setCompactView] = useState(false);\r\n  const [expandedLevels, setExpandedLevels] = useState<Set<number>>(new Set([0, 1, 2])); // Default: cantrips and levels 1-2 expanded\r\n\r\n  // Get spellcasting stats\r\n  const spellcastingAbility = getCharacterSpellcastingAbility(character);\r\n  const spellAttackBonus = calculateSpellAttackBonus(character);\r\n  const spellSaveDC = calculateSpellSaveDC(character);\r\n\r\n  // Get all available spells for quick access (prepared cantrips + prepared spells)\r\n  const quickAccessSpells = character.spells.filter(\r\n    spell =>\r\n      (spell.level === 0 && spell.isPrepared) || // Only prepared cantrips\r\n      (spell.level > 0 && spell.isPrepared) || // Prepared spells\r\n      spell.isAlwaysPrepared // Always prepared spells\r\n  );\r\n\r\n  // Show all prepared spells in quick access (not just action spells)\r\n  const actionSpells = quickAccessSpells;\r\n\r\n  // Filter by search query\r\n  const filteredSpells = useMemo(() => {\r\n    if (!searchQuery.trim()) return actionSpells;\r\n    \r\n    const query = searchQuery.toLowerCase();\r\n    return actionSpells.filter(spell =>\r\n      spell.name.toLowerCase().includes(query) ||\r\n      spell.school.toLowerCase().includes(query) ||\r\n      spell.damageType?.toLowerCase().includes(query)\r\n    );\r\n  }, [actionSpells, searchQuery]);\r\n\r\n  // Organize spells by level\r\n  const spellsByLevel = useMemo(() => {\r\n    const organized: SpellsByLevel = {};\r\n    \r\n    filteredSpells.forEach(spell => {\r\n      if (!organized[spell.level]) {\r\n        organized[spell.level] = [];\r\n      }\r\n      organized[spell.level].push(spell);\r\n    });\r\n\r\n    // Sort spells within each level by name\r\n    Object.keys(organized).forEach(level => {\r\n      organized[parseInt(level)].sort((a, b) => a.name.localeCompare(b.name));\r\n    });\r\n\r\n    return organized;\r\n  }, [filteredSpells]);\r\n\r\n  // Get favorite spells\r\n  const favoriteSpells = useMemo(() => {\r\n    return character.spellbook?.favoriteSpells || [];\r\n  }, [character.spellbook?.favoriteSpells]);\r\n  \r\n  const favoriteActionSpells = useMemo(() => {\r\n    return actionSpells.filter(spell => favoriteSpells.includes(spell.id));\r\n  }, [actionSpells, favoriteSpells]);\r\n\r\n  // Spell action handlers\r\n  const rollSpellAttack = async (spell: Spell) => {\r\n    if (spellAttackBonus === null) {\r\n      alert('Cannot cast spells - no spellcasting ability detected');\r\n      return;\r\n    }\r\n\r\n    if (animateRoll) {\r\n      try {\r\n        const rollResult = await animateRoll('1d20');\r\n        if (rollResult && typeof rollResult === 'object' && 'individualValues' in rollResult) {\r\n          const summary = rollResult as RollSummary;\r\n          const roll = summary.individualValues[0] || 1;\r\n          const isCrit = roll === 20;\r\n          showAttackToast(spell.name, roll, spellAttackBonus, isCrit, spell.damage, spell.damageType);\r\n          return;\r\n        }\r\n      } catch (error) {\r\n        console.warn('Dice animation failed, falling back to random roll:', error);\r\n      }\r\n    }\r\n\r\n    const roll = Math.floor(Math.random() * 20) + 1;\r\n    const isCrit = roll === 20;\r\n    showAttackToast(spell.name, roll, spellAttackBonus, isCrit, spell.damage, spell.damageType);\r\n  };\r\n\r\n  const showSavingThrow = async (spell: Spell) => {\r\n    if (spellSaveDC === null) {\r\n      alert('Cannot cast spells - no spellcasting ability detected');\r\n      return;\r\n    }\r\n    showSaveToast(spell.name, spellSaveDC, spell.savingThrow, spell.damage, spell.damageType);\r\n  };\r\n\r\n  const rollSpellDamage = async (spell: Spell) => {\r\n    if (!spell.damage) {\r\n      alert('This spell does not have damage dice specified');\r\n      return;\r\n    }\r\n\r\n    if (animateRoll) {\r\n      try {\r\n        const rollResult = await animateRoll(spell.damage);\r\n        if (rollResult && typeof rollResult === 'object' && 'finalTotal' in rollResult) {\r\n          const summary = rollResult as RollSummary;\r\n          const damageResult = `${summary.finalTotal}`;\r\n          showDamageRoll(spell.name, damageResult, spell.damageType);\r\n          return;\r\n        }\r\n      } catch (error) {\r\n        console.warn('Dice animation failed, falling back to calculated roll:', error);\r\n      }\r\n    }\r\n\r\n    const damageResult = rollDamage(spell.damage);\r\n    showDamageRoll(spell.name, damageResult, spell.damageType);\r\n  };\r\n\r\n  const openCastModal = (spell: Spell) => {\r\n    setSelectedSpell(spell);\r\n    setCastModalOpen(true);\r\n  };\r\n\r\n  const handleSpellAction = (spell: Spell, action: string) => {\r\n    switch (action) {\r\n      case 'view':\r\n        setViewingSpell(spell);\r\n        break;\r\n      case 'cast':\r\n        openCastModal(spell);\r\n        break;\r\n      case 'attack':\r\n        rollSpellAttack(spell);\r\n        break;\r\n      case 'save':\r\n        showSavingThrow(spell);\r\n        break;\r\n      case 'damage':\r\n        rollSpellDamage(spell);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleCastSpell = (spellLevel: number) => {\r\n    if (!selectedSpell) return;\r\n\r\n    if (selectedSpell.concentration) {\r\n      if (character.concentration.isConcentrating) {\r\n        stopConcentration();\r\n      }\r\n      startConcentration(selectedSpell.name, selectedSpell.id, spellLevel);\r\n    }\r\n\r\n    if (selectedSpell.level > 0) {\r\n      updateSpellSlot(\r\n        spellLevel as keyof typeof character.spellSlots,\r\n        character.spellSlots[spellLevel as keyof typeof character.spellSlots].used + 1\r\n      );\r\n    }\r\n\r\n    setCastModalOpen(false);\r\n    setSelectedSpell(null);\r\n  };\r\n\r\n  const toggleLevelExpanded = (level: number) => {\r\n    const newExpanded = new Set(expandedLevels);\r\n    if (newExpanded.has(level)) {\r\n      newExpanded.delete(level);\r\n    } else {\r\n      newExpanded.add(level);\r\n    }\r\n    setExpandedLevels(newExpanded);\r\n  };\r\n\r\n  const sortedLevels = Object.keys(spellsByLevel)\r\n    .map(Number)\r\n    .sort((a, b) => a - b);\r\n\r\n  if (actionSpells.length === 0) {\r\n    return (\r\n      <div className=\"rounded-lg border-2 border-gray-200 bg-white p-8 text-center\">\r\n        <div className=\"mb-3 text-5xl\">üîÆ</div>\r\n        <p className=\"font-semibold text-gray-700 text-lg\">No spells prepared</p>\r\n        <p className=\"mt-2 text-sm text-gray-500\">\r\n          Prepare spells in the Spellcasting tab to see them here.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Separate cantrips and leveled spells\r\n  const cantrips = spellsByLevel[0] || [];\r\n  const leveledSpells = Object.keys(spellsByLevel)\r\n    .map(Number)\r\n    .filter(level => level > 0)\r\n    .sort((a, b) => a - b);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"space-y-4\">\r\n        {/* Header with stats and controls */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between flex-wrap gap-3\">\r\n            <div className=\"flex items-center gap-3 flex-wrap\">\r\n              <div className=\"flex items-center gap-2 text-sm\">\r\n                <Sparkles size={16} className=\"text-purple-600\" />\r\n                <Badge variant=\"primary\" size=\"sm\" className=\"bg-blue-100 text-blue-800\">\r\n                  Attack: +{spellAttackBonus ?? 0}\r\n                </Badge>\r\n                <Badge variant=\"primary\" size=\"sm\" className=\"bg-indigo-100 text-indigo-800\">\r\n                  Save DC: {spellSaveDC ?? 8}\r\n                </Badge>\r\n                {spellcastingAbility && (\r\n                  <Badge variant=\"secondary\" size=\"sm\">\r\n                    {spellcastingAbility.charAt(0).toUpperCase() + spellcastingAbility.slice(1)}\r\n                  </Badge>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            <Button\r\n              onClick={() => setCompactView(!compactView)}\r\n              variant={compactView ? \"primary\" : \"ghost\"}\r\n              size=\"sm\"\r\n              leftIcon={compactView ? <List size={16} /> : <Grid3X3 size={16} />}\r\n              title={compactView ? 'Switch to detailed view' : 'Switch to compact view'}\r\n              className={compactView ? \"bg-purple-600 hover:bg-purple-700\" : \"\"}\r\n            >\r\n              {compactView ? 'Detailed' : 'Compact'}\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Search bar */}\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search spells...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"w-full rounded-lg border-2 border-gray-300 bg-white py-2.5 pl-10 pr-4 text-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200 transition-all\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Favorites section */}\r\n        {favoriteActionSpells.length > 0 && (\r\n          <div className=\"rounded-lg border-2 border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50 p-4 shadow-sm\">\r\n            <div className=\"mb-3 flex items-center gap-3\">\r\n              <Heart className=\"text-yellow-600\" size={18} fill=\"currentColor\" />\r\n              <span className=\"font-bold text-yellow-800\">Favorite Spells</span>\r\n              <Badge variant=\"warning\" size=\"sm\" className=\"bg-yellow-100 text-yellow-800\">\r\n                {favoriteActionSpells.length}\r\n              </Badge>\r\n            </div>\r\n            <div className={compactView ? 'space-y-2' : 'space-y-3'}>\r\n              {favoriteActionSpells.map(spell => (\r\n                <SpellCard\r\n                  key={spell.id}\r\n                  spell={spell}\r\n                  compact={compactView}\r\n                  isFavorite={true}\r\n                  spellSaveDC={spellSaveDC}\r\n                  onAction={(action) => handleSpellAction(spell, action)}\r\n                  onToggleFavorite={() => toggleSpellFavorite(spell.id)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cantrips section - Always separate and highlighted */}\r\n        {cantrips.length > 0 && (\r\n          <LevelSection\r\n            key={0}\r\n            level={0}\r\n            spells={cantrips}\r\n            isExpanded={expandedLevels.has(0)}\r\n            onToggle={() => toggleLevelExpanded(0)}\r\n            compactView={compactView}\r\n            spellSaveDC={spellSaveDC}\r\n            onSpellAction={handleSpellAction}\r\n            favoriteSpells={favoriteSpells}\r\n            onToggleFavorite={toggleSpellFavorite}\r\n          />\r\n        )}\r\n\r\n        {/* Leveled spells */}\r\n        {leveledSpells.length > 0 && (\r\n          <div className=\"space-y-3\">\r\n            {leveledSpells.map(level => (\r\n              <LevelSection\r\n                key={level}\r\n                level={level}\r\n                spells={spellsByLevel[level]}\r\n                isExpanded={expandedLevels.has(level)}\r\n                onToggle={() => toggleLevelExpanded(level)}\r\n                compactView={compactView}\r\n                spellSaveDC={spellSaveDC}\r\n                onSpellAction={handleSpellAction}\r\n                favoriteSpells={favoriteSpells}\r\n                onToggleFavorite={toggleSpellFavorite}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* No results message */}\r\n        {searchQuery && sortedLevels.length === 0 && (\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-white p-8 text-center\">\r\n            <div className=\"mb-2 text-4xl\">üîç</div>\r\n            <p className=\"font-semibold text-gray-700\">No spells found</p>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              Try adjusting your search terms or check your prepared spells.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Spell Cast Modal */}\r\n      {selectedSpell && (\r\n        <SpellCastModal\r\n          isOpen={castModalOpen}\r\n          onClose={() => {\r\n            setCastModalOpen(false);\r\n            setSelectedSpell(null);\r\n          }}\r\n          spell={selectedSpell}\r\n          spellSlots={character.spellSlots}\r\n          concentration={character.concentration}\r\n          onCastSpell={handleCastSpell}\r\n        />\r\n      )}\r\n\r\n      {/* Spell Detail Modal */}\r\n      {viewingSpell && (\r\n        <SpellDetailsModal\r\n          spell={viewingSpell}\r\n          isOpen={true}\r\n          onClose={() => setViewingSpell(null)}\r\n          isFavorite={favoriteSpells.includes(viewingSpell.id)}\r\n          onToggleFavorite={() => {\r\n            toggleSpellFavorite(viewingSpell.id);\r\n          }}\r\n          onCast={() => openCastModal(viewingSpell)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAEA;AAMA;AACA;AAEA;AAAA;AACA;AAAA;;;AA5BA;;;;;;;;;AAuEA,MAAM,YAOD;QAAC,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE;IAC3E,MAAM,YAAY,MAAM,KAAK,KAAK;IAElC,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAW,AAAC,mCAEX,OADC,aAAa,0CAA0C;4BAEzD,OAAO,aAAa,0BAA0B;sCAE9C,cAAA,6LAAC,6MAAI;gCAAC,MAAM;gCAAI,MAAM,aAAa,iBAAiB;;;;;;;;;;;sCAEtD,6LAAC;4BAAK,WAAU;sCACb,MAAM,IAAI;;;;;;wBAEZ,MAAM,aAAa,kBAClB,6LAAC,sLAAK;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,WAAU;sCAAgB;;;;;;;;;;;;8BAGjE,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,uLAAM;4BACL,SAAS,IAAM,SAAS;4BACxB,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,OAAM;sCAEN,cAAA,6LAAC,2NAAK;gCAAC,MAAM;;;;;;;;;;;wBAEd,MAAM,UAAU,KAAK,0BACpB,6LAAC,uLAAM;4BACL,SAAS,IAAM,SAAS;4BACxB,SAAQ;4BACR,MAAK;4BACL,OAAM;sCAEN,cAAA,6LAAC,oNAAK;gCAAC,MAAM;;;;;;;;;;;sCAGjB,6LAAC,uLAAM;4BACL,SAAS,IAAM,SAAS;4BACxB,SAAQ;4BACR,MAAK;4BACL,OAAM;sCAEN,cAAA,6LAAC,0MAAG;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;IAKrB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAW,AAAC,qBAEX,OADC,aAAa,0CAA0C;4BAEzD,OAAO,aAAa,0BAA0B;sCAE9C,cAAA,6LAAC,6MAAI;gCAAC,MAAM;gCAAI,MAAM,aAAa,iBAAiB;;;;;;;;;;;sCAEtD,6LAAC;4BAAK,WAAU;sCAA2B,MAAM,IAAI;;;;;;sCACrD,6LAAC,sLAAK;4BACJ,SAAS,YAAY,YAAY;4BACjC,MAAK;4BACL,WAAW,YAAY,kCAAkC;sCAExD,YAAY,YAAY,AAAC,SAAoB,OAAZ,MAAM,KAAK;;;;;;wBAE9C,MAAM,aAAa,kBAClB,6LAAC,sLAAK;4BAAC,SAAQ;4BAAU,MAAK;sCAAK;;;;;;;;;;;;;;;;;0BAKzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAM,MAAM,WAAW;;;;;;kCACxB,6LAAC;kCAAK;;;;;;kCACN,6LAAC;kCAAM,MAAM,KAAK;;;;;;oBACjB,MAAM,QAAQ,kBACb;;0CACE,6LAAC;0CAAK;;;;;;0CACN,6LAAC;0CAAM,MAAM,QAAQ;;;;;;;;;;;;;;0BAK3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,uLAAM;wBACL,SAAS,IAAM,SAAS;wBACxB,SAAQ;wBACR,MAAK;wBACL,wBAAU,6LAAC,2NAAK;4BAAC,MAAM;;;;;;wBACvB,WAAU;kCACX;;;;;;oBAIA,MAAM,UAAU,KAAK,0BACpB,6LAAC,uLAAM;wBACL,SAAS,IAAM,SAAS;wBACxB,SAAQ;wBACR,MAAK;wBACL,wBAAU,6LAAC,oNAAK;4BAAC,MAAM;;;;;;kCACxB;;;;;;kCAKH,6LAAC,uLAAM;wBACL,SAAS,IAAM,SAAS;wBACxB,SAAQ;wBACR,MAAK;wBACL,wBAAU,6LAAC,0MAAG;4BAAC,MAAM;;;;;;kCACtB;;;;;;oBAKA,MAAM,UAAU,KAAK,UAAU,MAAM,WAAW,kBAC/C,6LAAC,sLAAK;wBAAC,SAAQ;wBAAO,MAAK;;4BACxB,MAAM,WAAW;4BAAC;4BAAU,eAAe;;;;;;;oBAG/C,MAAM,MAAM,kBACX,6LAAC,sLAAK;wBAAC,SAAQ;wBAAU,MAAK;;4BAC3B,MAAM,MAAM;4BAAC;4BAAE,MAAM,UAAU,IAAI,AAAC,GAAmB,OAAjB,MAAM,UAAU;;;;;;;;;;;;;;;;;;;AAMnE;KAnJM;AAqJN,MAAM,eAA4C;QAAC,EACjD,KAAK,EACL,MAAM,EACN,UAAU,EACV,QAAQ,EACR,WAAW,EACX,WAAW,EACX,aAAa,EACb,cAAc,EACd,gBAAgB,EACjB;IACC,MAAM,YAAY,UAAU;IAC5B,MAAM,YAAY,YAAY,aAAa,AAAC,SAAc,OAAN;IACpD,MAAM,aAAa,YAAY,oBAAoB;IACnD,MAAM,UAAU,YAAY,gDAAgD;IAC5E,MAAM,cAAc,YAAY,sBAAsB;IAEtD,qBACE,6LAAC;QAAI,WAAW,AAAC,YAAuB,OAAZ,aAAY;;0BACtC,6LAAC;gBACC,SAAS;gBACT,WAAW,AAAC,gDAAuD,OAAR,SAAQ;0BAEnE,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;gCACZ,2BACC,6LAAC,sOAAW;oCAAC,MAAM;oCAAI,WAAW;;;;;6FAElC,6LAAC,yOAAY;oCAAC,MAAM;oCAAI,WAAW;;;;;;8CAErC,6LAAC;oCAAK,WAAW,AAAC,uBAAiC,OAAX;8CAAe;;;;;;;;;;;;sCAEzD,6LAAC,sLAAK;4BACJ,SAAS,YAAY,YAAY;4BACjC,MAAK;4BACL,WAAW,YAAY,kCAAkC;;gCAExD,OAAO,MAAM;gCAAC;gCAAO,OAAO,MAAM,KAAK,IAAI,MAAM;;;;;;;;;;;;;;;;;;YAKvD,4BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAW,cAAc,cAAc;8BACzC,OAAO,GAAG,CAAC,CAAA,sBACV,6LAAC;4BAEC,OAAO;4BACP,SAAS;4BACT,YAAY,eAAe,QAAQ,CAAC,MAAM,EAAE;4BAC5C,aAAa;4BACb,UAAU,CAAC,SAAW,cAAc,OAAO;4BAC3C,kBAAkB,IAAM,iBAAiB,MAAM,EAAE;2BAN5C,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;AAc7B;MA7DM;AA+DC,SAAS,oBAAoB,KAKT;QALS,EAClC,gBAAgB,eAAe,EAC/B,iBAAiB,aAAa,EAC9B,cAAc,EACd,WAAW,EACc,GALS;QAwE9B;;IAlEJ,MAAM,EACJ,SAAS,EACT,eAAe,EACf,kBAAkB,EAClB,iBAAiB,EACjB,mBAAmB,EACpB,GAAG,IAAA,qKAAiB;IAErB,cAAc;IACd,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAe;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAe;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAc,IAAI,IAAI;QAAC;QAAG;QAAG;KAAE,IAAI,4CAA4C;IAEnI,yBAAyB;IACzB,MAAM,sBAAsB,IAAA,iLAA+B,EAAC;IAC5D,MAAM,mBAAmB,IAAA,2KAAyB,EAAC;IACnD,MAAM,cAAc,IAAA,sKAAoB,EAAC;IAEzC,kFAAkF;IAClF,MAAM,oBAAoB,UAAU,MAAM,CAAC,MAAM,CAC/C,CAAA,QACE,AAAC,MAAM,KAAK,KAAK,KAAK,MAAM,UAAU,IACrC,MAAM,KAAK,GAAG,KAAK,MAAM,UAAU,IAAK,kBAAkB;QAC3D,MAAM,gBAAgB,CAAC,yBAAyB;;IAGpD,oEAAoE;IACpE,MAAM,eAAe;IAErB,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,wKAAO;uDAAC;YAC7B,IAAI,CAAC,YAAY,IAAI,IAAI,OAAO;YAEhC,MAAM,QAAQ,YAAY,WAAW;YACrC,OAAO,aAAa,MAAM;+DAAC,CAAA;wBAGzB;2BAFA,MAAM,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,UAClC,MAAM,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,YACpC,oBAAA,MAAM,UAAU,cAAhB,wCAAA,kBAAkB,WAAW,GAAG,QAAQ,CAAC;;;QAE7C;sDAAG;QAAC;QAAc;KAAY;IAE9B,2BAA2B;IAC3B,MAAM,gBAAgB,IAAA,wKAAO;sDAAC;YAC5B,MAAM,YAA2B,CAAC;YAElC,eAAe,OAAO;8DAAC,CAAA;oBACrB,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;wBAC3B,SAAS,CAAC,MAAM,KAAK,CAAC,GAAG,EAAE;oBAC7B;oBACA,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,CAAC;gBAC9B;;YAEA,wCAAwC;YACxC,OAAO,IAAI,CAAC,WAAW,OAAO;8DAAC,CAAA;oBAC7B,SAAS,CAAC,SAAS,OAAO,CAAC,IAAI;sEAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;;gBACvE;;YAEA,OAAO;QACT;qDAAG;QAAC;KAAe;IAEnB,sBAAsB;IACtB,MAAM,iBAAiB,IAAA,wKAAO;uDAAC;gBACtB;YAAP,OAAO,EAAA,uBAAA,UAAU,SAAS,cAAnB,2CAAA,qBAAqB,cAAc,KAAI,EAAE;QAClD;sDAAG;SAAC,uBAAA,UAAU,SAAS,cAAnB,2CAAA,qBAAqB,cAAc;KAAC;IAExC,MAAM,uBAAuB,IAAA,wKAAO;6DAAC;YACnC,OAAO,aAAa,MAAM;qEAAC,CAAA,QAAS,eAAe,QAAQ,CAAC,MAAM,EAAE;;QACtE;4DAAG;QAAC;QAAc;KAAe;IAEjC,wBAAwB;IACxB,MAAM,kBAAkB,OAAO;QAC7B,IAAI,qBAAqB,MAAM;YAC7B,MAAM;YACN;QACF;QAEA,IAAI,aAAa;YACf,IAAI;gBACF,MAAM,aAAa,MAAM,YAAY;gBACrC,IAAI,cAAc,OAAO,eAAe,YAAY,sBAAsB,YAAY;oBACpF,MAAM,UAAU;oBAChB,MAAM,OAAO,QAAQ,gBAAgB,CAAC,EAAE,IAAI;oBAC5C,MAAM,SAAS,SAAS;oBACxB,gBAAgB,MAAM,IAAI,EAAE,MAAM,kBAAkB,QAAQ,MAAM,MAAM,EAAE,MAAM,UAAU;oBAC1F;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,IAAI,CAAC,uDAAuD;YACtE;QACF;QAEA,MAAM,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;QAC9C,MAAM,SAAS,SAAS;QACxB,gBAAgB,MAAM,IAAI,EAAE,MAAM,kBAAkB,QAAQ,MAAM,MAAM,EAAE,MAAM,UAAU;IAC5F;IAEA,MAAM,kBAAkB,OAAO;QAC7B,IAAI,gBAAgB,MAAM;YACxB,MAAM;YACN;QACF;QACA,cAAc,MAAM,IAAI,EAAE,aAAa,MAAM,WAAW,EAAE,MAAM,MAAM,EAAE,MAAM,UAAU;IAC1F;IAEA,MAAM,kBAAkB,OAAO;QAC7B,IAAI,CAAC,MAAM,MAAM,EAAE;YACjB,MAAM;YACN;QACF;QAEA,IAAI,aAAa;YACf,IAAI;gBACF,MAAM,aAAa,MAAM,YAAY,MAAM,MAAM;gBACjD,IAAI,cAAc,OAAO,eAAe,YAAY,gBAAgB,YAAY;oBAC9E,MAAM,UAAU;oBAChB,MAAM,eAAe,AAAC,GAAqB,OAAnB,QAAQ,UAAU;oBAC1C,eAAe,MAAM,IAAI,EAAE,cAAc,MAAM,UAAU;oBACzD;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,IAAI,CAAC,2DAA2D;YAC1E;QACF;QAEA,MAAM,eAAe,IAAA,4JAAU,EAAC,MAAM,MAAM;QAC5C,eAAe,MAAM,IAAI,EAAE,cAAc,MAAM,UAAU;IAC3D;IAEA,MAAM,gBAAgB,CAAC;QACrB,iBAAiB;QACjB,iBAAiB;IACnB;IAEA,MAAM,oBAAoB,CAAC,OAAc;QACvC,OAAQ;YACN,KAAK;gBACH,gBAAgB;gBAChB;YACF,KAAK;gBACH,cAAc;gBACd;YACF,KAAK;gBACH,gBAAgB;gBAChB;YACF,KAAK;gBACH,gBAAgB;gBAChB;YACF,KAAK;gBACH,gBAAgB;gBAChB;QACJ;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,eAAe;QAEpB,IAAI,cAAc,aAAa,EAAE;YAC/B,IAAI,UAAU,aAAa,CAAC,eAAe,EAAE;gBAC3C;YACF;YACA,mBAAmB,cAAc,IAAI,EAAE,cAAc,EAAE,EAAE;QAC3D;QAEA,IAAI,cAAc,KAAK,GAAG,GAAG;YAC3B,gBACE,YACA,UAAU,UAAU,CAAC,WAAgD,CAAC,IAAI,GAAG;QAEjF;QAEA,iBAAiB;QACjB,iBAAiB;IACnB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,MAAM,cAAc,IAAI,IAAI;QAC5B,IAAI,YAAY,GAAG,CAAC,QAAQ;YAC1B,YAAY,MAAM,CAAC;QACrB,OAAO;YACL,YAAY,GAAG,CAAC;QAClB;QACA,kBAAkB;IACpB;IAEA,MAAM,eAAe,OAAO,IAAI,CAAC,eAC9B,GAAG,CAAC,QACJ,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI;IAEtB,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BAAgB;;;;;;8BAC/B,6LAAC;oBAAE,WAAU;8BAAsC;;;;;;8BACnD,6LAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAKhD;IAEA,uCAAuC;IACvC,MAAM,WAAW,aAAa,CAAC,EAAE,IAAI,EAAE;IACvC,MAAM,gBAAgB,OAAO,IAAI,CAAC,eAC/B,GAAG,CAAC,QACJ,MAAM,CAAC,CAAA,QAAS,QAAQ,GACxB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI;IAEtB,qBACE;;0BACE,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,yNAAQ;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAC9B,6LAAC,sLAAK;oDAAC,SAAQ;oDAAU,MAAK;oDAAK,WAAU;;wDAA4B;wDAC7D,6BAAA,8BAAA,mBAAoB;;;;;;;8DAEhC,6LAAC,sLAAK;oDAAC,SAAQ;oDAAU,MAAK;oDAAK,WAAU;;wDAAgC;wDACjE,wBAAA,yBAAA,cAAe;;;;;;;gDAE1B,qCACC,6LAAC,sLAAK;oDAAC,SAAQ;oDAAY,MAAK;8DAC7B,oBAAoB,MAAM,CAAC,GAAG,WAAW,KAAK,oBAAoB,KAAK,CAAC;;;;;;;;;;;;;;;;;kDAMjF,6LAAC,uLAAM;wCACL,SAAS,IAAM,eAAe,CAAC;wCAC/B,SAAS,cAAc,YAAY;wCACnC,MAAK;wCACL,UAAU,4BAAc,6LAAC,6MAAI;4CAAC,MAAM;;;;;mEAAS,6LAAC,0NAAO;4CAAC,MAAM;;;;;;wCAC5D,OAAO,cAAc,4BAA4B;wCACjD,WAAW,cAAc,sCAAsC;kDAE9D,cAAc,aAAa;;;;;;;;;;;;0CAKhC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,mNAAM;wCAAC,WAAU;;;;;;kDAClB,6LAAC;wCACC,MAAK;wCACL,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;;;;;;;;;;;;;;;;;;oBAMf,qBAAqB,MAAM,GAAG,mBAC7B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,gNAAK;wCAAC,WAAU;wCAAkB,MAAM;wCAAI,MAAK;;;;;;kDAClD,6LAAC;wCAAK,WAAU;kDAA4B;;;;;;kDAC5C,6LAAC,sLAAK;wCAAC,SAAQ;wCAAU,MAAK;wCAAK,WAAU;kDAC1C,qBAAqB,MAAM;;;;;;;;;;;;0CAGhC,6LAAC;gCAAI,WAAW,cAAc,cAAc;0CACzC,qBAAqB,GAAG,CAAC,CAAA,sBACxB,6LAAC;wCAEC,OAAO;wCACP,SAAS;wCACT,YAAY;wCACZ,aAAa;wCACb,UAAU,CAAC,SAAW,kBAAkB,OAAO;wCAC/C,kBAAkB,IAAM,oBAAoB,MAAM,EAAE;uCAN/C,MAAM,EAAE;;;;;;;;;;;;;;;;oBActB,SAAS,MAAM,GAAG,mBACjB,6LAAC;wBAEC,OAAO;wBACP,QAAQ;wBACR,YAAY,eAAe,GAAG,CAAC;wBAC/B,UAAU,IAAM,oBAAoB;wBACpC,aAAa;wBACb,aAAa;wBACb,eAAe;wBACf,gBAAgB;wBAChB,kBAAkB;uBATb;;;;;oBAcR,cAAc,MAAM,GAAG,mBACtB,6LAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAA,sBACjB,6LAAC;gCAEC,OAAO;gCACP,QAAQ,aAAa,CAAC,MAAM;gCAC5B,YAAY,eAAe,GAAG,CAAC;gCAC/B,UAAU,IAAM,oBAAoB;gCACpC,aAAa;gCACb,aAAa;gCACb,eAAe;gCACf,gBAAgB;gCAChB,kBAAkB;+BATb;;;;;;;;;;oBAgBZ,eAAe,aAAa,MAAM,KAAK,mBACtC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAgB;;;;;;0CAC/B,6LAAC;gCAAE,WAAU;0CAA8B;;;;;;0CAC3C,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;YAQ/C,+BACC,6LAAC,sLAAc;gBACb,QAAQ;gBACR,SAAS;oBACP,iBAAiB;oBACjB,iBAAiB;gBACnB;gBACA,OAAO;gBACP,YAAY,UAAU,UAAU;gBAChC,eAAe,UAAU,aAAa;gBACtC,aAAa;;;;;;YAKhB,8BACC,6LAAC,kLAAiB;gBAChB,OAAO;gBACP,QAAQ;gBACR,SAAS,IAAM,gBAAgB;gBAC/B,YAAY,eAAe,QAAQ,CAAC,aAAa,EAAE;gBACnD,kBAAkB;oBAChB,oBAAoB,aAAa,EAAE;gBACrC;gBACA,QAAQ,IAAM,cAAc;;;;;;;;AAKtC;GAhXgB;;QAYV,qKAAiB;;;MAZP","debugId":null}},
    {"offset": {"line": 1796, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/SpellcastingStats.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { SpellcastingAbility } from '@/types/character';\r\nimport { Edit3, Calculator, Zap, Shield } from 'lucide-react';\r\nimport {\r\n  getClassSpellcastingAbility,\r\n  getCharacterSpellcastingAbility,\r\n  getSpellAttackString,\r\n  getSpellSaveDCString,\r\n  isSpellcaster,\r\n} from '@/utils/calculations';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { Switch } from '@/components/ui/forms/switch';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\n\r\nexport const SpellcastingStats: React.FC = () => {\r\n  const { character, updateCharacter } = useCharacterStore();\r\n  const [showOverrides, setShowOverrides] = useState(false);\r\n\r\n  // Check if character is a spellcaster\r\n  const characterIsSpellcaster = isSpellcaster(character);\r\n\r\n  if (!characterIsSpellcaster) {\r\n    return (\r\n      <div className=\"rounded-lg border-2 border-purple-200 bg-white p-6 shadow-sm\">\r\n        <h3 className=\"mb-4 flex items-center gap-2 text-lg font-bold text-purple-800\">\r\n          <span className=\"text-purple-600\">‚ú®</span>\r\n          Spellcasting\r\n        </h3>\r\n        <div className=\"py-6 text-center text-gray-500\">\r\n          <div className=\"mb-2 text-4xl\">üö´</div>\r\n          <p className=\"font-semibold text-gray-700\">Not a spellcaster</p>\r\n          <p className=\"mt-1 text-sm\">\r\n            Select a spellcasting class to enable this section.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentSpellcastingAbility = getCharacterSpellcastingAbility(character);\r\n  const classDefaultAbility = getClassSpellcastingAbility(character.class.name);\r\n\r\n  const handleAbilityOverrideToggle = (useOverride: boolean) => {\r\n    updateCharacter({\r\n      spellcastingStats: {\r\n        ...character.spellcastingStats,\r\n        isAbilityOverridden: useOverride,\r\n        spellcastingAbility: useOverride\r\n          ? character.spellcastingStats.spellcastingAbility ||\r\n            classDefaultAbility\r\n          : null,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleAbilityChange = (ability: string) => {\r\n    updateCharacter({\r\n      spellcastingStats: {\r\n        ...character.spellcastingStats,\r\n        spellcastingAbility: ability as SpellcastingAbility,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleAttackBonusOverride = (value: string) => {\r\n    const bonus = value === '' ? undefined : parseInt(value);\r\n    updateCharacter({\r\n      spellcastingStats: {\r\n        ...character.spellcastingStats,\r\n        spellAttackBonus: bonus,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleSaveDCOverride = (value: string) => {\r\n    const dc = value === '' ? undefined : parseInt(value);\r\n    updateCharacter({\r\n      spellcastingStats: {\r\n        ...character.spellcastingStats,\r\n        spellSaveDC: dc,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-lg border-2 border-purple-200 bg-white p-6 shadow-sm\">\r\n      {/* Header */}\r\n      <div className=\"mb-6 flex items-center justify-between border-b-2 border-gray-200 pb-4\">\r\n        <h3 className=\"flex items-center gap-2 text-lg font-bold text-purple-800\">\r\n          <span className=\"text-purple-600\">‚ú®</span>\r\n          Spellcasting Statistics\r\n        </h3>\r\n        <Button\r\n          onClick={() => setShowOverrides(!showOverrides)}\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          title=\"Toggle manual overrides\"\r\n        >\r\n          {showOverrides ? <Calculator size={20} /> : <Edit3 size={20} />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"space-y-4\">\r\n        {/* Spellcasting Ability */}\r\n        <div className=\"rounded-lg border-2 border-purple-200 bg-purple-50 p-4\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h4 className=\"flex items-center gap-2 font-bold text-purple-800\">\r\n              <span className=\"text-purple-600\">üß†</span>\r\n              Spellcasting Ability\r\n            </h4>\r\n            {showOverrides && (\r\n              <Switch\r\n                checked={character.spellcastingStats.isAbilityOverridden}\r\n                onCheckedChange={handleAbilityOverrideToggle}\r\n                label={character.spellcastingStats.isAbilityOverridden ? \"Manual\" : \"Auto\"}\r\n                size=\"sm\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            {character.spellcastingStats.isAbilityOverridden ? (\r\n              <div className=\"w-full max-w-xs\">\r\n                <SelectField\r\n                  value={\r\n                    character.spellcastingStats.spellcastingAbility ||\r\n                    'intelligence'\r\n                  }\r\n                  onValueChange={handleAbilityChange}\r\n                >\r\n                  <SelectItem value=\"intelligence\">\r\n                    Intelligence\r\n                    <span className=\"text-xs text-gray-500 block\">Logic, reasoning, memory</span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"wisdom\">\r\n                    Wisdom\r\n                    <span className=\"text-xs text-gray-500 block\">Awareness, insight, intuition</span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"charisma\">\r\n                    Charisma\r\n                    <span className=\"text-xs text-gray-500 block\">Force of personality, leadership</span>\r\n                  </SelectItem>\r\n                </SelectField>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"secondary\" size=\"md\" className=\"capitalize\">\r\n                  {classDefaultAbility || 'Unknown'}\r\n                </Badge>\r\n                {classDefaultAbility && (\r\n                  <span className=\"text-sm text-purple-600\">\r\n                    (from {character.class.name})\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Attack Bonus and Save DC */}\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n          {/* Spell Attack Bonus */}\r\n          <div className=\"text-center\">\r\n            <div className=\"rounded-lg border-2 border-red-200 bg-red-50 p-4 transition-all hover:border-red-300 hover:shadow-sm\">\r\n              <div className=\"mb-2 flex items-center justify-center gap-1 text-xs font-bold text-red-700 uppercase tracking-wide\">\r\n                <Zap size={14} />\r\n                Spell Attack\r\n              </div>\r\n              {showOverrides ? (\r\n                <Input\r\n                  type=\"number\"\r\n                  value={\r\n                    character.spellcastingStats.spellAttackBonus?.toString() ||\r\n                    ''\r\n                  }\r\n                  onChange={e => handleAttackBonusOverride(e.target.value)}\r\n                  placeholder=\"Auto\"\r\n                  className=\"mb-2 w-full text-center text-xl font-bold\"\r\n                  size=\"sm\"\r\n                />\r\n              ) : (\r\n                <div className=\"mb-2 text-2xl font-bold text-red-900\">\r\n                  {getSpellAttackString(character)}\r\n                </div>\r\n              )}\r\n              <Badge \r\n                variant={character.spellcastingStats.spellAttackBonus !== undefined ? \"danger\" : \"neutral\"}\r\n                size=\"sm\"\r\n              >\r\n                {character.spellcastingStats.spellAttackBonus !== undefined\r\n                  ? 'manual'\r\n                  : 'auto'}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Spell Save DC */}\r\n          <div className=\"text-center\">\r\n            <div className=\"rounded-lg border-2 border-blue-200 bg-blue-50 p-4 transition-all hover:border-blue-300 hover:shadow-sm\">\r\n              <div className=\"mb-2 flex items-center justify-center gap-1 text-xs font-bold text-blue-700 uppercase tracking-wide\">\r\n                <Shield size={14} />\r\n                Spell Save DC\r\n              </div>\r\n              {showOverrides ? (\r\n                <Input\r\n                  type=\"number\"\r\n                  value={\r\n                    character.spellcastingStats.spellSaveDC?.toString() || ''\r\n                  }\r\n                  onChange={e => handleSaveDCOverride(e.target.value)}\r\n                  placeholder=\"Auto\"\r\n                  className=\"mb-2 w-full text-center text-xl font-bold\"\r\n                  size=\"sm\"\r\n                />\r\n              ) : (\r\n                <div className=\"mb-2 text-2xl font-bold text-blue-900\">\r\n                  {getSpellSaveDCString(character)}\r\n                </div>\r\n              )}\r\n              <Badge \r\n                variant={character.spellcastingStats.spellSaveDC !== undefined ? \"success\" : \"neutral\"}\r\n                size=\"sm\"\r\n              >\r\n                {character.spellcastingStats.spellSaveDC !== undefined\r\n                  ? 'manual'\r\n                  : 'auto'}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Calculation Info */}\r\n        {!showOverrides && currentSpellcastingAbility && (\r\n          <div className=\"rounded-lg border-2 border-gray-200 bg-gray-50 p-4\">\r\n            <div className=\"mb-2 font-bold text-gray-800\">Calculations:</div>\r\n            <div className=\"space-y-1 text-sm text-gray-700\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"danger\" size=\"sm\">Attack</Badge>\r\n                <span>{currentSpellcastingAbility} modifier + proficiency</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"success\" size=\"sm\">Save DC</Badge>\r\n                <span>8 + {currentSpellcastingAbility} modifier + proficiency</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;;;AAjBA;;;;;;;;;;AAmBO,MAAM,oBAA8B;QA+JvB,+CAmCA;;IAjMlB,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,GAAG,IAAA,qKAAiB;IACxD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IAEnD,sCAAsC;IACtC,MAAM,yBAAyB,IAAA,+JAAa,EAAC;IAE7C,IAAI,CAAC,wBAAwB;QAC3B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC;4BAAK,WAAU;sCAAkB;;;;;;wBAAQ;;;;;;;8BAG5C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAgB;;;;;;sCAC/B,6LAAC;4BAAE,WAAU;sCAA8B;;;;;;sCAC3C,6LAAC;4BAAE,WAAU;sCAAe;;;;;;;;;;;;;;;;;;IAMpC;IAEA,MAAM,6BAA6B,IAAA,iLAA+B,EAAC;IACnE,MAAM,sBAAsB,IAAA,6KAA2B,EAAC,UAAU,KAAK,CAAC,IAAI;IAE5E,MAAM,8BAA8B,CAAC;QACnC,gBAAgB;YACd,mBAAmB;gBACjB,GAAG,UAAU,iBAAiB;gBAC9B,qBAAqB;gBACrB,qBAAqB,cACjB,UAAU,iBAAiB,CAAC,mBAAmB,IAC/C,sBACA;YACN;QACF;IACF;IAEA,MAAM,sBAAsB,CAAC;QAC3B,gBAAgB;YACd,mBAAmB;gBACjB,GAAG,UAAU,iBAAiB;gBAC9B,qBAAqB;YACvB;QACF;IACF;IAEA,MAAM,4BAA4B,CAAC;QACjC,MAAM,QAAQ,UAAU,KAAK,YAAY,SAAS;QAClD,gBAAgB;YACd,mBAAmB;gBACjB,GAAG,UAAU,iBAAiB;gBAC9B,kBAAkB;YACpB;QACF;IACF;IAEA,MAAM,uBAAuB,CAAC;QAC5B,MAAM,KAAK,UAAU,KAAK,YAAY,SAAS;QAC/C,gBAAgB;YACd,mBAAmB;gBACjB,GAAG,UAAU,iBAAiB;gBAC9B,aAAa;YACf;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC;gCAAK,WAAU;0CAAkB;;;;;;4BAAQ;;;;;;;kCAG5C,6LAAC,uLAAM;wBACL,SAAS,IAAM,iBAAiB,CAAC;wBACjC,SAAQ;wBACR,MAAK;wBACL,OAAM;kCAEL,8BAAgB,6LAAC,+NAAU;4BAAC,MAAM;;;;;qFAAS,6LAAC,sNAAK;4BAAC,MAAM;;;;;;;;;;;;;;;;;0BAK7D,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;gDAAK,WAAU;0DAAkB;;;;;;4CAAS;;;;;;;oCAG5C,+BACC,6LAAC,uKAAM;wCACL,SAAS,UAAU,iBAAiB,CAAC,mBAAmB;wCACxD,iBAAiB;wCACjB,OAAO,UAAU,iBAAiB,CAAC,mBAAmB,GAAG,WAAW;wCACpE,MAAK;;;;;;;;;;;;0CAKX,6LAAC;gCAAI,WAAU;0CACZ,UAAU,iBAAiB,CAAC,mBAAmB,iBAC9C,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,4KAAW;wCACV,OACE,UAAU,iBAAiB,CAAC,mBAAmB,IAC/C;wCAEF,eAAe;;0DAEf,6LAAC,2KAAU;gDAAC,OAAM;;oDAAe;kEAE/B,6LAAC;wDAAK,WAAU;kEAA8B;;;;;;;;;;;;0DAEhD,6LAAC,2KAAU;gDAAC,OAAM;;oDAAS;kEAEzB,6LAAC;wDAAK,WAAU;kEAA8B;;;;;;;;;;;;0DAEhD,6LAAC,2KAAU;gDAAC,OAAM;;oDAAW;kEAE3B,6LAAC;wDAAK,WAAU;kEAA8B;;;;;;;;;;;;;;;;;;;;;;6FAKpD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sLAAK;4CAAC,SAAQ;4CAAY,MAAK;4CAAK,WAAU;sDAC5C,uBAAuB;;;;;;wCAEzB,qCACC,6LAAC;4CAAK,WAAU;;gDAA0B;gDACjC,UAAU,KAAK,CAAC,IAAI;gDAAC;;;;;;;;;;;;;;;;;;;;;;;;kCASxC,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,0MAAG;oDAAC,MAAM;;;;;;gDAAM;;;;;;;wCAGlB,8BACC,6LAAC,qKAAK;4CACJ,MAAK;4CACL,OACE,EAAA,gDAAA,UAAU,iBAAiB,CAAC,gBAAgB,cAA5C,oEAAA,8CAA8C,QAAQ,OACtD;4CAEF,UAAU,CAAA,IAAK,0BAA0B,EAAE,MAAM,CAAC,KAAK;4CACvD,aAAY;4CACZ,WAAU;4CACV,MAAK;;;;;qGAGP,6LAAC;4CAAI,WAAU;sDACZ,IAAA,sKAAoB,EAAC;;;;;;sDAG1B,6LAAC,sLAAK;4CACJ,SAAS,UAAU,iBAAiB,CAAC,gBAAgB,KAAK,YAAY,WAAW;4CACjF,MAAK;sDAEJ,UAAU,iBAAiB,CAAC,gBAAgB,KAAK,YAC9C,WACA;;;;;;;;;;;;;;;;;0CAMV,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,mNAAM;oDAAC,MAAM;;;;;;gDAAM;;;;;;;wCAGrB,8BACC,6LAAC,qKAAK;4CACJ,MAAK;4CACL,OACE,EAAA,2CAAA,UAAU,iBAAiB,CAAC,WAAW,cAAvC,+DAAA,yCAAyC,QAAQ,OAAM;4CAEzD,UAAU,CAAA,IAAK,qBAAqB,EAAE,MAAM,CAAC,KAAK;4CAClD,aAAY;4CACZ,WAAU;4CACV,MAAK;;;;;qGAGP,6LAAC;4CAAI,WAAU;sDACZ,IAAA,sKAAoB,EAAC;;;;;;sDAG1B,6LAAC,sLAAK;4CACJ,SAAS,UAAU,iBAAiB,CAAC,WAAW,KAAK,YAAY,YAAY;4CAC7E,MAAK;sDAEJ,UAAU,iBAAiB,CAAC,WAAW,KAAK,YACzC,WACA;;;;;;;;;;;;;;;;;;;;;;;oBAOX,CAAC,iBAAiB,4CACjB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAA+B;;;;;;0CAC9C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,sLAAK;gDAAC,SAAQ;gDAAS,MAAK;0DAAK;;;;;;0DAClC,6LAAC;;oDAAM;oDAA2B;;;;;;;;;;;;;kDAEpC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,sLAAK;gDAAC,SAAQ;gDAAU,MAAK;0DAAK;;;;;;0DACnC,6LAAC;;oDAAK;oDAAK;oDAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQtD;GA7Oa;;QAC4B,qKAAiB;;;KAD7C","debugId":null}},
    {"offset": {"line": 2383, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/WeaponInventory.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { Eye, Sword, Wand2 } from 'lucide-react';\r\nimport EquipmentModal from '@/components/ui/game/EquipmentModal';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\n\r\nexport const WeaponInventory: React.FC = () => {\r\n  const { character } = useCharacterStore();\r\n  const [showEquipmentModal, setShowEquipmentModal] = useState(false);\r\n\r\n  // Calculate equipped items\r\n  const equippedWeapons = character.weapons.filter(weapon => weapon.isEquipped);\r\n  const attunedItems =\r\n    character.magicItems.filter(item => item.isAttuned).length +\r\n    character.weapons.filter(weapon => weapon.isAttuned).length;\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"mb-4 flex items-center justify-end\">\r\n          <Button\r\n            onClick={() => setShowEquipmentModal(true)}\r\n            variant=\"primary\"\r\n            size=\"sm\"\r\n            leftIcon={<Eye size={16} />}\r\n            className=\"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700\"\r\n          >\r\n            View All Equipment\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Quick Overview */}\r\n        <div className=\"space-y-3\">\r\n          {/* Weapons Summary */}\r\n          <div\r\n            className=\"cursor-pointer rounded-lg border-2 border-blue-200 bg-white p-4 transition-all hover:shadow-md hover:border-blue-300\"\r\n            onClick={() => setShowEquipmentModal(true)}\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Sword className=\"h-5 w-5 text-blue-600\" />\r\n                <span className=\"font-bold text-gray-800\">Weapons</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"info\" size=\"sm\">\r\n                  {character.weapons.length} total\r\n                </Badge>\r\n                <Badge variant=\"success\" size=\"sm\">\r\n                  {equippedWeapons.length} equipped\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n            {equippedWeapons.length > 0 && (\r\n              <div className=\"mt-3 pt-3 border-t-2 border-gray-100\">\r\n                <div className=\"text-sm font-medium text-gray-700 mb-2\">Ready:</div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {equippedWeapons.slice(0, 3).map(weapon => (\r\n                    <Badge\r\n                      key={weapon.id}\r\n                      variant=\"info\"\r\n                      size=\"sm\"\r\n                      className=\"bg-blue-100 text-blue-800\"\r\n                    >\r\n                      {weapon.name}\r\n                    </Badge>\r\n                  ))}\r\n                  {equippedWeapons.length > 3 && (\r\n                    <Badge variant=\"info\" size=\"sm\" className=\"bg-blue-100 text-blue-800\">\r\n                      +{equippedWeapons.length - 3} more\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Magic Items Summary */}\r\n          <div\r\n            className=\"cursor-pointer rounded-lg border-2 border-purple-200 bg-white p-4 transition-all hover:shadow-md hover:border-purple-300\"\r\n            onClick={() => setShowEquipmentModal(true)}\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Wand2 className=\"h-5 w-5 text-purple-600\" />\r\n                <span className=\"font-bold text-gray-800\">Magic Items</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"primary\" size=\"sm\">\r\n                  {character.magicItems.length} total\r\n                </Badge>\r\n                <Badge variant=\"warning\" size=\"sm\">\r\n                  {attunedItems}/{character.attunementSlots.max} attuned\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n            {character.magicItems.length > 0 && (\r\n              <div className=\"mt-3 pt-3 border-t-2 border-gray-100\">\r\n                <div className=\"text-sm font-medium text-gray-700 mb-2\">Recent:</div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {character.magicItems.slice(0, 3).map(item => (\r\n                    <Badge\r\n                      key={item.id}\r\n                      variant=\"primary\"\r\n                      size=\"sm\"\r\n                      className=\"bg-purple-100 text-purple-800\"\r\n                    >\r\n                      {item.name}\r\n                    </Badge>\r\n                  ))}\r\n                  {character.magicItems.length > 3 && (\r\n                    <Badge variant=\"primary\" size=\"sm\" className=\"bg-purple-100 text-purple-800\">\r\n                      +{character.magicItems.length - 3} more\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {character.weapons.length === 0 &&\r\n            character.magicItems.length === 0 && (\r\n              <div className=\"py-8 text-center\">\r\n                <div className=\"mb-3 flex justify-center gap-3\">\r\n                  <Sword className=\"h-12 w-12 text-gray-300\" />\r\n                  <Wand2 className=\"h-12 w-12 text-gray-300\" />\r\n                </div>\r\n                <p className=\"font-semibold text-gray-700 text-lg\">No equipment added yet</p>\r\n                <p className=\"mt-2 text-sm text-gray-500\">\r\n                  Click &quot;View All Equipment&quot; to add weapons and magic items\r\n                </p>\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Equipment Modal */}\r\n      <EquipmentModal\r\n        isOpen={showEquipmentModal}\r\n        onClose={() => setShowEquipmentModal(false)}\r\n      />\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2784, "column": 0}, "map": {"version":3,"sources":["file:///home/irakli/Projects/RollKeeper/apps/web/src/components/ArmorDefenseManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { ArmorItem, ArmorCategory, ArmorType } from '@/types/character';\r\nimport { useCharacterStore } from '@/store/characterStore';\r\nimport { Plus, Edit2, Trash2, Shield, CheckCircle } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/feedback/Modal';\r\nimport DragDropList from '@/components/ui/layout/DragDropList';\r\nimport { Button } from '@/components/ui/forms/button';\r\nimport { Badge } from '@/components/ui/layout/badge';\r\nimport { Input } from '@/components/ui/forms/input';\r\nimport { Textarea } from '@/components/ui/forms/textarea';\r\nimport { SelectField, SelectItem } from '@/components/ui/forms/select';\r\nimport { Checkbox } from '@/components/ui/forms/checkbox';\r\n\r\nconst ARMOR_CATEGORIES: ArmorCategory[] = [\r\n  'light',\r\n  'medium',\r\n  'heavy',\r\n  'shield',\r\n];\r\nconst ARMOR_TYPES: { [key in ArmorCategory]: ArmorType[] } = {\r\n  light: ['padded', 'leather', 'studded-leather'],\r\n  medium: ['hide', 'chain-shirt', 'scale-mail', 'breastplate', 'half-plate'],\r\n  heavy: ['ring-mail', 'chain-mail', 'splint', 'plate'],\r\n  shield: ['shield'],\r\n};\r\n\r\nconst ARMOR_STATS: {\r\n  [key in ArmorType]: {\r\n    baseAC: number;\r\n    maxDex?: number;\r\n    stealth: boolean;\r\n    strength?: number;\r\n  };\r\n} = {\r\n  padded: { baseAC: 11, stealth: true },\r\n  leather: { baseAC: 11, stealth: false },\r\n  'studded-leather': { baseAC: 12, stealth: false },\r\n  hide: { baseAC: 12, maxDex: 2, stealth: false },\r\n  'chain-shirt': { baseAC: 13, maxDex: 2, stealth: false },\r\n  'scale-mail': { baseAC: 14, maxDex: 2, stealth: true },\r\n  breastplate: { baseAC: 14, maxDex: 2, stealth: false },\r\n  'half-plate': { baseAC: 15, maxDex: 2, stealth: true },\r\n  'ring-mail': { baseAC: 14, stealth: true },\r\n  'chain-mail': { baseAC: 16, strength: 13, stealth: true },\r\n  splint: { baseAC: 17, strength: 15, stealth: true },\r\n  plate: { baseAC: 18, strength: 15, stealth: true },\r\n  shield: { baseAC: 2, stealth: false },\r\n  custom: { baseAC: 10, stealth: false },\r\n};\r\n\r\ninterface ArmorFormData {\r\n  name: string;\r\n  category: ArmorCategory;\r\n  type: ArmorType;\r\n  baseAC: number;\r\n  maxDexBonus?: number;\r\n  stealthDisadvantage: boolean;\r\n  strengthRequirement?: number;\r\n  enhancementBonus: number;\r\n  isEquipped: boolean;\r\n  requiresAttunement: boolean;\r\n  isAttuned: boolean;\r\n  description: string;\r\n  weight?: number;\r\n  value?: number;\r\n}\r\n\r\nconst initialFormData: ArmorFormData = {\r\n  name: '',\r\n  category: 'light',\r\n  type: 'leather',\r\n  baseAC: 11,\r\n  maxDexBonus: undefined,\r\n  stealthDisadvantage: false,\r\n  strengthRequirement: undefined,\r\n  enhancementBonus: 0,\r\n  isEquipped: false,\r\n  requiresAttunement: false,\r\n  isAttuned: false,\r\n  description: '',\r\n  weight: undefined,\r\n  value: undefined,\r\n};\r\n\r\nexport default function ArmorDefenseManager() {\r\n  const {\r\n    character,\r\n    addArmorItem,\r\n    updateArmorItem,\r\n    deleteArmorItem,\r\n    equipArmorItem,\r\n    reorderArmorItems,\r\n  } = useCharacterStore();\r\n\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [formData, setFormData] = useState<ArmorFormData>(initialFormData);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!formData.name.trim()) return;\r\n\r\n    const armorData = {\r\n      ...formData,\r\n      name: formData.name.trim(),\r\n    };\r\n\r\n    if (editingId) {\r\n      updateArmorItem(editingId, armorData);\r\n      setEditingId(null);\r\n    } else {\r\n      addArmorItem(armorData);\r\n    }\r\n\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData(initialFormData);\r\n    setShowForm(false);\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleEdit = (armor: ArmorItem) => {\r\n    setFormData({\r\n      name: armor.name,\r\n      category: armor.category,\r\n      type: armor.type,\r\n      baseAC: armor.baseAC,\r\n      maxDexBonus: armor.maxDexBonus,\r\n      stealthDisadvantage: armor.stealthDisadvantage,\r\n      strengthRequirement: armor.strengthRequirement,\r\n      enhancementBonus: armor.enhancementBonus,\r\n      isEquipped: armor.isEquipped,\r\n      requiresAttunement: armor.requiresAttunement || false,\r\n      isAttuned: armor.isAttuned || false,\r\n      description: armor.description || '',\r\n      weight: armor.weight,\r\n      value: armor.value,\r\n    });\r\n    setEditingId(armor.id);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleTypeChange = (type: ArmorType) => {\r\n    const stats = ARMOR_STATS[type];\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      type,\r\n      baseAC: stats.baseAC,\r\n      maxDexBonus: stats.maxDex,\r\n      stealthDisadvantage: stats.stealth || false,\r\n      strengthRequirement: stats.strength,\r\n    }));\r\n  };\r\n\r\n  const equippedArmor = character.armorItems.filter(item => item.isEquipped);\r\n  const unequippedArmor = character.armorItems.filter(item => !item.isEquipped);\r\n\r\n  // Custom reorder handlers for equipped and unequipped armor\r\n  const handleReorderEquippedArmor = (\r\n    sourceIndex: number,\r\n    destinationIndex: number\r\n  ) => {\r\n    const sourceArmorId = equippedArmor[sourceIndex].id;\r\n    const destinationArmorId = equippedArmor[destinationIndex].id;\r\n\r\n    const sourceGlobalIndex = character.armorItems.findIndex(\r\n      item => item.id === sourceArmorId\r\n    );\r\n    const destinationGlobalIndex = character.armorItems.findIndex(\r\n      item => item.id === destinationArmorId\r\n    );\r\n\r\n    if (sourceGlobalIndex !== -1 && destinationGlobalIndex !== -1) {\r\n      reorderArmorItems(sourceGlobalIndex, destinationGlobalIndex);\r\n    }\r\n  };\r\n\r\n  const handleReorderUnequippedArmor = (\r\n    sourceIndex: number,\r\n    destinationIndex: number\r\n  ) => {\r\n    const sourceArmorId = unequippedArmor[sourceIndex].id;\r\n    const destinationArmorId = unequippedArmor[destinationIndex].id;\r\n\r\n    const sourceGlobalIndex = character.armorItems.findIndex(\r\n      item => item.id === sourceArmorId\r\n    );\r\n    const destinationGlobalIndex = character.armorItems.findIndex(\r\n      item => item.id === destinationArmorId\r\n    );\r\n\r\n    if (sourceGlobalIndex !== -1 && destinationGlobalIndex !== -1) {\r\n      reorderArmorItems(sourceGlobalIndex, destinationGlobalIndex);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Add Button */}\r\n      <div className=\"flex items-center justify-end\">\r\n        <Button\r\n          onClick={() => setShowForm(true)}\r\n          variant=\"primary\"\r\n          size=\"sm\"\r\n          leftIcon={<Plus size={16} />}\r\n          className=\"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700\"\r\n        >\r\n          Add Armor\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Equipped Armor */}\r\n      {equippedArmor.length > 0 && (\r\n        <div>\r\n          <h4 className=\"text-md mb-3 flex items-center gap-2 font-semibold text-blue-800\">\r\n            <CheckCircle size={16} className=\"text-green-600\" />\r\n            Equipped Armor\r\n          </h4>\r\n          <DragDropList\r\n            items={equippedArmor}\r\n            onReorder={handleReorderEquippedArmor}\r\n            keyExtractor={armor => armor.id}\r\n            className=\"space-y-3\"\r\n            showDragHandle={true}\r\n            dragHandlePosition=\"left\"\r\n            renderItem={armor => (\r\n              <ArmorCard\r\n                armor={armor}\r\n                onEdit={handleEdit}\r\n                onDelete={() => deleteArmorItem(armor.id)}\r\n                onToggleEquip={() =>\r\n                  equipArmorItem(armor.id, !armor.isEquipped)\r\n                }\r\n                equipped={true}\r\n              />\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Unequipped Armor */}\r\n      {unequippedArmor.length > 0 && (\r\n        <div>\r\n          <h4 className=\"text-md mb-3 font-semibold text-gray-700\">\r\n            Available Armor ({unequippedArmor.length})\r\n          </h4>\r\n          <DragDropList\r\n            items={unequippedArmor}\r\n            onReorder={handleReorderUnequippedArmor}\r\n            keyExtractor={armor => armor.id}\r\n            className=\"space-y-3\"\r\n            showDragHandle={true}\r\n            dragHandlePosition=\"left\"\r\n            renderItem={armor => (\r\n              <ArmorCard\r\n                armor={armor}\r\n                onEdit={handleEdit}\r\n                onDelete={() => deleteArmorItem(armor.id)}\r\n                onToggleEquip={() =>\r\n                  equipArmorItem(armor.id, !armor.isEquipped)\r\n                }\r\n                equipped={false}\r\n              />\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {character.armorItems.length === 0 && (\r\n        <div className=\"py-8 text-center text-gray-500\">\r\n          <Shield className=\"mx-auto mb-2 h-12 w-12 text-gray-300\" />\r\n          <p className=\"font-medium\">No armor items added yet</p>\r\n          <p className=\"mt-1 text-sm\">\r\n            Add armor pieces to manage your AC and defenses\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add/Edit Form */}\r\n      <Modal\r\n        isOpen={showForm}\r\n        onClose={resetForm}\r\n        title={editingId ? 'Edit Armor' : 'Add Armor'}\r\n        size=\"lg\"\r\n        closeOnBackdropClick={true}\r\n      >\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          {/* Section: Basic Information */}\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n              Basic Information\r\n            </h4>\r\n            \r\n            <Input\r\n              label=\"Name\"\r\n              value={formData.name}\r\n              onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder=\"e.g., Chain Mail, Leather Armor +1\"\r\n              required\r\n            />\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"mb-2 block text-sm font-medium text-gray-700\">Category</label>\r\n                <SelectField\r\n                  value={formData.category}\r\n                  onValueChange={value => {\r\n                    const category = value as ArmorCategory;\r\n                    const firstType = ARMOR_TYPES[category][0];\r\n                    setFormData({ ...formData, category });\r\n                    handleTypeChange(firstType);\r\n                  }}\r\n                >\r\n                  {ARMOR_CATEGORIES.map(category => (\r\n                    <SelectItem key={category} value={category}>\r\n                      {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectField>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-2 block text-sm font-medium text-gray-700\">Type</label>\r\n                <SelectField\r\n                  value={formData.type}\r\n                  onValueChange={value => handleTypeChange(value as ArmorType)}\r\n                >\r\n                  {ARMOR_TYPES[formData.category].map(type => (\r\n                    <SelectItem key={type} value={type}>\r\n                      {type.charAt(0).toUpperCase() + type.slice(1).replace('-', ' ')}\r\n                    </SelectItem>\r\n                  ))}\r\n                  <SelectItem value=\"custom\">Custom</SelectItem>\r\n                </SelectField>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Section: Armor Stats */}\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n              Armor Stats\r\n            </h4>\r\n            \r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <Input\r\n                label=\"Base AC\"\r\n                type=\"number\"\r\n                value={formData.baseAC.toString()}\r\n                onChange={e => setFormData({ ...formData, baseAC: parseInt(e.target.value) || 10 })}\r\n                min={10}\r\n                max={30}\r\n              />\r\n\r\n              <Input\r\n                label=\"Max Dex Bonus\"\r\n                type=\"number\"\r\n                value={formData.maxDexBonus?.toString() || ''}\r\n                onChange={e => setFormData({\r\n                  ...formData,\r\n                  maxDexBonus: e.target.value ? parseInt(e.target.value) : undefined,\r\n                })}\r\n                placeholder=\"Unlimited\"\r\n                min={0}\r\n                max={10}\r\n              />\r\n\r\n              <Input\r\n                label=\"Enhancement\"\r\n                type=\"number\"\r\n                value={formData.enhancementBonus.toString()}\r\n                onChange={e => setFormData({ ...formData, enhancementBonus: parseInt(e.target.value) || 0 })}\r\n                min={0}\r\n                max={3}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Section: Description */}\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n              Description\r\n            </h4>\r\n            \r\n            <Textarea\r\n              label=\"Special Properties\"\r\n              value={formData.description}\r\n              onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n              rows={3}\r\n              placeholder=\"Special properties, abilities, or description...\"\r\n            />\r\n          </div>\r\n\r\n          {/* Section: Properties */}\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"text-sm font-bold text-gray-800 uppercase tracking-wide border-b-2 border-gray-200 pb-2\">\r\n              Properties\r\n            </h4>\r\n            \r\n            <div className=\"flex flex-wrap gap-4\">\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Checkbox\r\n                  checked={formData.isEquipped}\r\n                  onCheckedChange={checked => setFormData({ ...formData, isEquipped: checked as boolean })}\r\n                />\r\n                <span className=\"text-sm font-medium text-gray-800\">Currently Equipped</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Checkbox\r\n                  checked={formData.stealthDisadvantage}\r\n                  onCheckedChange={checked => setFormData({ ...formData, stealthDisadvantage: checked as boolean })}\r\n                />\r\n                <span className=\"text-sm font-medium text-gray-800\">Stealth Disadvantage</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <Checkbox\r\n                  checked={formData.requiresAttunement}\r\n                  onCheckedChange={checked => setFormData({\r\n                    ...formData,\r\n                    requiresAttunement: checked as boolean,\r\n                    isAttuned: checked ? formData.isAttuned : false,\r\n                  })}\r\n                />\r\n                <span className=\"text-sm font-medium text-gray-800\">Requires Attunement</span>\r\n              </label>\r\n\r\n              {formData.requiresAttunement && (\r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <Checkbox\r\n                    checked={formData.isAttuned}\r\n                    onCheckedChange={checked => setFormData({ ...formData, isAttuned: checked as boolean })}\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-800\">Attuned</span>\r\n                </label>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Form Actions */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t-2 border-gray-200\">\r\n            <Button\r\n              type=\"button\"\r\n              onClick={resetForm}\r\n              variant=\"outline\"\r\n              size=\"md\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"primary\"\r\n              size=\"md\"\r\n              className=\"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700\"\r\n            >\r\n              {editingId ? 'Update' : 'Add'} Armor\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ArmorCardProps {\r\n  armor: ArmorItem;\r\n  onEdit: (armor: ArmorItem) => void;\r\n  onDelete: () => void;\r\n  onToggleEquip: () => void;\r\n  equipped: boolean;\r\n}\r\n\r\nfunction ArmorCard({\r\n  armor,\r\n  onEdit,\r\n  onDelete,\r\n  onToggleEquip,\r\n  equipped,\r\n}: ArmorCardProps) {\r\n  const totalAC = armor.baseAC + armor.enhancementBonus;\r\n\r\n  return (\r\n    <div\r\n      className={`rounded-lg border-2 p-4 transition-all hover:shadow-md ${\r\n        equipped\r\n          ? 'border-green-300 bg-white'\r\n          : 'border-gray-200 bg-white hover:border-gray-300'\r\n      }`}\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"mb-2 flex items-center gap-2 flex-wrap\">\r\n            <h4 className=\"font-bold text-gray-800\">{armor.name}</h4>\r\n            {armor.enhancementBonus > 0 && (\r\n              <Badge variant=\"warning\" size=\"sm\">\r\n                +{armor.enhancementBonus}\r\n              </Badge>\r\n            )}\r\n            {armor.requiresAttunement && (\r\n              <Badge\r\n                variant={armor.isAttuned ? \"primary\" : \"secondary\"}\r\n                size=\"sm\"\r\n              >\r\n                {armor.isAttuned ? 'Attuned' : 'Requires Attunement'}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-2 text-sm text-gray-600\">\r\n            <span className=\"font-semibold text-gray-800\">AC {totalAC}</span> ‚Ä¢ {armor.category} armor\r\n            {armor.maxDexBonus !== undefined && (\r\n              <span> ‚Ä¢ Max Dex +{armor.maxDexBonus}</span>\r\n            )}\r\n          </div>\r\n\r\n          {armor.stealthDisadvantage && (\r\n            <Badge variant=\"danger\" size=\"sm\" className=\"mb-2\">\r\n              ‚ö†Ô∏è Stealth Disadvantage\r\n            </Badge>\r\n          )}\r\n\r\n          {armor.description && (\r\n            <p className=\"text-sm text-gray-700 mt-2\">{armor.description}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"ml-4 flex flex-col gap-2\">\r\n          <div className=\"flex gap-1\">\r\n            <Button\r\n              onClick={() => onEdit(armor)}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Edit armor\"\r\n              className=\"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n            >\r\n              <Edit2 size={16} />\r\n            </Button>\r\n            <Button\r\n              onClick={onDelete}\r\n              variant=\"ghost\"\r\n              size=\"xs\"\r\n              title=\"Delete armor\"\r\n              className=\"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n            >\r\n              <Trash2 size={16} />\r\n            </Button>\r\n          </div>\r\n          <Button\r\n            onClick={onToggleEquip}\r\n            variant={equipped ? \"success\" : \"outline\"}\r\n            size=\"sm\"\r\n            className={equipped ? \"\" : \"hover:bg-green-50 hover:border-green-300\"}\r\n          >\r\n            {equipped ? 'Equipped' : 'Equip'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}